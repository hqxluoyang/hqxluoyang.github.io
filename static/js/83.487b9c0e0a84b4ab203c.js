webpackJsonp([83],{CeEQ:function(t,e){},D7qF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),o=a("mvHQ"),r=a.n(o),s=(a("qlZE"),a("+/BF"),a("0X3R"),a("t+uK"),a("N64i"),a("m02k"),a("AQmf"),a("vhlj"),a("yyml"),a("jLnL"),a("Icdr"));a("u9yV"),a("k9Bd"),a("nUSl"),a("80cc"),a("Oq2I"),a("80zD"),a("fl3M");var d={data:function(){return{equipmentXData:[],equipmentYData:[],fontSize:12,fontSizeTitle:12,defaultColor:["#00ceff"],equipmentXData1:[],equipmentYData1:[],rooms:[]}},mounted:function(){this.getEquipmentData(),this.getVolume4room(),this.getList(),new QWebChannel(qt.webChannelTransport,function(t){window.scene3D=t.objects.viewerAPI,console.log("mount:"+r()(window.scene3D))})},methods:{onTapPosition:function(t){void 0!==window.scene3D&&window.scene3D.setLookAtLayer(t)},nowSize:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],document.documentElement.clientWidth;return t},gernerateId:function(t){return"infoRoom_"+t},gernerateWidth:function(t){return t>5?"width: 20%;height:50%;":5==t?"width: 20%;height:100%;":"width: calc(100% * ( 1 / ("+t+" % 5) );height: 100%;"},getXValue:function(t){return{1:"机柜",2:"服务器",3:"网络设备",4:"存储设备",5:"配线柜",6:"动环设备",7:"板卡",8:"台式机",9:"小机",10:"ODF",11:"DDF",12:"PCM",13:"刀笼",14:"刀片",15:"虚拟机",16:"探头",17:"负载均衡设备",18:"KVM类设备",19:"安全设备",20:"存储光纤交换机",21:"企业应用",22:"数据库",23:"WEB",25:"配电设备",26:"",27:"",100:"视频服务器"}[t]},getEquipmentData:function(){var t=this;this.$axios.get("/equipment/getequipmentstatistics/").then(function(e){e&&e.data&&e.data.data&&e.data.data.length>0&&(e.data.data.forEach(function(e){e.type&&(t.equipmentYData.push(t.getXValue(e.type)),t.equipmentXData.push(e.count))}),t.$nextTick(function(){t.loadBar({id:"equipNum",dataX:t.equipmentXData,dataY:t.equipmentYData,defaultColor:t.defaultColor,fontSize:t.nowSize(t.fontSize),barWidth:15})}))}).catch(function(t){})},getList:function(){var t=this;(new Date).getTime();this.$axios.get("/room/list_as_json/?_dc=t&page=1&start=0&limit=50").then(function(e){e&&e.data&&e.data.items&&e.data.items.length>0&&(e.data.items.slice(0,10).forEach(function(e){e.name&&(t.equipmentXData1.push(e.equnum),t.equipmentYData1.push(e.name))}),t.$nextTick(function(){t.loadBar({id:"roomEquipNum",dataX:t.equipmentXData1,dataY:t.equipmentYData1,defaultColor:t.defaultColor,fontSize:t.nowSize(t.fontSize),barWidth:15})}))}).catch(function(t){})},getVolume4room:function(){var t=this;this.$axios.get("/dashboard/volume4room/").then(function(e){if(e&&e.data&&e.data.data&&e.data.data.length>0){var a=e.data.data.slice(0,10);t.rooms=a;var i=["#00baff","#69fff6","#cc80ff","#ff7baa","#00baff","#00baff","#69fff6","#cc80ff","#ff7baa","#00baff"],n=[];n=a.map(function(t,e){return i.forEach(function(a,i){e==i&&(t.color=a)}),t}),t.$nextTick(function(){n.forEach(function(e,a){var i=e.free;i=0==i?1:i,t.loadPie3({id:"infoRoom_"+a,title:e.name,data:[e.used,i],color:[e.color],fontSize:t.nowSize(24),fontSizeTitle:t.nowSize(t.fontSizeTitle)})})})}}).catch(function(t){})},loadBar:function(t){var e=s.init(document.getElementById(t.id)),a={color:t.defaultColor,grid:{left:"2%",bottom:15,top:10,containLabel:!0},xAxis:{type:"value",name:"(台)",nameTextStyle:{fontSize:this.nowSize(t.fontSize),align:"left"},axisLabel:{fontSize:this.nowSize(t.fontSize),show:!1},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"category",data:t.dataY,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{fontSize:this.nowSize(t.fontSize)}},textStyle:{color:t.defaultColor},series:[{type:"bar",data:t.dataX,barMaxWidth:t.barWidth,itemStyle:{normal:{barBorderRadius:[0,3,3,0]}}},{type:"bar",data:t.dataX,barMaxWidth:t.barWidth,barGap:"-100%",label:{normal:{show:!0,position:"right",fontSize:this.nowSize(t.fontSize),formatter:function(e){return t.dataX[e.dataIndex]}}},itemStyle:{normal:{color:"rgba(0, 206, 225, 0.1)",barBorderRadius:[0,3,3,0]}}}]};e.setOption(a)},loadPie3:function(t){var e,a=s.init(document.getElementById(t.id)),i={grid:{bototom:4},title:{text:t.title,textStyle:{color:t.color,fontSize:this.nowSize(12)},bottom:0,left:"center"},series:[(e={type:"pie",data:t.data,radius:["55%","70%"],center:["50%","50%"],label:{normal:{formatter:"{b} : {d}%",fontSize:this.nowSize(t.fontSize)}},hoverAnimation:!1,avoidLabelOverlap:!1},n()(e,"label",{normal:{position:"center",formatter:function(e){return 0===e.dataIndex?(t.data[0]/(t.data[0]+t.data[1])*100).toFixed(2)+"%":void 0},fontWeight:"bold",fontSize:this.nowSize(12)}}),n()(e,"itemStyle",{normal:{color:function(e){return 0===e.dataIndex?t.color:"rgba(0, 206, 225, 0.1)"}}}),e)]};a.setOption(i)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chinaMobile"},[a("div",{staticStyle:{display:"none"}},[t._v("版本0.02")]),t._v(" "),a("div",{staticClass:"items-left"},[t._m(0),t._v(" "),a("div",{staticClass:"item3 bg-right bg-left2",attrs:{id:"roomZoom"}},[a("div",{staticClass:"title title-add"},[t._v("机房空间利用率统计")]),t._v(" "),a("div",{staticClass:"chart"},t._l(t.rooms,function(e,i){return a("div",{staticClass:"chart-item",style:t.gernerateWidth(t.rooms.length),attrs:{id:t.gernerateId(i)},on:{click:function(a){return t.onTapPosition(e.id)}}})}),0)]),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item1 bg-left bg-right"},[e("div",{staticClass:"title"},[this._v("设备数量统计")]),this._v(" "),e("div",{staticClass:"chart",attrs:{id:"equipNum"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item2 bg-right bg-left3"},[e("div",{staticClass:"title"},[this._v("机房设备数量统计")]),this._v(" "),e("div",{staticClass:"chart",attrs:{id:"roomEquipNum"}})])}]};var c=a("VU/8")(d,l,!1,function(t){a("CeEQ")},"data-v-8aadf942",null);e.default=c.exports}});