webpackJsonp([10],{"+4cm":function(t,e){},"+HLO":function(t,e){},"+psh":function(t,e){},"/prs":function(t,e){},"0t6b":function(t,e){},"1+pW":function(t,e){},"2pKV":function(t,e){},"4ntf":function(t,e){},"57F2":function(t,e){},"7xIN":function(t,e){},"8Qyx":function(t,e){},"9H6k":function(t,e){},D4uH:function(t,e,i){"use strict";var n=i("bOdI"),s=i.n(n),o={},a={name:"fa-icon",props:{name:{type:String,validator:function(t){return!t||t in o||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return s()({"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse},this.$options.name,!0)},icon:function(){return this.name?o[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,i=t.height;return Math.max(e,i)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,i,n){var s="fa-"+(r++).toString(16);return e[n]=s,' id="'+s+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,i,n,s){var o=i||s;return o&&e[o]?"#"+e[o]:t}),t}},mounted:function(){var t=this;if(this.name||0!==this.$children.length){if(!this.icon){var e=0,i=0;this.$children.forEach(function(n){n.outerScale=t.normalizedScale,e=Math.max(e,n.width),i=Math.max(i,n.height)}),this.childrenWidth=e,this.childrenHeight=i,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(i-t.height)/2})}}else console.warn('Invalid prop: prop "name" is required.')},register:function(t){for(var e in t){var i=t[e];i.paths||(i.paths=[]),i.d&&i.paths.push({d:i.d}),i.polygons||(i.polygons=[]),i.points&&i.polygons.push({points:i.points}),o[e]=i}},icons:o},r=870711;var l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",function(){return[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,n){return i("path",t._b({key:"path-"+n},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,n){return i("polygon",t._b({key:"polygon-"+n},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[i("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()]})],2)},staticRenderFns:[]};var c=i("VU/8")(a,l,!1,function(t){i("krkj")},null,null);e.a=c.exports},DWVi:function(t,e){},DuOc:function(t,e,i){"use strict";var n=i("7+uW");e.a=new n.default},EhIc:function(t,e){},FEDs:function(t,e,i){"use strict";(function(t){var e=i("pFYg"),n=i.n(e);
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if(void 0===t)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){var i=t.fn.jquery.split(" ")[0].split(".");if(i[0]<2&&i[1]<9||1==i[0]&&9==i[1]&&i[2]<1||i[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(t){t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(t),function(t){var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var s=t(this),o=s.attr("data-target");o||(o=(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t("#"===o?[]:o);e&&e.preventDefault(),a.length||(a=s.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),s=n.data("bs.alert");s||n.data("bs.alert",s=new i(this)),"string"==typeof e&&s[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(t),function(t){function e(e){return this.each(function(){var s=t(this),o=s.data("bs.button"),a="object"==(void 0===e?"undefined":n()(e))&&e;o||s.data("bs.button",o=new i(this,a)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var s=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=s,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target).closest(".btn");e.call(n,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(t),function(t){function e(e){return this.each(function(){var s=t(this),o=s.data("bs.carousel"),a=t.extend({},i.DEFAULTS,s.data(),"object"==(void 0===e?"undefined":n()(e))&&e),r="string"==typeof e?e:a.slide;o||s.data("bs.carousel",o=new i(this,a)),"number"==typeof e?o.to(e):r?o[r]():a.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,s),a=this.interval,r="next"==e?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,s.addClass(r),o.addClass(r),s.one("bsTransitionEnd",function(){o.removeClass([e,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var s=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=s,this};var o=function(i){var n,s=t(this),o=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),e.call(o,a),r&&o.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(t),function(t){function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),a=t.extend({},s.DEFAULTS,i.data(),"object"==(void 0===e?"undefined":n()(e))&&e);!o&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),o||i.data("bs.collapse",o=new s(this,a)),"string"==typeof e&&o[e]()})}var s=function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};s.VERSION="3.3.7",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[a](this.$element[0][l])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(s.TRANSITION_DURATION):n.call(this)}}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=s,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var o=e(s),a=o.data("bs.collapse")?"toggle":s.data();i.call(o,a)})}(t),function(t){function e(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var n=t(this),s=e(n),o={relatedTarget:this};s.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(s[0],i.target)||(s.trigger(i=t.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))}))}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.7",o.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var o=e(s),a=o.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},o.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),a=o.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&o.find(s).trigger("focus"),n.trigger("click");var r=o.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var l=r.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<r.length-1&&l++,~l||(l=0),r.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(t),function(t){function e(e,s){return this.each(function(){var o=t(this),a=o.data("bs.modal"),r=t.extend({},i.DEFAULTS,o.data(),"object"==(void 0===e?"undefined":n()(e))&&e);a||o.data("bs.modal",a=new i(this,r)),"string"==typeof e?a[e](s):r.show&&a.show(s)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var s=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=s,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),o=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,a,this)})}(t),function(t){var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var s=this.options.trigger.split(" "),o=s.length;o--;){var a=s[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var s=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(r);c&&(r=r.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),u=o[0].offsetWidth,h=o[0].offsetHeight;if(c){var f=r,p=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+h>p.bottom?"top":"top"==r&&d.top-h<p.top?"bottom":"right"==r&&d.right+u>p.width?"left":"left"==r&&d.left-u<p.left?"right":r,o.removeClass(f).addClass(r)}var v=this.getCalculatedOffset(r,d,u,h);this.applyPlacement(v,r);var m=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var d=this.getViewportAdjustedDelta(i,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var u=/top|bottom/.test(i),h=u?2*d.left-s+l:2*d.top-o+c,f=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(h,n[0][f],u)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){function n(){"in"!=s.hoverState&&o.detach(),s.$element&&s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),i&&i()}var s=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(e.TRANSITION_DURATION):n(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var o=window.SVGElement&&i instanceof window.SVGElement,a=n?{top:0,left:0}:o?null:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,r,l,a)},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-o-a.scroll,l=e.top+o-a.scroll+n;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var c=e.left-o,d=e.left+o+i;c<a.left?s.left=a.left-c:d>a.right&&(s.left=a.left+a.width-d)}return s},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var s=t(this),o=s.data("bs.tooltip"),a="object"==(void 0===i?"undefined":n()(i))&&i;!o&&/destroy|hide/.test(i)||(o||s.data("bs.tooltip",o=new e(this,a)),"string"==typeof i&&o[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(t),function(t){var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var s=t(this),o=s.data("bs.popover"),a="object"==(void 0===i?"undefined":n()(i))&&i;!o&&/destroy|hide/.test(i)||(o||s.data("bs.popover",o=new e(this,a)),"string"==typeof i&&o[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(t),function(t){function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var s=t(this),o=s.data("bs.scrollspy"),a="object"==(void 0===i?"undefined":n()(i))&&i;o||s.data("bs.scrollspy",o=new e(this,a)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),s=e.data("target")||e.attr("href"),o=/^#./.test(s)&&t(s);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)a!=o[t]&&e>=s[t]&&(void 0===s[t+1]||e<s[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var s=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=s,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(t),function(t){function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var r=t(n);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var a=n.find("> .active"),r=s&&t.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),a.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(t),function(t){function e(e){return this.each(function(){var s=t(this),o=s.data("bs.affix"),a="object"==(void 0===e?"undefined":n()(e))&&e;o||s.data("bs.affix",o=new i(this,a)),"string"==typeof e&&o[e]()})}var i=function e(i,n){this.options=t.extend({},e.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return s<i&&"top";if("bottom"==this.affixed)return null!=i?!(s+this.unpin<=o.top)&&"bottom":!(s+a<=t-n)&&"bottom";var r=null==this.affixed,l=r?s:o.top;return null!=i&&s<=i?"top":null!=n&&l+(r?a:e)>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),s=this.options.offset,o=s.top,a=s.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=(void 0===s?"undefined":n()(s))&&(a=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof a&&(a=s.bottom(this.$element));var l=this.getState(r,e,o,a);if(this.affixed!=l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),d=t.Event(c+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==l&&this.$element.offset({top:r-e-a})}};var s=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=s,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(t)}).call(e,i("7t+N"))},GErg:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNDQ1Ljc0IDYyLjEzIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZlZmZmZjt9LmNscy0ye2ZpbGw6dXJsKCPmnKrlkb3lkI3nmoTmuJDlj5hfMjYpO30uY2xzLTN7ZmlsbDojMDE5Y2ZhO30uY2xzLTR7ZmlsbDojZmZmO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0i5pyq5ZG95ZCN55qE5riQ5Y+YXzI2IiB4MT0iMjkuNzMiIHkxPSIyOS4yNyIgeDI9IjU2LjQ1IiB5Mj0iMi41NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2I3ZGRmMCIvPjxzdG9wIG9mZnNldD0iMC4wMyIgc3RvcC1jb2xvcj0iI2MyZTJmMiIvPjxzdG9wIG9mZnNldD0iMC4xMyIgc3RvcC1jb2xvcj0iI2Q4ZWRmNyIvPjxzdG9wIG9mZnNldD0iMC4yMyIgc3RvcC1jb2xvcj0iI2U5ZjVmYiIvPjxzdG9wIG9mZnNldD0iMC4zNiIgc3RvcC1jb2xvcj0iI2Y1ZmJmZCIvPjxzdG9wIG9mZnNldD0iMC41NCIgc3RvcC1jb2xvcj0iI2ZjZmVmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZlZmZmZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjx0aXRsZT7otYTmupAgMjwvdGl0bGU+PGcgaWQ9IuWbvuWxgl8yIiBkYXRhLW5hbWU9IuWbvuWxgiAyIj48ZyBpZD0i5Zu+5bGCXzEtMiIgZGF0YS1uYW1lPSLlm77lsYIgMSI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMzcuMiw1OS43YTcuNDUsNy40NSwwLDAsMCwxMS0xMC4wNkwzNy4zMSwzNy43NGwtMTAuMSwxMVoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0yLDQ5LjY0YTcuNDcsNy40NywwLDAsMCwuNDcsMTAuNTNoMEE3LjQ1LDcuNDUsMCwwLDAsMTMsNTkuN2wxMC0xMC45MS0xMC4xLTExWiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc5LjU2LDQ5LjY0LDUzLDIwLjZsLTEwLjEsMTFMNjguNTYsNTkuN2E3LjQ1LDcuNDUsMCwxLDAsMTEtMTAuMDZaIi8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNNTUuODUsMmgwYTcuNDcsNy40NywwLDAsMC0xMC41My40N0wyNS4wNywyNC41NkMzNC45LDM1LjMzLDQwLjc2LDI5LjUsNDAuNzYsMjkuNWwxMC4xLTExLDUuNDYtNkE3LjQ1LDcuNDUsMCwwLDAsNTUuODUsMloiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0yNS4wNywyNC41NmwtMTAtMTFBNy40NSw3LjQ1LDAsMSwwLDQsMjMuNjVMOS4zOSwyOS41LDE1LDM1LjZsMTAuMSwxMSwxMC4xMS0xMSw1LjU4LTYuMVMzNC45LDM1LjMzLDI1LjA3LDI0LjU2WiIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTE3NS45LDM2Ljg2bC02LjUzLTE3LjE0YTU1LjU5LDU1LjU5LDAsMCwxLTEuODMtNS41OSw0OS45MSw0OS45MSwwLDAsMS0xLjgyLDUuNjVsLTYuNjUsMTcuMDhabTAsMEgxNTkuMDdMMTU3LjMsNDEuOGgwbC00LjUzLDEyLjEzYTIuMywyLjMsMCwwLDEtMi4zLDEuNjUsNCw0LDAsMCwxLTEuMTgtLjE4QTIuNjIsMi42MiwwLDAsMSwxNDcuMjMsNTNhMi44OSwyLjg5LDAsMCwxLC4xOC0xbDE2LTQwLjIxQTQsNCwwLDAsMSwxNjcuNDgsOWE0LjA3LDQuMDcsMCwwLDEsNC4xOCwyLjc3bDE2LDQwLjMyYTIuMTgsMi4xOCwwLDAsMSwuMjMsMSwyLjU2LDIuNTYsMCwwLDEtMi4xMiwyLjM2LDMuMjMsMy4yMywwLDAsMS0xLjA2LjE4QTIuNDQsMi40NCwwLDAsMSwxODIuMzIsNTRMMTc3LjY3LDQxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTQiIGQ9Ik0yMjIuNDcsMTBhMi4zMiwyLjMyLDAsMCwxLDItMS4wNiwzLjc0LDMuNzQsMCwwLDEsMS44OC41OUEzLDMsMCwwLDEsMjI3LjcxLDEyYTEuOTMsMS45MywwLDAsMS0uNDgsMS4zTDIxNC4xNywzMS4wOWwxNC43NywyMC4xOWEyLjA4LDIuMDgsMCwwLDEsLjUzLDEuMzVBMywzLDAsMCwxLDIyOC4xMiw1NWEzLjc4LDMuNzgsMCwwLDEtMS44OS41OSwyLjYxLDIuNjEsMCwwLDEtMi4wNi0xbC0xMy42LTE5LjM3TDE5Ni45Miw1NC41OGEyLjMzLDIuMzMsMCwwLDEtMS45NSwxLDMuNTIsMy41MiwwLDAsMS0xLjk0LS42NSwyLjgxLDIuODEsMCwwLDEtMS4yOS0yLjI0LDIuNjMsMi42MywwLDAsMSwuNDctMS40MWwxNC43MS0yMC4xM0wxOTMuNSwxMy4yNWEyLjcxLDIuNzEsMCwwLDEtLjQ3LTEuMzYsMi45LDIuOSwwLDAsMSwxLjMtMi4yOUEzLjQ0LDMuNDQsMCwwLDEsMTk2LjIxLDlhMi4xNCwyLjE0LDAsMCwxLDEuODgsMWwxMi41NCwxNy4xM1oiLz48cGF0aCBjbGFzcz0iY2xzLTQiIGQ9Ik0yOTcuODEsMjkuMjZDMzA3LDMxLjIsMzEyLDM0LjMyLDMxMiw0Mi44NmMwLDcuNTktNS44MywxMy4zMS0xNi4zNywxMy4zMS0xMy40MiwwLTE2LjE4LTctMTcuNi0xMS43MmEzLjkyLDMuOTIsMCwwLDEtLjEyLS43NywyLjY1LDIuNjUsMCwwLDEsMi4yNC0yLjQ3LDUuOCw1LjgsMCwwLDEsMS0uMTIsMi41MiwyLjUyLDAsMCwxLDIuNTksMS43N2MxLjA2LDMuOTQsMyw4LjM2LDExLjYsOC4zNiw2LjcxLDAsMTAuODktMy4yNCwxMC44OS04LjMsMC00LjgzLTIuNjUtNy05LjU5LTguMzZsLTQuNzEtMWMtOC44My0xLjgzLTEyLjg0LTUuMTgtMTIuODQtMTIuODksMC02LjE5LDQuNTktMTIuMTksMTUuNjYtMTIuMTksMTAuNiwwLDE0LjI1LDUuNjUsMTUuNTQsOS44OWEyLjMxLDIuMzEsMCwwLDEsLjE4Ljg4LDIuNTIsMi41MiwwLDAsMS0yLjE4LDIuMzYsNS4wNyw1LjA3LDAsMCwxLTEsLjEyQTIuNjMsMi42MywwLDAsMSwzMDQuNywyMGMtLjk0LTMuMzYtMy40MS02LjY1LTkuOTUtNi42NS02LjgzLDAtOS45NSwzLjQxLTkuOTUsNy4zLDAsNC4yMywyLjA2LDYuNDEsOC42Niw3LjcxWiIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTMzNi43MiwyOS4yNmM5LjE5LDEuOTQsMTQuMTksNS4wNiwxNC4xOSwxMy42LDAsNy41OS01LjgzLDEzLjMxLTE2LjM2LDEzLjMxLTEzLjQzLDAtMTYuMTktNy0xNy42MS0xMS43MmEzLjkyLDMuOTIsMCwwLDEtLjEyLS43NywyLjY1LDIuNjUsMCwwLDEsMi4yNC0yLjQ3LDUuOCw1LjgsMCwwLDEsMS0uMTIsMi41MiwyLjUyLDAsMCwxLDIuNTksMS43N2MxLjA2LDMuOTQsMyw4LjM2LDExLjYsOC4zNiw2LjcxLDAsMTAuODktMy4yNCwxMC44OS04LjMsMC00LjgzLTIuNjUtNy05LjU5LTguMzZsLTQuNzEtMUMzMjIsMzEuNzMsMzE4LDI4LjM4LDMxOCwyMC42N2MwLTYuMTksNC41OS0xMi4xOSwxNS42Ni0xMi4xOSwxMC42LDAsMTQuMjUsNS42NSwxNS41NCw5Ljg5YTIuMzEsMi4zMSwwLDAsMSwuMTguODgsMi41MiwyLjUyLDAsMCwxLTIuMTgsMi4zNiw1LjA3LDUuMDcsMCwwLDEtMSwuMTJBMi42MywyLjYzLDAsMCwxLDM0My42MSwyMGMtLjk0LTMuMzYtMy40MS02LjY1LTkuOTUtNi42NS02LjgzLDAtMTAsMy40MS0xMCw3LjMsMCw0LjIzLDIuMDYsNi40MSw4LjY2LDcuNzFaIi8+PHBhdGggY2xhc3M9ImNscy00IiBkPSJNMzU4LjIxLDExLjQyQzM1OC4yMSw5Ljc3LDM1OS4zOSw5LDM2MSw5czIuODkuNzYsMi44OSwyLjQxVjUzLjE2YzAsMS41OS0xLjI0LDIuNDItMi44OSwyLjQycy0yLjc2LS44My0yLjc2LTIuNDJaIi8+PHBhdGggY2xhc3M9ImNscy00IiBkPSJNMzkwLjk0LDI5LjI2YzkuMTgsMS45NCwxNC4xOSw1LjA2LDE0LjE5LDEzLjYsMCw3LjU5LTUuODMsMTMuMzEtMTYuMzcsMTMuMzEtMTMuNDIsMC0xNi4xOS03LTE3LjYtMTEuNzJhMy45MiwzLjkyLDAsMCwxLS4xMi0uNzcsMi42NCwyLjY0LDAsMCwxLDIuMjQtMi40Nyw1LjU4LDUuNTgsMCwwLDEsMS0uMTIsMi41MywyLjUzLDAsMCwxLDIuNTksMS43N2MxLjA2LDMuOTQsMyw4LjM2LDExLjYsOC4zNiw2LjcxLDAsMTAuODktMy4yNCwxMC44OS04LjMsMC00LjgzLTIuNjUtNy05LjYtOC4zNmwtNC43MS0xYy04LjgzLTEuODMtMTIuODMtNS4xOC0xMi44My0xMi44OSwwLTYuMTksNC41OS0xMi4xOSwxNS42Ni0xMi4xOSwxMC41OSwwLDE0LjI0LDUuNjUsMTUuNTQsOS44OWEyLjMxLDIuMzEsMCwwLDEsLjE4Ljg4LDIuNTIsMi41MiwwLDAsMS0yLjE4LDIuMzYsNS4xNyw1LjE3LDAsMCwxLTEsLjEyQTIuNjMsMi42MywwLDAsMSwzOTcuODMsMjBjLS45NS0zLjM2LTMuNDItNi42NS05Ljk1LTYuNjUtNi44MywwLTkuOTUsMy40MS05Ljk1LDcuMywwLDQuMjMsMi4wNiw2LjQxLDguNjUsNy43MVoiLz48cGF0aCBjbGFzcz0iY2xzLTQiIGQ9Ik00MTEuMTMsMTQuNTRhMi4zMiwyLjMyLDAsMCwxLTIuMy0yLjUzLDIuMzksMi4zOSwwLDAsMSwyLjI0LTIuNjVoMzIuNDRBMi4zOCwyLjM4LDAsMCwxLDQ0NS43NCwxMmEyLjM0LDIuMzQsMCwwLDEtMi4yMywyLjUzSDQzMC4xNFY1My4xNmMwLDEuNTktMS4yMywyLjQyLTIuODIsMi40MnMtMi44My0uODMtMi44My0yLjQyVjE0LjU0WiIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTEyNSw1Mi44N2MtLjgyLDItMS44OCwyLjctMy43NywyLjdzLTIuOTQtLjctMy43Ni0yLjc2TDEwOC41MywzMC41Yy0xLjcxLTQuMjQtNC41My0xMi43Ny01LjY1LTE2LjQyLjE3LDMuODIuODgsMTQuNDguODgsMjIuNzhWNTMuMjJjMCwxLjU5LTEuMTIsMi4zNS0yLjc3LDIuMzVzLTIuNy0uNzYtMi43LTIuMzVWMTIuNDljMC0yLjEyLDEuNTMtMy40NywzLjc2LTMuNDcsMi41OSwwLDMuODMuOTQsNC43MSwzLjEybDEwLjgzLDI3LjE5YTg3Ljc2LDg3Ljc2LDAsMCwxLDMuNjUsMTFBOTUuMTksOTUuMTksMCwwLDEsMTI1LDM5LjIxbDEwLjY2LTI3QzEzNi41NSw5LjksMTM3LjksOSwxNDAuNDksOWEzLjQsMy40LDAsMCwxLDMuNzEsMy40N1Y1My4yMmMwLDEuNTktMS4xOCwyLjM1LTIuNzEsMi4zNXMtMi43Ny0uNzYtMi43Ny0yLjM1VjM2LjkyYzAtOC4zNi43MS0xOC45Ljk1LTIyLjktMS4xMiwzLjc3LTQsMTIuMTgtNS42LDE2LjE5WiIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTI3My42Miw1Mi4xbC0xNi00MC4zMkE0LjA5LDQuMDksMCwwLDAsMjUzLjQzLDlhNCw0LDAsMCwwLTQuMDYsMi43N0wyMzMuMzUsNTJhMy4xNCwzLjE0LDAsMCwwLS4xNywxLDIuNjEsMi42MSwwLDAsMCwyLjA2LDIuNDEsNCw0LDAsMCwwLDEuMTcuMTgsMi4yOCwyLjI4LDAsMCwwLDIuMy0xLjY1bDQuNTMtMTIuMTNMMjQ1LDM2Ljg2bDYuNjUtMTcuMDhhNDgsNDgsMCwwLDAsMS44My01LjY1LDU1LjY0LDU1LjY0LDAsMCwwLDEuODIsNS41OWw2LjU0LDE3LjE0LDEuNzYsNC45NEwyNjguMjYsNTRhMi40NiwyLjQ2LDAsMCwwLDIuNDIsMS42NSwzLjMyLDMuMzIsMCwwLDAsMS4wNi0uMTgsMi41NywyLjU3LDAsMCwwLDIuMTItMi4zNkEyLjA3LDIuMDcsMCwwLDAsMjczLjYyLDUyLjFaIi8+PC9nPjwvZz48L3N2Zz4="},KRnd:function(t,e){},KhYx:function(t,e){},M8Ed:function(t,e,i){"use strict";(function(t){var n=i("fZjL"),s=i.n(n),o=i("BO1k"),a=i.n(o),r=i("mvHQ"),l=i.n(r);e.a={mounted:function(){var e=this;t("input").keydown(function(t){13==t.keyCode&&e.login_click()})},data:function(){return{loginForm:{user_name:"",password:""},loading:!1,checked:!0,loginRules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login_click:function(){var e=this;this.$refs.loginForm.validate(function(i){if(i){e.loading=!0;var n={},o=!0,r=!1,c=void 0;try{for(var d,u=a()(s()(e.loginForm));!(o=(d=u.next()).done);o=!0){var h=d.value;n[h]=t.trim(e.loginForm[h])}}catch(t){r=!0,c=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw c}}e.axios.post("/admin/login",n).then(function(t){var i=t.data;if(0===i.ret.code){var n=i.token,s=e.jwtDecode(n),o={id:s.id,user_name:s.user_name,is_root:s.is_root,token:n,login_page:"login",privileges:i.privileges,nick_name:i.nick_name,org_name:i.org_name,org_id:i.org_id};e.$store.dispatch("setUsers",o),sessionStorage.setItem("userInfo",l()(o)),e.User=e.$root.get_current_user(),e.$socket.open(),e.axios.defaults.headers.common.Authorization="Bearer "+n,console.log("----------------11-------------------"),e.$router.push({path:"/"})}else e.$message.error("登录失败,"+i.ret.cn);e.loading=!1}).catch(function(t){e.loading=!1,console.error(t)})}})}}}}).call(e,i("7t+N"))},N5y6:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};i.d(n,"setisCollapse",function(){return Kt}),i.d(n,"setUsers",function(){return Jt});var s={};i.d(s,"getCollapse",function(){return te}),i.d(s,"getUsers",function(){return ee}),i.d(s,"getMenus",function(){return ie});var o=i("//Fk"),a=i.n(o),r=i("Xxa5"),l=i.n(r),c=i("exGp"),d=i.n(c),u=i("BO1k"),h=i.n(u),f=i("7+uW"),p={mounted:function(){var t=sessionStorage.getItem("userInfo");t?(this.$store.dispatch("setUsers",t),this.$socket.open()):this.$router.push("/login")}},v={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var m=i("VU/8")(p,v,!1,function(t){i("VseV")},"data-v-6a588d3b",null).exports,g=i("/ocq"),_=(i("wrM5"),i("bOdI")),y=i.n(_),w=i("mvHQ"),b=i.n(w),C=i("Dd8w"),A=i.n(C),L=i("woOf"),x=i.n(L),M=i("+n64"),k=i.n(M),T={data:function(){return{qrious:null}},props:{background:{type:String,default:"white"},backgroundAlpha:{type:Number,default:0},foreground:{type:String,default:"black"},foregroundAlpha:{type:Number,default:1},level:{type:String,default:"L"},mime:{type:String,default:"image/png"},padding:{type:Number,default:null},size:{type:Number,default:100},value:{type:String,required:!0}},watch:{background:function(){this.qrious.background=this.background},backgroundAlpha:function(){this.qrious.backgroundAlpha=this.backgroundAlpha},foreground:function(){this.qrious.foreground=this.foreground},foregroundAlpha:function(){this.qrious.foregroundAlpha=this.foregroundAlpha},level:function(){this.qrious.level=this.level},mime:function(){this.qrious.mime=this.mime},padding:function(){this.qrious.padding=this.padding},size:function(){this.qrious.size=this.size},value:function(){this.qrious.value=this.value}},mounted:function(){var t=this.$refs.qrcode,e=this.background,i=this.backgroundAlpha,n=this.foreground,s=this.foregroundAlpha,o=this.level,a=this.mime,r=this.padding,l=this.size;this.qrious=new k.a({element:t,background:e,backgroundAlpha:i,foreground:n,foregroundAlpha:s,level:o,mime:a,padding:r,size:l,value:this.value})},methods:{enlarge:function(){var t=this.$refs.qrcode;t.parentNode.className="changeDiv",t.className="changeQrcode",console.log(t),t.parentNode.onclick=function(){t.parentNode.className=" ",t.className=" "}}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{ref:"qrcode",on:{click:function(e){return e.stopPropagation(),t.enlarge.apply(null,arguments)}}})])},staticRenderFns:[]};var D=i("VU/8")(T,S,!1,function(t){i("EhIc")},null,null).exports,E=i("PUuf"),N={name:"ClientQRCode",components:{QriousVue:D},props:["configdata"],data:function(){return{cconfig:{screen_orientation:-1,auto_publish:!1,use_speaker:null,socket_io_url:"",send_video_width:"",send_video_height:"",capture_video_width:"",capture_video_height:"",video_bitrate:"",video_frame_rate:"",use_uvc_camera:!1},dialogVisible:!1,value:"",qrSize:390,callWays:[{index:!1,name:"听筒"},{index:!0,name:"扬声器"}],callWay:"话筒",directions:[{index:0,name:"横屏"},{index:1,name:"竖屏"},{index:8,name:"横屏倒置"},{index:9,name:"竖屏倒置"},{index:10,name:"完全传感器控制(Realwear)"},{index:-1,name:"不改变客户端原有配置"}],direction:"不改变客户端原有配置"}},methods:{toConfigStr:function(){var t={};x()(t,this.cconfig),-1==t.screen_orientation&&delete t.screen_orientation,null==t.auto_publish&&delete t.auto_publish,null==t.use_speaker&&delete t.use_speaker;var e=[["auto_publish","ap"],["enable_capture_slider","ecs"],["socket_io_url","siu"],["capture_video_width","cvw"],["capture_video_height","cvh"],["send_video_width","svw"],["send_video_height","svh"],["video_frame_rate","vfr"],["video_bitrate","vb"],["state_update_period","sup"],["use_uvc_camera","uvc"],["my_user_name","mun"],["server_token","st"],["ice_servers","is"],["screen_orientation","so"],["use_speaker","us"],["realwear_release_mic","rrm"]];for(var i in t)for(var n=0;n<e.length;n++)if(e[n][0]==i){t[e[n][1]]=t[i],delete t[i];break}console.log("生成二维码参数:",t),this.value=b()(t),this.$log.info(this.value)},setDirection:function(t){this.cconfig.screen_orientation=t.index,this.direction=t.name,this.$refs.direction.style.display="none",this.$refs.black.style.display="none"},getDirection:function(){this.$refs.direction.style.display="block",this.$refs.black.style.display="block"},closeDirection:function(){this.$refs.direction.style.display="none",this.$refs.black.style.display="none"},setCallWays:function(t){this.callWay=t.name,this.cconfig.use_speaker=t.index,this.$refs.callWay.style.display="none",this.$refs.black.style.display="none"},getCallWays:function(){this.$refs.callWay.style.display="block",this.$refs.black.style.display="block"},closeCallWays:function(){this.$refs.callWay.style.display="none",this.$refs.black.style.display="none"},getNetList:function(t){var e=this,i=this;this.axios.get("/system/network/config").then(function(n){if(console.log("list ==>",n),0==n.data.ret.code){var s=[];e.nameservers=n.data.nameservers;var o=n.data.interfaces;for(var a in o)s.push(o[a]);s.length<2?i.dialogVisible=!0:i.setConfing(t)}})},setConfing:function(t){x()(this.cconfig,t.config),console.log("this.cconfig.aid:",this.cconfig),this.cconfig.aid=this.getSessionItem("id"),this.toConfigStr()},setEQ:function(t){var e=t.config.socket_io_url;(e="http://127.0.0.1").indexOf("127.0.0.1")>-1||e.indexOf("localhost")>-1?this.getNetList(t):this.setConfing(t)}},watch:{configdata:{handler:function(t,e){console.log("newc:",t),this.setConfing(t)}},cconfig:{handler:function(t,e){this.toConfigStr()},deep:!0}},mounted:function(){}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qrcode"},[""!=this.value?i("QriousVue",{staticStyle:{display:"inline-block",width:"100%","text-align":"center"},attrs:{value:t.value,size:t.qrSize}}):t._e(),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),i("div",{staticStyle:{"text-align":"center","line-height":"60px","font-size":"0.1rem"}},[t._v("用视频协助手机客户端扫描此二维码可完成连接此平台的配置")]),t._v(" "),i("div",{ref:"black",staticStyle:{position:"fixed",left:"0",top:"0",opacity:"0.5",width:"100%",height:"100%",background:"#000",display:"none","z-index":"1"}}),t._v(" "),i("div",{staticClass:"qr"},[i("div",[i("span",[t._v("接入地址：")]),t._v(" "),i("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(t.cconfig.socket_io_url))])]),t._v(" "),i("div",[i("span",[t._v("画面方向：")]),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:t.getDirection}},[t._v(t._s(t.direction)+"    "),i("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),i("div",{ref:"direction",staticClass:"direction"},[i("ul",[t._l(t.directions,function(e,n){return i("li",{key:n,on:{click:function(i){return t.setDirection(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),t._v(" "),i("li",{on:{click:t.closeDirection}},[t._v("取消")])],2)])]),t._v(" "),i("div",[i("span",[t._v("声音输出:")]),t._v(" "),i("div",{ref:"callWay",staticClass:"callWay"},[i("ul",[t._l(t.callWays,function(e,n){return i("li",{key:n,on:{click:function(i){return t.setCallWays(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),t._v(" "),i("li",{on:{click:t.closeCallWays}},[t._v("取消")])],2)]),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:t.getCallWays}},[t._v(t._s(t.callWay)+"    "),i("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),i("div",[i("span",[t._v("自动推送:")]),t._v(" "),i("el-switch",{model:{value:t.cconfig.auto_publish,callback:function(e){t.$set(t.cconfig,"auto_publish",e)},expression:"cconfig.auto_publish"}})],1),t._v(" "),i("div",[i("span",[t._v("外置摄像头:")]),t._v(" "),i("el-switch",{model:{value:t.cconfig.use_uvc_camera,callback:function(e){t.$set(t.cconfig,"use_uvc_camera",e)},expression:"cconfig.use_uvc_camera"}})],1),t._v(" "),i("div",[i("span",[t._v("编码分辨率:")]),t._v(" "),i("span",[t._v(" "+t._s(t.cconfig.send_video_width)+" X "+t._s(t.cconfig.send_video_height)+" ")])]),t._v(" "),i("div",[i("span",[t._v("采集分辨率:")]),t._v(" "),i("span",[t._v(" "+t._s(t.cconfig.capture_video_width)+" X "+t._s(t.cconfig.capture_video_height)+" ")])]),t._v(" "),i("div",[i("span",[t._v("帧率:")]),t._v(" "),i("span",[t._v(" "+t._s(t.cconfig.video_frame_rate)+" ")])]),t._v(" "),i("div",[i("span",[t._v("码流:")]),t._v(" "),i("span",[t._v(" "+t._s(t.cconfig.video_bitrate)+" ")])])])],1)},staticRenderFns:[]};var I=i("VU/8")(N,$,!1,function(t){i("r2fw")},"data-v-769259ce",null).exports,j=i("fZjL"),O=i.n(j),V={props:["deviceInfo","Encoder"],data:function(){return{isgroup:!0,groups:[],filterText:"",defaultProps:{children:"children",label:"name"},currentGroup:{},userInfo:{}}},mounted:function(){this.userInfo=this.$root.get_current_user(),this.getUserBYGroupId()},watch:{filterText:function(t){this.$refs.refTree.filter(t)}},methods:{getUserBYGroupId:function(){var t=this;this.axios.get("/org/user/list?org_id=1&type=single").then(function(e){console.log(e),0==e.data.ret.code&&(t.groups=e.data.list)})},handleNodeClick:function(t){t.nick_name?this.currentGroup=t:this.currentGroup={}},filterNode:function(t,e){return!t||(e.nick_name?-1!==e.nick_name.indexOf(t):null)},bind_user:function(){var t=this;if(O()(this.currentGroup)===[]||0===O()(this.currentGroup).length)this.$message.warning("请选择绑定人员");else{var e={user_id:this.currentGroup.id,device_id:this.deviceInfo.row.id};this.$confirm("此操作将绑定该人员, 是否继续?","分配设备",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.post("/device/bind_user",e).then(function(e){if(0==e.data.ret.code){var i=t.$parent.$parent.deviceInfo[t.deviceInfo.index];i.org_id==e.data.userRole.orgId?i.admin_user_name=t.currentGroup.user_name:t.$parent.$parent.deviceInfo.splice(t.deviceInfo.index,1),t.$message.success("绑定人员成功"),t.cancel()}else t.$message.error("绑定人员失败，"+e.data.ret.cn)})}).catch(function(t){})}},cancel:function(){this.$parent.$parent.isassignGroup=!1},submitEncoder:function(){O()(this.currentGroup)===[]||0===O()(this.currentGroup).length?this.$message.warning("请选择绑定人员"):this.Encoder?this.saveEncoder():this.registerEncoder()},cancelEncoder:function(){this.$parent.$parent.$parent.isAdd=!1},saveEncoder:function(){},registerEncoder:function(){var t=this;console.log(this.currentGroup);var e={admin_id:this.userInfo.id};this.axios.post("/encoder_device/register",e).then(function(e){console.log(e),0==e.data.ret.code?(t.$message.success("添加编码器成功"),t.cancelEncoder(),t.$parent.$parent.$parent.getEncoderDevice()):t.$message.error("添加编码器失败,"+e.data.ret.cn)})}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"GroupUser"},[i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入人员名称",clearable:""},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("el-tree",{ref:"refTree",staticClass:"tree",attrs:{data:t.groups,"node-key":"groups.id","highlight-current":!0,"filter-node-method":t.filterNode,props:t.defaultProps},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var n=e.data;return i("div",{staticClass:"custom-tree-node"},[n.nick_name?i("span",[i("i",{staticClass:"el-icon-s-custom"}),t._v(t._s(n.nick_name)+"\n        ")]):i("span",[t._v("\n          "+t._s(n.name)+"\n        ")])])}}])}),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"info"},on:{click:t.cancelEncoder}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitEncoder}},[t._v("确 定")])],1)],1)])},staticRenderFns:[]};var z=i("VU/8")(V,R,!1,function(t){i("fc1b")},"data-v-6262bff6",null).exports,U=i("dyOy"),W={components:{QriousVue:D,GroupUserList:z},data:function(){return{groups:[],info:[],iplist:[],filterText:"",currentGroup:{},defaultProps:{children:"children",label:"name"},message:"test---",newEncoder:{},isAdd:!1,isShowQRCode:!1,QRvalue:"",qrSize:150,userInfo:{},pushUrl:"",showUrl:!1,editDrone:!1}},mounted:function(){this.userInfo=this.$root.get_current_user(),this.getEncoderDevice()},watch:{filterText:function(t){this.$refs.refTree.filter(t)}},methods:{filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},copystart:function(){this.$message("已经拷贝到剪切板")},handleNodeClick:function(t){var e=this;this.currentGroup=t,console.log("handleNodeClick ==>",t),this.axios.get("/encoder_device/list/0/1000?org_id="+t.id).then(function(t){console.log("list ==>",t),0==t.data.ret.code&&(e.info=t.data.list)})},getEncoderDevice:function(){var t=this;this.axios.get("/encoder_device/list/0/1000?org_id="+this.userInfo.org_id).then(function(e){console.log("list ==>",e),0==e.data.ret.code&&(t.info=e.data.list)})},addNewEncoder:function(){this.isAdd=!0},editEncoder:function(t,e){this.isAdd=!0,this.newEncoder=x()({},e,{index:t})},delEncoder:function(t,e){var i=this;this.$confirm("此操作将永久删除该无人机, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.axios.post("/encoder_device/unregister",{id:e.id}).then(function(e){console.log("delEncoder ==>",e),0==e.data.ret.code?(i.info.splice(t,1),i.$message.success("删除无人机成功")):i.$message.error("删除无人机失败,"+e.data.ret.cn)})})},showQR:function(t,e){this.isShowQRCode=!0,this.QRvalue=e.name},getPushRtmpUrl:function(t,e){var i=this,n=this;this.iplist=[],this.axios.get("/media_server/get_rtmp_url?name="+e.name).then(function(t){if(console.log(t),0==t.data.code){i.showUrl=!0;U(t.data.rtmp_push_url);var e=t.data.rtmp_push_url;e&&e.indexOf("${url_host}")>0?"127.0.0.1"==n.baseUrl.hostname||"localhost"==n.baseUrl.hostname?i.setEQData(t.data.rtmp_push_url):(i.pushUrl=e.replace("${url_host}",n.baseUrl.hostname),i.iplist.push(i.pushUrl)):(i.pushUrl=t.data.rtmp_push_url,i.iplist.push(t.data.rtmp_push_url))}else i.$message(t.data.cn)})},setEQData:function(t){this.getNetList(t)},setIPList:function(t,e){console.log("set tuiliu dizhi：",e),this.iplist.push(t.replace("${url_host}",e.ip))},getNetList:function(t){var e=this;this.iplist=[],this.axios.get("/system/network/config").then(function(i){if(console.log("list ==>",i),0==i.data.ret.code){e.nameservers=i.data.nameservers;var n=i.data.interfaces;for(var s in n)e.setIPList(t,n[s].ipv4)}})},closeDialog:function(){this.newEncoder={},this.resetForm(),this.isAdd=!1},submitUserForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.newEncoder.id?e.save():e.register()})},resetForm:function(){this.$refs.newEncoderForm.resetFields()},register:function(){var t=this,e=this.newEncoder,i={name:e.name,admin_name:e.admin_name};this.axios.post("/encoder_device/register",i).then(function(e){console.log(e),0==e.data.ret.code&&(t.resetForm(),t.isAdd=!1,t.$message.success("添加无人机成功"))})},save:function(){var t=this,e=this.newEncoder;console.log(e);var i={name:e.name,encoder_name:e.encoder_name};this.axios.post("/encoder_device/update",i).then(function(i){0==i.data.ret.code?(t.$message.success("更新设备成功"),t.info[e.index].encoder_name=e.encoder_name,console.log("save ==>"),t.isAdd=!1):t.$message.error("更新设备失败"+i.data.ret.cn)})}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ManageEncoder"},[i("div",{staticClass:"tool"},[i("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:t.addNewEncoder}},[t._v("新建")])],1),t._v(" "),i("div",{staticClass:"table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.info,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.encoder_name}},[t._v(t._s(e.row.encoder_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"user_name",label:"归属用户",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.nick_name}},[t._v(t._s(e.row.nick_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"encoder_name",label:"流ID",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.name}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",type:"info",plain:""},on:{click:function(i){return t.getPushRtmpUrl(e.$index,e.row)}}},[t._v("查看推流地址")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"info",plain:""},on:{click:function(i){return t.editEncoder(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(i){return t.delEncoder(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.newEncoder.id?"编辑无人机":"添加无人机",visible:t.isAdd,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.isAdd=e},close:t.closeDialog}},[i("el-form",{ref:"newEncoderForm",staticStyle:{width:"100%"},attrs:{model:t.newEncoder,"label-width":"120px"}},[t.newEncoder.id?i("el-form-item",{attrs:{label:"无人机串号",prop:"name"}},[i("el-input",{attrs:{disabled:"",placeholder:"请输入无人机串码"},model:{value:t.newEncoder.name,callback:function(e){t.$set(t.newEncoder,"name",e)},expression:"newEncoder.name"}})],1):t._e(),t._v(" "),t.newEncoder.id?i("el-form-item",{attrs:{label:"设备名称",prop:"encode_name"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入无人机名称"},model:{value:t.newEncoder.encoder_name,callback:function(e){t.$set(t.newEncoder,"encoder_name",e)},expression:"newEncoder.encoder_name"}})],1):t._e(),t._v(" "),t.newEncoder.id?t._e():i("GroupUserList",{attrs:{Encoder:t.newEncoder.id}}),t._v(" "),t.newEncoder.id?i("el-form-item",{attrs:{prop:"null"}},[i("el-button",{attrs:{type:"info"},on:{click:function(e){return t.closeDialog("newEncoderForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUserForm("newEncoderForm")}}},[t._v("保 存")])],1):t._e()],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"二维码信息",visible:t.isShowQRCode,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.isShowQRCode=e},close:function(e){t.isShowQRCode=!1}}},[i("div",{staticClass:"QRCodeBox"},[i("QriousVue",{attrs:{value:t.QRvalue,size:t.qrSize}})],1)]),t._v(" "),i("el-dialog",{attrs:{title:"推流地址",visible:t.showUrl,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.showUrl=e},close:function(e){t.showUrl=!1}}},t._l(t.iplist,function(e,n){return i("div",{key:n},[i("span",[t._v(t._s(e))]),t._v(" "),i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"el",arg:"copy"}],staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.copystart()}}},[t._v("复制")])],1)}),0)],1)},staticRenderFns:[]};var Y=i("VU/8")(W,P,!1,function(t){i("DWVi")},"data-v-8415d63e",null).exports,F={components:{GroupUserList:z},data:function(){return{editDevice:!1,isassignGroup:!1,groups:[],filterText:"",deviceInfo:[],currentRow:{},defaultProps:{children:"children",label:"name"},currentGroup:{},device:{}}},mounted:function(){var t=this,e=this.$root.get_current_user();this.$root.getDeviceBYGroupId(e.org_id).then(function(e){t.deviceInfo=null==e?[]:e})},methods:{closeDialog:function(){this.editDevice=!1},assignGroup:function(t,e){this.currentRow={index:t,row:e},this.isassignGroup=!0},onEdit:function(t,e){this.currentRow={index:t,row:e},this.editDevice=!0,this.device={id:e.id,serial_number:e.serial_number,device_name:e.device_name}},confirmDelete:function(t,e){this.$confirm('此操作将永久删除设备名为<strong><font color="red">'+e.name+"</font></strong>的用户, 是否继续?","警告",{confirmButtonText:"我知道我在做什么，请继续",cancelButtonText:"取消",confirmButtonClass:"el-button--danger",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){}).catch(function(){})},toggleDevicePublic:function(t){var e=this;return d()(l.a.mark(function i(){return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e.axios.put("/device/set_public",{id:t.id,is_public:!t.is_public}).then(function(i){0==i.data.ret.code?(t.is_public=!t.is_public,e.$message.success("设备当前为"+(t.is_public?"公共":"私有"))):e.$message.error("修改设备为"+(t.is_public?"私有":"公共")+"失败, 错误原因:"+e.apiErrorMessage(i))});case 1:case"end":return i.stop()}},i,e)}))()},updateDevice:function(){var t=this,e=this;this.axios.put("/device/update",{id:e.device.id,name:e.device.device_name,serial_number:e.device.serial_number}).then(function(i){0==i.data.ret.code?(t.editDevice=!1,t.$message.success("更新设备成功"),t.deviceInfo[t.currentRow.index].device_name=e.device.device_name):t.$message.error("更新设备失败, 错误原因:"+t.apiErrorMessage(i))})}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"devicegroup"},[i("div",{staticClass:"content"},[i("div",{staticClass:"group"},[i("el-table",{attrs:{stripe:"",data:t.deviceInfo,border:""}},[i("el-table-column",{attrs:{prop:"device_name",label:"设备名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.device_name}},[t._v(t._s(e.row.device_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"admin_user_name",label:"归属用户"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.admin_user_name}},[t._v(t._s(e.row.admin_user_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"serial_number",label:"设备串号"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.serial_number}},[t._v(t._s(e.row.serial_number))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"created_at",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:t.moment(e.row.created_at).format("YYYY-MM-DD HH:mm:ss")}},[t._v(t._s(t.moment(e.row.created_at).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",type:"info",plain:""},on:{click:function(i){return t.onEdit(e.$index,e.row)}}},[t._v("编 辑")])]}}])})],1)],1)]),t._v(" "),i("div",{staticClass:"editDevice"},[i("el-dialog",{attrs:{title:"编辑设备信息",visible:t.editDevice,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.editDevice=e}}},[i("el-form",{ref:"newUserForm",staticStyle:{width:"100%"},attrs:{model:t.device,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"设备串码",prop:"user_name"}},[i("el-input",{attrs:{"auto-complete":"off",readonly:!0,placeholder:"设备串码"},model:{value:t.device.serial_number,callback:function(e){t.$set(t.device,"serial_number",e)},expression:"device.serial_number"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"设备名称",prop:"nick_name"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入设备名称"},model:{value:t.device.device_name,callback:function(e){t.$set(t.device,"device_name",e)},expression:"device.device_name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"info"},on:{click:t.closeDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.updateDevice}},[t._v("保 存")])],1)],1)],1)],1),t._v(" "),i("div"),t._v(" "),i("div")])},staticRenderFns:[]};var Q=i("VU/8")(F,B,!1,function(t){i("zz3G")},"data-v-a3d496d0",null).exports,G=i("DuOc"),H=i("NYxO"),Z={data:function(){return{activeIndex:"/"}},computed:A()({},Object(H.b)({menus:"getMenus",users:"getUsers"})),mounted:function(){try{this.setPath()}catch(t){}},methods:{setLeftWidth:function(){this.$store.dispatch("setisCollapse",!this.isCollapse)},handleSelect:function(){},changeNav:function(t){this.$router.push(t.path),setTimeout(function(){G.a.$emit("routerChange",t)})},handleCommand:function(t){console.log("el:",t),t&&G.a.$emit(t)},setPath:function(){var t=E.a.menusList(this.$route.path,this.menus);this.menus=t.children,this.activeIndex=t.ppath,console.log("header total:",t)}}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"headerMenus"},[i("el-menu",{staticClass:"el-menu-demo",staticStyle:{border:"solid 0px #ccc"},attrs:{"text-color":"#5f8fc1","background-color":"#133050","active-text-color":"aqua","default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},t._l(t.menus,function(e,n){return i("el-menu-item",{key:n,staticStyle:{"margin-left":"20px"},attrs:{index:e.path},on:{click:function(i){return t.changeNav(e)}}},[i("i",{class:e.mate.icon}),t._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.mate.title))])])}),1)],1)},staticRenderFns:[]};var X=i("VU/8")(Z,q,!1,function(t){i("gmxA")},null,null).exports,K={components:{},data:function(){return{currentPath:"/",menus:[],leftBnt:!0}},computed:A()({},Object(H.b)({isCollapse:"getCollapse",menusStore:"getMenus"})),methods:{handleOpen:function(t,e){console.log(t,e,this.$router)},handleClose:function(){},findNav:function(t){for(var e=0;e<routerArray.length;e++)if(routerArray[e].path==this.currentPath)return void(this.menus=routerArray[e].children);this.menus=[]},selectMenu:function(t,e){console.log(t,e,this.$route.path),t==this.$route.path?G.a.$emit("clickMenu",t):this.$router.push(t)},routerChange:function(t){this.setPath(t)},setPath:function(t){var e=this.$route.path;if(t&&(e=t.path),console.log("this.path.:",this.$route.path,t),"/"!=e){this.leftBnt=!0;var i=E.a.menusList(e,this.menusStore);this.menus=i.children,this.currentPath=i.cpath}else this.leftBnt=!1}},mounted:function(){this.currentPath=this.$route.path;try{this.setPath()}catch(t){}G.a.$on("routerChange",this.routerChange)}},J={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.leftBnt,expression:"leftBnt"}],staticClass:"left"},[i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.currentPath,"text-color":"#fff","background-color":"rgb(14, 26, 50)","active-text-color":"aqua",collapse:t.isCollapse},on:{select:t.selectMenu,open:t.handleOpen,close:t.handleClose}},[t._l(t.menus,function(e,n){return i("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.children,expression:"el.children"}],key:n,attrs:{index:e.path}},[i("template",{slot:"title"},[i("i",{class:e.mate.icon}),t._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.mate.title))])]),t._v(" "),t._l(e.children,function(e,n){return i("el-menu-item-group",{key:n},[i("el-menu-item",{attrs:{index:e.path}},[t._v(t._s(e.mate.title))])],1)})],2)}),t._v(" "),t._l(t.menus,function(e){return i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.children,expression:"!el.children"}],key:e.path,attrs:{index:e.path}},[i("i",{class:e.mate.icon}),t._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.mate.title))])])})],2)],1)},staticRenderFns:[]};var tt,et=i("VU/8")(K,J,!1,function(t){i("WVBq")},"data-v-93be4a5e",null).exports,it=(i("dyOy"),{components:{ClientQRCode:I,DroneList:Y,DeviceList:Q,headerMenus:X,leftNav:et},name:"app",data:function(){return{version:"dev",licenseVisible:!1,license:{},device_quantity:0,status_icon:{name:"unlink",color:"red"},iplist:[],loading_text:"",dialogVisible:!1,clientQRCodeVisible:!1,disconnectDialogVisible:!1,isSockIoConnected:!1,modifyPassDialogVisible:!1,User:[],untreated_message:null,reFresh:!0,currentTime:"",configdata:"",tempconfig:"",isCollapse:!1,active:"",userVisible:!1,droneVisible:!1,deviceVisible:!1}},mounted:function(){var t=this;this.active=this.$route.path;this.$root.$on("http_login_response",function(e){t.onHttpLoginResponse(e)}),sessionStorage.getItem("userInfo")&&this.$socket.open(),this.User=this.$root.get_current_user(),null==this.User&&this.$router.push("/login");this.$refs.content;this.bus.$on("logout_destroy",function(){t.reFresh=!1,t.$nextTick(function(){t.reFresh=!0})})},computed:A()({},Object(H.b)({menus:"getMenus"})),methods:(tt={onHttpLoginResponse:function(t){if(0===t.ret.code)try{var e=t.token,i=this.jwtDecode(e);E.a.setCookie("token",e),sessionStorage.setItem("userInfo",b()({id:i.id,user_name:i.user_name,is_root:i.is_root,token:e,login_page:"login",privileges:t.privileges,nick_name:t.nick_name,org_name:t.org_name,org_id:t.org_id})),this.User=this.$root.get_current_user(),this.$socket.open(),this.axios.defaults.headers.common.Authorization="Bearer "+e,this.$router.push({path:"/"})}catch(t){console.log(t)}else this.$message.error("登录失败,"+t.ret.cn)},loadLicense:function(){var t=this;this.licenseVisible?this.licenseVisible=!1:this.axios.get("/admin/load_license").then(function(e){0==e.data.ret&&(t.license=e.data.license,t.device_quantity=e.data.device_quantity,t.licenseVisible=!0)}).catch(function(t){console.log("exception when load license "+t)})},onSocketConnect:function(){var t=this.getSessionItem("user_name"),e=this.getSessionItem("token");t&&e&&this.$socket.emit("admin_login",{user_name:t,token:e}),this.$root.yrtc_info&&this.$socket.emit("restore_yrtc_info",this.$root.yrtc_info)},getNetList:function(t){var e=this,i=this;i.iplist=[],this.axios.get("/system/network/config").then(function(t){if(console.log("list ==>",t),0==t.data.ret.code){e.nameservers=t.data.nameservers;var n=t.data.interfaces;for(var s in n)i.iplist.push(n[s].ipv4);1==i.iplist.length?i.setIp(i.iplist[0]):i.iplist.length>1&&(i.dialogVisible=!0)}})},setConfigData:function(t){var e=this;this.dialogVisible=!1,this.clientQRCodeVisible=!0,setTimeout(function(){e.configdata=t},200)},setIp:function(t){this.tempconfig.config.socket_io_url.indexOf("127.0.0.1")>-1?(this.tempconfig.config.socket_io_url=this.tempconfig.config.socket_io_url.replace("127.0.0.1",t.ip),console.log("replace:",this.tempconfig.config.socket_io_url)):this.tempconfig.config.socket_io_url.indexOf("localhost")>-1&&(this.tempconfig.config.socket_io_url=this.tempconfig.config.socket_io_url.replace("localhost",t.ip)),this.setConfigData(this.tempconfig)},setEQData:function(t){t.config.socket_io_url;this.tempconfig=t,t.config.socket_io_url.indexOf("127.0.0.1")>-1||t.config.socket_io_url.indexOf("localhost")>-1?this.getNetList(t):this.setConfigData(t)},setEQ:function(){var t=this,e=this;this.axios.get("/admin/client_config").then(function(t){0==t.data.ret.code&&(t.data.config.socket_io_url&&E.a.isUrl(t.data.config.socket_io_url)||(t.data.config.socket_io_url=E.a.getEqUrl(e.baseUrl.origin)),e.setEQData(t.data))}).catch(function(e){t.$emit("get_config_error")})},onUserCommand:function(t){switch(t){case"logout":this.$root.initiativelogout();break;case"modify-password":this.modifyPassDialogVisible=!0;break;case"show-license":this.loadLicense();break;case"show-clientQRCode":this.clientQRCodeVisible=!0}},current_time:function(){var t=new Date,e=t.getHours(),i=t.getMinutes();t.getSeconds(),t.getDay(),t.getDate(),t.getFullYear(),t.getMonth();if(e>12){var n=e-12;this.currentTime=i>=10?"PM"+n+":"+i:"PM"+n+":0"+i}else this.currentTime=i>=10?"AM"+e+":"+i:"AM"+e+":0"+i}},y()(tt,"loadLicense",function(){var t=this;this.licenseVisible?this.licenseVisible=!1:this.axios.get("/admin/load_license").then(function(e){0==e.data.ret&&(t.license=e.data.license,t.device_quantity=e.data.device_quantity,t.licenseVisible=!0)}).catch(function(t){console.log("exception when load license "+t)})}),y()(tt,"onUserCommand",function(t){switch(t){case"logout":this.$root.initiativelogout();break;case"modify-password":this.modifyPassDialogVisible=!0;break;case"show-license":this.loadLicense();break;case"show-clientQRCode":this.setEQ();break;case"show-drone":this.droneVisible=!0;break;case"userList":this.userVisible=!0;break;case"deviceList":this.deviceVisible=!0}}),y()(tt,"handleOpen",function(t,e){}),y()(tt,"handleClose",function(t,e){}),tt),watch:{"$root.yrtc_info":function(t){"connected"==t?(this.status_icon.name="link",this.status_icon.color="green"):(this.status_icon.name="unlink",this.status_icon.color="red")},$route:{handler:function(t,e){this.active=t.path},deep:!0}},sockets:{connect:function(){console.log("socket connect ！！！"),this.onSocketConnect()},reconnect:function(){this.onSocketConnect()},notify_message:function(t){this.$message({dangerouslyUseHTMLString:!0,message:t.content,center:!0,duration:t.duration,showClose:!0,type:t.type})},disconnect:function(){this.isSockIoConnected=!1,this.$root.yrtc_info.url&&this.$message.error("与信令服务器的连接断开")},admin_login_ret:function(t){if(t.code)this.$message.error("socket登录失败！");else if(t.yrtc_url){if(this.isSockIoConnected=!0,t.yrtc_url.indexOf("${web_url_hostname}")?this.$root.yrtc_info.url=t.yrtc_url.replace("${web_url_hostname}",this.baseUrl.hostname):this.$root.yrtc_info.url=t.yrtc_url,t.ice_servers){this.ice_servers=[];for(var e=0;e<t.ice_servers.length;e++)this.ice_servers.push({url:t.ice_servers[e].url.replace("${web_url_hostname}",this.baseUrl.hostname),username:t.ice_servers[e].username,credential:t.ice_servers[e].password})}this.$socket.emit("online_list")}},license_device_full:function(t){this.$alert("授权设备数量已满，设备"+t+"的连接请求被拒绝，您可以购买更多授权来解决此问题。","授权证书限制提醒",{confirmButtonText:"知道了",type:"warning"})},license_expired:function(){this.$alert("服务器的授权证书已过期，如果您需要继续使用此软件请重新申请授权证书，谢谢！","授权证书过期提醒",{confirmButtonText:"我知道了",type:"warning"})},force_logout:function(){this.$root.logout(),this.$alert("此账号已在另一个终端登录","强制下线通知",{confirmButtonText:"我知道了",type:"warning"})}}}),nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-container",[n("el-header",[t._v(t._s(t.Config.headerTitle)+"-"+t._s(t.version)+"\n\n      "),n("div",{staticClass:"control_userinfo"},[null!=t.User?n("span",{staticClass:"user_name"},[t._v(t._s(t.User.user_name))]):t._e(),t._v(" "),n("el-dropdown",{attrs:{"hide-on-click":!1},on:{command:t.onUserCommand}},[n("span",{staticClass:"el-dropdown-link"},[n("img",{attrs:{src:i("jh3X"),alt:""}})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"show-clientQRCode"}},[t._v("二维码配置")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"show-license"}},[t._v("License信息")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"deviceList"}},[t._v("设备列表")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"show-drone"}},[t._v("推流列表")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"logout",divided:""}},[t._v("退出 "),null!=t.User?n("strong",[t._v("("+t._s(t.User.user_name)+")")]):t._e()])],1)],1),t._v(" "),n("headerMenus")],1)]),t._v(" "),n("el-container",[n("leftNav"),t._v(" "),n("el-main",[n("keep-alive",[n("router-view")],1)],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"客户端配置二维码",visible:t.clientQRCodeVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.clientQRCodeVisible=e}}},[t.clientQRCodeVisible?n("ClientQRCode",{attrs:{configdata:t.configdata},on:{get_config_error:function(e){t.clientQRCodeVisible=!1}}}):t._e(),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),n("el-dialog",{attrs:{title:"License信息",visible:t.licenseVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.licenseVisible=e}}},[n("div",{staticClass:"license-info"},[n("div",[n("span",[t._v("授权用户：")]),n("span",[t._v(t._s(t.license.owner))])]),t._v(" "),n("div",[n("span",[t._v("过期时间：")]),n("span",[t._v(t._s(t.moment(t.license.expire_date).format("YYYY-MM-DD")))])]),t._v(" "),n("div",[n("span",[t._v("授权设备数量：")]),n("span",[t._v(t._s(t.license.device_quantity_limit))])]),t._v(" "),n("div",[n("span",[t._v("已用设备数量：")]),n("span",[t._v(t._s(this.device_quantity))])])]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger"},on:{click:function(e){t.licenseVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"设备列表",visible:t.deviceVisible,width:"60%"},on:{"update:visible":function(e){t.deviceVisible=e}}},[n("DeviceList")],1),t._v(" "),n("el-dialog",{attrs:{title:"推流列表",visible:t.droneVisible,width:"60%"},on:{"update:visible":function(e){t.droneVisible=e}}},[n("DroneList")],1),t._v(" "),n("el-dialog",{attrs:{title:"使用那个网络地址作为设备连接地址",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",[n("ul",t._l(t.iplist,function(e,i){return n("li",{key:i,staticClass:"iplistPanle"},[n("div",{staticStyle:{width:"150px"}},[t._v(t._s(e.ip))]),t._v(" "),n("div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.setIp(e)}}},[t._v("应用")])],1)])}),0)]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var st=i("VU/8")(it,nt,!1,function(t){i("+psh")},null,null).exports,ot=i("nKb+"),at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"login_wrapper"},[n("div",{staticClass:"login_card"},[n("div",{staticClass:"clearfix"},[n("p",[t._v(t._s(t.Config.headerTitle)+"\n        ")])]),t._v(" "),n("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:t.loginForm,rules:t.loginRules}},[n("el-form-item",{attrs:{prop:"user_name"}},[n("el-input",{attrs:{type:"text",placeholder:"Username"},model:{value:t.loginForm.user_name,callback:function(e){t.$set(t.loginForm,"user_name",e)},expression:"loginForm.user_name"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("记住密码")])],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"login_btn",attrs:{type:"primary",loading:t.loading},on:{click:t.login_click}},[t._v("登入")])],1)],1)],1),t._v(" "),n("img",{staticClass:"logo",attrs:{src:i("GErg"),alt:""}}),t._v(" "),"beta"!==t.Config.customer?n("p",{staticClass:"support"},[t._v("技术支持~北京沃安科技有限公司")]):t._e()])},staticRenderFns:[]};var rt=function(t){i("N5y6")},lt=i("VU/8")(ot.a,at,!1,rt,"data-v-7daceb3e",null).exports,ct={data:function(){return{close:"el-icon-s-fold",open:"el-icon-s-unfold",list:[{label:"二维码配置",type:"clientQRCodeVisible"},{label:"License信息",type:"license"},{label:"修改密码",type:"modifyPassword"},{label:"退出"}]}},computed:A()({},Object(H.b)({isCollapse:"getCollapse",users:"getUsers"})),methods:{setLeftWidth:function(){this.$store.dispatch("setisCollapse",!this.isCollapse)},handleCommand:function(t){console.log("el:",t),t&&G.a.$emit(t)}}},dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("ul",{staticClass:"headerlist"},[i("li",{staticClass:"logo item"},[t._v("Xender")]),t._v(" "),i("li",{staticClass:"openMrg item"},[i("span",{staticClass:"setBnt"},[i("i",{staticClass:"setBntIcon",class:t.isCollapse?t.open:t.close,on:{click:t.setLeftWidth}})])]),t._v(" "),i("li",{staticClass:"center item"}),t._v(" "),i("li",{staticClass:"righttab item"},[i("div",{staticClass:"user"},[t._v(t._s(t.users.nick_name))]),t._v(" "),i("div",{staticClass:"UserCenter"},[i("el-dropdown",{on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"info",icon:"el-icon-s-custom",circle:""}})],1),t._v(" "),i("el-dropdown-menu",{staticStyle:{padding:"20px"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.list,function(e,n){return i("el-dropdown-item",{key:n,attrs:{command:e.type}},[t._v(t._s(e.label))])}),1)],1)],1)])])])},staticRenderFns:[]};var ut=i("VU/8")(ct,dt,!1,function(t){i("rHYO")},"data-v-db990ebe",null).exports,ht={data:function(){return{qrious:null}},props:{background:{type:String,default:"white"},backgroundAlpha:{type:Number,default:0},foreground:{type:String,default:"black"},foregroundAlpha:{type:Number,default:1},level:{type:String,default:"L"},mime:{type:String,default:"image/png"},padding:{type:Number,default:null},size:{type:Number,default:100},value:{type:String,required:!0}},watch:{background:function(){this.qrious.background=this.background},backgroundAlpha:function(){this.qrious.backgroundAlpha=this.backgroundAlpha},foreground:function(){this.qrious.foreground=this.foreground},foregroundAlpha:function(){this.qrious.foregroundAlpha=this.foregroundAlpha},level:function(){this.qrious.level=this.level},mime:function(){this.qrious.mime=this.mime},padding:function(){this.qrious.padding=this.padding},size:function(){this.qrious.size=this.size},value:function(){this.qrious.value=this.value}},mounted:function(){var t=this.$refs.qrcode,e=this.background,i=this.backgroundAlpha,n=this.foreground,s=this.foregroundAlpha,o=this.level,a=this.mime,r=this.padding,l=this.size;this.qrious=new k.a({element:t,background:e,backgroundAlpha:i,foreground:n,foregroundAlpha:s,level:o,mime:a,padding:r,size:l,value:this.value})},methods:{enlarge:function(){var t=this.$refs.qrcode;t.parentNode.className="changeDiv",t.className="changeQrcode",console.log(t),t.parentNode.onclick=function(){t.parentNode.className=" ",t.className=" "}}}},ft={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{ref:"qrcode",on:{click:function(e){return e.stopPropagation(),t.enlarge.apply(null,arguments)}}})])},staticRenderFns:[]};var pt={name:"ClientQRCode",components:{QriousVue:i("VU/8")(ht,ft,!1,function(t){i("1+pW")},null,null).exports},data:function(){return{cconfig:{screen_orientation:-1,auto_publish:!1,use_speaker:null,use_uvc_camera:!1},value:"",qrSize:390,callWays:[{index:!1,name:"听筒"},{index:!0,name:"扬声器"}],callWay:"话筒",directions:[{index:0,name:"横屏"},{index:1,name:"竖屏"},{index:8,name:"横屏倒置"},{index:9,name:"竖屏倒置"},{index:10,name:"完全传感器控制(Realwear)"},{index:-1,name:"不改变客户端原有配置"}],direction:"不改变客户端原有配置"}},methods:{toConfigStr:function(){var t={};x()(t,this.cconfig),-1==t.screen_orientation&&delete t.screen_orientation,null==t.auto_publish&&delete t.auto_publish,null==t.use_speaker&&delete t.use_speaker,console.log("this.cconfig:",this.cconfig);var e=[["auto_publish","ap"],["enable_capture_slider","ecs"],["socket_io_url","siu"],["capture_video_width","cvw"],["capture_video_height","cvh"],["send_video_width","svw"],["send_video_height","svh"],["video_frame_rate","vfr"],["video_bitrate","vb"],["state_update_period","sup"],["use_uvc_camera","uvc"],["my_user_name","mun"],["server_token","st"],["ice_servers","is"],["screen_orientation","so"],["use_speaker","us"],["realwear_release_mic","rrm"]];for(var i in t)for(var n=0;n<e.length;n++)if(e[n][0]==i){t[e[n][1]]=t[i],delete t[i];break}this.value=b()(t),this.$log.info(this.value)},setDirection:function(t){this.cconfig.screen_orientation=t.index,this.direction=t.name,this.$refs.direction.style.display="none",this.$refs.black.style.display="none"},getDirection:function(){this.$refs.direction.style.display="block",this.$refs.black.style.display="block"},closeDirection:function(){this.$refs.direction.style.display="none",this.$refs.black.style.display="none"},setCallWays:function(t){this.callWay=t.name,this.cconfig.use_speaker=t.index,this.$refs.callWay.style.display="none",this.$refs.black.style.display="none"},getCallWays:function(){this.$refs.callWay.style.display="block",this.$refs.black.style.display="block"},closeCallWays:function(){this.$refs.callWay.style.display="none",this.$refs.black.style.display="none"}},watch:{cconfig:{handler:function(t,e){this.toConfigStr()},deep:!0}},mounted:function(){var t=this,e=this;this.axios.get("/admin/client_config").then(function(i){0==i.data.ret.code&&(i.data.config.socket_io_url||(i.data.config.socket_io_url=e.baseURL.origin+config.baseURL),console.log("end socket_io_url1:",i.data.config.socket_io_url,i.data.config),x()(t.cconfig,i.data.config),t.cconfig.aid=t.getSessionItem("id"),t.toConfigStr())}).catch(function(e){t.$emit("get_config_error")})}},vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qrcode"},[""!=this.value?i("QriousVue",{staticStyle:{display:"inline-block",width:"100%","text-align":"center"},attrs:{value:t.value,size:t.qrSize}}):t._e(),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),i("div",{staticStyle:{"text-align":"center","line-height":"60px","font-size":"0.1rem"}},[t._v("用视频协助手机客户端扫描此二维码可完成连接此平台的配置")]),t._v(" "),i("div",{ref:"black",staticStyle:{position:"fixed",left:"0",top:"0",opacity:"0.5",width:"100%",height:"100%",background:"#000",display:"none","z-index":"1"}}),t._v(" "),i("div",{staticClass:"qr"},[i("div",[i("span",[t._v("画面方向：")]),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:t.getDirection}},[t._v(t._s(t.direction)+"    "),i("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),i("div",{ref:"direction",staticClass:"direction"},[i("ul",[t._l(t.directions,function(e,n){return i("li",{key:n,on:{click:function(i){return t.setDirection(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),t._v(" "),i("li",{on:{click:t.closeDirection}},[t._v("取消")])],2)])]),t._v(" "),i("div",[i("span",[t._v("声音输出:")]),t._v(" "),i("div",{ref:"callWay",staticClass:"callWay"},[i("ul",[t._l(t.callWays,function(e,n){return i("li",{key:n,on:{click:function(i){return t.setCallWays(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),t._v(" "),i("li",{on:{click:t.closeCallWays}},[t._v("取消")])],2)]),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:t.getCallWays}},[t._v(t._s(t.callWay)+"    "),i("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),i("div",[i("span",[t._v("自动推送:")]),t._v(" "),i("el-switch",{model:{value:t.cconfig.auto_publish,callback:function(e){t.$set(t.cconfig,"auto_publish",e)},expression:"cconfig.auto_publish"}})],1),t._v(" "),i("div",[i("span",[t._v("外置摄像头:")]),t._v(" "),i("el-switch",{model:{value:t.cconfig.use_uvc_camera,callback:function(e){t.$set(t.cconfig,"use_uvc_camera",e)},expression:"cconfig.use_uvc_camera"}})],1)])],1)},staticRenderFns:[]};var mt={components:{ClientQRCode:i("VU/8")(pt,vt,!1,function(t){i("sAjk")},"data-v-4504ffb7",null).exports},data:function(){return{clientQRCodeVisibleNew:!1}},methods:{show:function(){this.clientQRCodeVisibleNew=!0}},mounted:function(){console.log("-------init log---------:",this.clientQRCodeVisibleNew),G.a.$on("clientQRCodeVisible",this.show)}},gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"--",visible:t.clientQRCodeVisibleNew,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.clientQRCodeVisibleNew=e}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var _t={components:{},data:function(){return{clientQRCodeVisibleNew:!1,device_quantity:0,license:{}}},methods:{show:function(){this.clientQRCodeVisibleNew=!0}},mounted:function(){var t=this;console.log("-------init log---------:",this.clientQRCodeVisibleNew),G.a.$on("license",this.show),this.axios.get("/admin/load_license").then(function(e){0==e.data.ret&&(t.license=e.data.license,t.device_quantity=e.data.device_quantity)}).catch(function(t){console.log("exception when load license "+t)})}},yt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"License信息",visible:t.clientQRCodeVisibleNew,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.clientQRCodeVisibleNew=e}}},[i("div",{staticClass:"License"},[i("div",{staticClass:"LicenseInfo"},[i("div",[i("span",[t._v("授权用户：")]),i("span",[t._v(t._s(t.license.owner))])]),t._v(" "),i("div",[i("span",[t._v("过期时间：")]),i("span",[t._v(t._s(t.moment(t.license.expire_date).format("YYYY-MM-DD")))])]),t._v(" "),i("div",[i("span",[t._v("授权设备数量：")]),i("span",[t._v(t._s(t.license.device_quantity_limit))])]),t._v(" "),i("div",[i("span",[t._v("已用设备数量：")]),i("span",[t._v(t._s(this.device_quantity))])])])])])],1)},staticRenderFns:[]};var wt={name:"modifyPassDialog",data:function(){var t=this;return{form:{},visible:!1,modifyPassFormRule:{old_password:[{required:!0,message:"请输入旧密码"}],password:[{validator:function(e,i,n){""===i?n(new Error("请输入密码")):i&&i.length<6?n(new Error("密码长度至少是6位")):(""!==t.form.confirm_password&&t.$refs.passForm.validateField("confirm_password"),n())},trigger:"blur"}],confirm_password:[{validator:function(e,i,n){""===i?n(new Error("请再次输入密码")):i!==t.form.password?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}]}}},mounted:function(){this.$log.warn(".....="),G.a.$on("modifyPassword",this.show)},methods:{show:function(){this.visible=!0},submitForm:function(){var t=this;return this.axios.put("/admin/modify_pass",this.form).then(function(e){return 0==e.data.ret.code?(t.$message.success("登录密码修改成功"),t.closeDialog(),t.$root.logout(),!0):(t.$message.error("密码修改失败, 错误原因:"+e.data.ret.cn),!1)}).catch(function(e){return t.$log.error(e),t.$message.error("网络错误"),!1})},closeDialog:function(){this.visible=!1}}},bt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"修改登录密码",visible:t.visible,width:"30%","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{ref:"passForm",staticStyle:{width:"95%"},attrs:{"label-width":"120px",rules:t.modifyPassFormRule,model:t.form,size:"small"}},[i("el-form-item",{attrs:{label:"旧用户密码",prop:"old_password"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入现在使用的旧登录密码","show-password":!0,type:"password"},model:{value:t.form.old_password,callback:function(e){t.$set(t.form,"old_password",e)},expression:"form.old_password"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"新用户密码",prop:"password"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入新的登录密码",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"确认新密码",prop:"confirm_password"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请再次输入新的登录密码",type:"password"},model:{value:t.form.confirm_password,callback:function(e){t.$set(t.form,"confirm_password",e)},expression:"form.confirm_password"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("保 存")])],1)],1)},staticRenderFns:[]},Ct={components:{},data:function(){return{flag:!1,input:255,device_quantity:0,net:{}}},methods:{show:function(t){this.flag=!0,this.net=t}},mounted:function(){console.log("-------init log---------:",this.flag),G.a.$on("network",this.show)}},At={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"网络配置",visible:t.flag,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.flag=e}}},[i("div",{staticClass:"network"},[i("ul",{staticClass:"ulstyle"},[i("li",{staticClass:"listyle"},[i("div",{staticClass:"labelItem"},[t._v("IP地址:")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)]),t._v(" "),i("li",{staticClass:"listyle"},[i("div",{staticClass:"labelItem"},[t._v("子网掩码:")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)]),t._v(" "),i("li",{staticClass:"listyle"},[i("div",{staticClass:"labelItem"},[t._v("默认网关:")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" -\n            "),i("el-input",{staticClass:"inputType",attrs:{size:"mini"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)])])])])},staticRenderFns:[]};var Lt={components:{ClientQRCodeDialog:i("VU/8")(mt,gt,!1,function(t){i("+4cm")},"data-v-d3a6b100",null).exports,license:i("VU/8")(_t,yt,!1,function(t){i("2pKV")},"data-v-d62368fe",null).exports,ModifyPassword:i("VU/8")(wt,bt,!1,null,null,null).exports,network:i("VU/8")(Ct,At,!1,function(t){i("/prs")},"data-v-3c605570",null).exports}},xt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ClientQRCodeDialog"),this._v(" "),e("license"),this._v(" "),e("network"),this._v(" "),e("ModifyPassword")],1)},staticRenderFns:[]};var Mt={components:{left:et,headerBody:ut,indexPanel:i("VU/8")(Lt,xt,!1,function(t){i("4ntf")},"data-v-3f292f36",null).exports},data:function(){return{width:200}},watch:{isCollapse:function(t,e){this.width=t?65:200}},computed:A()({},Object(H.b)({isCollapse:"getCollapse"})),mounted:function(){}},kt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-header",[e("headerBody")],1),this._v(" "),e("el-container",{staticStyle:{display:"flex"}},[e("el-aside",{attrs:{width:this.width+"px"}},[e("left")],1),this._v(" "),e("el-main",[e("keep-alive",[e("router-view")],1)],1)],1),this._v(" "),e("indexPanel")],1)},staticRenderFns:[]};var Tt=i("VU/8")(Mt,kt,!1,function(t){i("mof1")},"data-v-d6b0f352",null).exports,St=[{path:"/",name:"home",component:st,children:[{path:"/",component:function(){return new Promise(function(t){t()}).then(i.bind(null,"wrM5"))}},{path:"/login",name:"Login",component:lt},{path:"/network",component:function(){return i.e(3).then(i.bind(null,"1hn1"))}},{path:"/changepassward",component:function(){return i.e(7).then(i.bind(null,"eFCs"))}},{path:"/history_videos",component:function(){return Promise.all([i.e(0),i.e(2)]).then(i.bind(null,"SvFk"))}},{path:"/UserGroup",component:function(){return i.e(5).then(i.bind(null,"dGnv"))}},{path:"/snapshot_list",component:function(){return Promise.all([i.e(0),i.e(4)]).then(i.bind(null,"cUby"))}},{path:"/HistoryVideosSXT",component:function(){return Promise.all([i.e(0),i.e(1)]).then(i.bind(null,"F/6g"))}},{path:"/ManageTags",component:function(){return i.e(6).then(i.bind(null,"qvwx"))}}]}],Dt=i("M8Ed"),Et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"login_wrapper"},[n("div",{staticClass:"login_card"},[n("div",{staticClass:"clearfix"},[n("p",[t._v(t._s(t.Config.headerTitle)+"\n        ")])]),t._v(" "),n("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:t.loginForm,rules:t.loginRules}},[n("el-form-item",{attrs:{prop:"user_name"}},[n("el-input",{attrs:{type:"text",placeholder:"Username"},model:{value:t.loginForm.user_name,callback:function(e){t.$set(t.loginForm,"user_name",e)},expression:"loginForm.user_name"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("记住密码")])],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"login_btn",attrs:{type:"primary",loading:t.loading},on:{click:t.login_click}},[t._v("登入")])],1)],1)],1),t._v(" "),n("img",{staticClass:"logo",attrs:{src:i("GErg"),alt:""}}),t._v(" "),"beta"!==t.Config.customer?n("p",{staticClass:"support"},[t._v("技术支持~北京沃安科技有限公司")]):t._e()])},staticRenderFns:[]};var Nt=function(t){i("Tqzy")},$t=[{path:"/",name:"homePage",component:Tt,children:[{path:"/history_videos",component:function(){return Promise.all([i.e(0),i.e(2)]).then(i.bind(null,"SvFk"))}},{path:"/snapshot_list",component:function(){return Promise.all([i.e(0),i.e(4)]).then(i.bind(null,"cUby"))}},{path:"/HistoryVideosSXT",component:function(){return Promise.all([i.e(0),i.e(1)]).then(i.bind(null,"F/6g"))}},{path:"/ManageTags",component:function(){return i.e(6).then(i.bind(null,"qvwx"))}},{path:"/test",component:function(){return i.e(8).then(i.bind(null,"ST9m"))}},{path:"/network",component:function(){return i.e(3).then(i.bind(null,"1hn1"))}},{path:"/changepassward",component:function(){return i.e(7).then(i.bind(null,"eFCs"))}},{path:"/UserGroup",component:function(){return i.e(5).then(i.bind(null,"dGnv"))}}]},{path:"/login",name:"Login",component:i("VU/8")(Dt.a,Et,!1,Nt,"data-v-449fb2be",null).exports}];console.log("config.project.mode:",config),f.default.use(g.a);var It=g.a.prototype.push;g.a.prototype.push=function(t){return It.call(this,t).catch(function(t){return t})};var jt=new g.a({routes:0==config.project.type?St:$t}),Ot=i("mtWM"),Vt=i.n(Ot),Rt=i("ytdl"),zt=i.n(Rt),Ut=(i("a0pE"),i("7xIN"),i("FEDs"),i("pZOg")),Wt=i.n(Ut),Pt=i("Wgty"),Yt=i.n(Pt),Ft=(i("D/PP"),i("D4uH")),Bt=(i("KRnd"),i("zL8q")),Qt=i.n(Bt),Gt=(i("NoOD"),i("+HLO"),null),Ht=function(t){Gt&&Gt.close(),Gt=Object(Bt.Message)(t)};["error","success","info","warning"].forEach(function(t){Ht[t]=function(e){return"string"==typeof e&&(e={message:e}),e.type=t,Ht(e)}});var Zt=Ht,qt=i("M4fF"),Xt=i.n(qt),Kt=function(t,e){return(0,t.commit)("setisCollapse",e)},Jt=function(t,e){return(0,t.commit)("setUsers",e)},te=function(t){return t.isCollapse},ee=function(t){return t.users},ie=function(t){return t.menus},ne={state:{isCollapse:!1,users:null,menus:[{path:"/",name:"homePage",mate:{title:"首页",icon:"el-icon-s-home"}},{path:"/history_videos",name:"homePage",mate:{title:"媒资中心",icon:"el-icon-files"},children:[{path:"/history_videos",mate:{title:"视频资料",icon:"el-icon-woan-shipin"}},{path:"/snapshot_list",mate:{title:"图像资料",icon:"el-icon-woan-tuxiang"}}]},{path:"/network",mate:{title:"配置中心",icon:"el-icon-setting"},children:[{path:"/network",mate:{title:"网络配置",icon:"el-icon-woan-000-wangluoshezhi-05"}},{path:"/changepassward",mate:{title:"修改密码",icon:"el-icon-info"}}]}]},actions:n,getters:s,mutations:{setisCollapse:function(t,e){t.isCollapse=e},setUsers:function(t,e){t.users=e}}};f.default.use(H.a);var se=new H.a.Store({modules:{main:ne},strict:!1}),oe=i("wvfG"),ae=i.n(oe),re=i("dyOy");f.default.use(ae.a),f.default.prototype.$my_user_name="Admin",f.default.prototype.bus=new f.default,f.default.use(Qt.a),f.default.prototype._=Xt.a,f.default.prototype.$message=Zt;var le={isEnabled:!0,logLevel:"error",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0};f.default.use(Wt.a,le),window.isElectron=function(){return"Bridge"in window},config.baseURL&&""!=config.baseURL?Vt.a.defaults.baseURL=config.baseURL:Vt.a.defaults.baseURL=location.protocol+"//"+location.host+location.pathname.replace("index.html/",""),window.isElectron()&&(Vt.a.defaults.baseURL=window.Bridge.settings.get("baseUrl")),f.default.prototype.Config=window.config;var ce,de,ue,he,fe=new re(Vt.a.defaults.baseURL);f.default.prototype.baseUrl=fe,f.default.config.productionTip=!1,f.default.component("icon",Ft.a),f.default.prototype.moment=moment,f.default.prototype.jwtDecode=zt.a,f.default.prototype.deviceList=[],f.default.prototype.$eventHub=f.default.prototype.$eventHub||new f.default,f.default.prototype.apiErrorMessage=function(t){return t.data.ret.cn},f.default.prototype.formatDeviceName=function(t,e){if("Admin"==t)return"管理端";var i=!0,n=!1,s=void 0;try{for(var o,a=h()(e);!(i=(o=a.next()).done);i=!0){var r=o.value;if(r.serial_number==t)return null==r.name?t:r.name}}catch(t){n=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw s}}return t},de=fe.protocol,ue=fe.host,ce=E.a.getSocketPath(),f.default.use(Yt.a,io(de+"//"+ue,{autoConnect:!1,path:ce,reconnectionDelayMax:1e4,query:{user_name:f.default.prototype.$my_user_name}})),setTimeout(function(){pe=new f.default({el:"#app",router:jt,store:se,created:function(){},methods:{logout:function(){var t=this.getSessionItem("login_page");t&&(this.bus.$emit("logout_destroy"),sessionStorage.removeItem("userInfo"),delete this.axios.defaults.headers.common.Authorization,this.$router.replace({path:"/"+t})),delete this.$root.yrtc_info.url,this.$yrtc_videoroom&&this.$yrtc_videoroom.destroy(),this.$yrtc_screenshare&&this.$yrtc_screenshare.destroy(),this.$yrtc_streaming&&this.$yrtc_streaming.destroy(),this.$socket.emit("admin_logout")},initiativelogout:function(){var t=this,e=this.getSessionItem("login_page");e&&this.$confirm("确认退出登录嘛?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.bus.$emit("logout_destroy"),sessionStorage.removeItem("userInfo"),delete t.axios.defaults.headers.common.Authorization,t.$router.replace({path:"/"+e})}),delete this.$root.yrtc_info.url,this.$yrtc_videoroom&&this.$yrtc_videoroom.destroy(),this.$yrtc_screenshare&&this.$yrtc_screenshare.destroy(),this.$yrtc_streaming&&this.$yrtc_streaming.destroy(),this.$socket.emit("admin_logout")},fetchImageList:function(t,e,i,n,s,o,a){var r=this;return this.axios.post("/v2/snapshot/list/"+e+"/"+i+"/"+t+"?device_type="+s,a).then(function(t){if(0==t.data.ret.code&&t.data.list.length>0){var e=r.baseUrl.protocol,i=r.baseUrl.host,s="/yrtc/vr_record/";t.data.vod_url_prefix&&(t.data.vod_url_prefix.protocol&&t.data.vod_url_prefix.protocol.length>1&&(e=t.data.vod_url_prefix.protocol),t.data.vod_url_prefix.host&&t.data.vod_url_prefix.host.length>1&&(i=t.data.vod_url_prefix.host),t.data.vod_url_prefix.path&&t.data.vod_url_prefix.path.length>1&&(s=t.data.vod_url_prefix.path));for(var a=e+"//"+i+s,l=0;l<t.data.list.length;l++){var c=t.data.list[l].label_set.substring(1,t.data.list[l].label_set.length-1),d=c.replace(/" /g,""),u=d.replace(/ "/g,"");t.data.list[l].label_set=u.split(","),""==t.data.list[l].label_set&&(t.data.list[l].label_set=[]);var h=t.data.list[l];n.push({src:a+"/"+h.file_name,time:moment(h.snap_time).utcOffset("+0800").format("YYYY-MM-DD HH:mm:ss"),device_sn:h.device_serial_number,id:h.id,admin_user_name:h.admin_user_name,admin_id:h.admin_id,vod_id:h.vod_id,label_set:h.label_set,org_id:h.org_name,org_name:h.org_name,device:h.device})}return console.log(t),o?{total:t.data.total,data:n}:n}})},addTags:function(t,e,i){var n=this;return this.axios.put("/label/set/"+t+"/"+e,i).then(function(t){return 0==t.data.ret.code?n.$message.success("标签添加成功"):n.$message.error("标签添加失败，请重试"),t.data.ret.code})},delTags:function(t,e,i){var n=this;return this.axios.put("/label/unset/"+t+"/"+e,i).then(function(t){return 0==t.data.ret.code?n.$message.success("标签删除成功"):n.$message.error("标签删除失败，请重试"),t.data.ret.code})},getTagsAll:function(t,e){return this.axios.get("/label/list/"+t+"/"+e).then(function(t){if(0==t.data.ret.code)return t.data.list;console.error("获取标签错误,"+t.data.ret.cn)})},getGroups:function(t){var e=this.get_current_user(),i=sessionStorage.getItem("currentorgName");return this.axios.get("/org/list?id="+t).then(function(n){if(0==n.data.ret.code){if(n.data.list.length>0&&0==t)return n.data.list;if(n.data.list.length>0&&0!=t){var s=e.org_name;void 0!=i&&(s=i);var o=[{id:e.org_id,name:s,children:[]}];for(var a in n.data.list)o[0].children.push(n.data.list[a]);return o}if(void 0!=e.org_id){var r=[{id:e.org_id,name:e.org_name,children:[]}];return r}return null}})},getGroupsDetail:function(t){return this.axios.get("/org/list_detail?id="+t).then(function(t){if(0==t.data.ret.code)return t.data.list.length>0?t.data.list:null})},getDeviceBYGroupId:function(t){var e=this;return this.axios.get("/org/device/list?org_id="+t).then(function(t){if(0==t.data.ret.code)return t.data.list.length,t.data.list;e.$message.error("获取组织设备信息失败,"+t.data.ret.cn)})},getUserBYGroupId:function(t,e){var i=this;return this.axios.get("/org/user/list?org_id="+t+"&type="+e).then(function(t){if(0==t.data.ret.code)return t.data.list;i.$message.error("返回组织人员错误，"+t.data.ret.cn)})},get_current_user:function(){var t=JSON.parse(sessionStorage.getItem("userInfo"));return void 0!=t?t:null},getOnlineUserBYGroupId:function(t,e){var i=this;return this.axios.get("/video_conference/invite/list?org_id="+t+"&type="+e).then(function(e){if(0==e.data.ret.code)return e.data.list[t];i.$message.error("返回组织人员错误，"+e.data.ret.cn)})},getPushUrl:function(t){return console.log("-------------get push url-------------:",t),config.baseURL+"/media_server/push?opaque="+t+"&token="+ve("token")},getPlayUrl:function(t,e){return E.a.isUrl(t)?t+"&token="+ve("token"):config.baseURL+"/media_server/play?session_id="+e+"&token="+ve("token")},getOnlineStream:function(t,e){var i="",n=this;return t&&e&&(i="?sponsor_id="+t+"&sponsor_type="+e),this.axios.get("/media_server/online_stream"+i).then(function(t){if(console.log("resp:",t),0==t.data.code&&t.data.list.length>0){var e=t.data.list.length-1;return t.data.list[e].play_url=n.getPlayUrl(t.data.list[e].play_url,t.data.list[e].id),console.log("resp.data.list[0]['play_url']:",t.data.list[e].play_url),t.data.list}return null})},randomStr:function(){return Math.random().toString(36).slice(-8)}},template:"<App/>",components:{App:m},data:{yrtc_info:{status:"disconnect",screen_share_using_count:0,audio_listener_count:0}}})},0),f.default.prototype.axios=Vt.a.create({timeout:5e3}),f.default.prototype.loadDeviceList=(he=d()(l.a.mark(function t(e,i,n){var s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this,s=null,void 0==e||void 0==i){t.next=8;break}return t.next=5,f.default.prototype.axios.get("/device/list/"+e+"/"+i).catch(function(t){console.log("exception when get device list "+t)});case 5:s=t.sent,t.next=11;break;case 8:return t.next=10,f.default.prototype.axios.get("/device/list").catch(function(t){console.log("exception when get device list "+t)});case 10:s=t.sent;case 11:if(!s){t.next=15;break}if(!s.data.ret||0!=s.data.ret.code){t.next=15;break}return f.default.prototype.deviceList=s.data.list,t.abrupt("return",n?s.data:s.data.list);case 15:case"end":return t.stop()}},t,this)})),function(t,e,i){return he.apply(this,arguments)}),f.default.prototype.getTouchOffset=function(t){var e=t.target.getBoundingClientRect();t.offsetX=t.targetTouches[0].pageX-e.left,t.offsetY=t.targetTouches[0].pageY-e.top},f.default.prototype.assignedDeviceSN=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}("device_sn",window.location.href);var pe=void 0;function ve(t){var e=void 0;try{e=JSON.parse(sessionStorage.userInfo)}catch(t){return null}return e[t]}f.default.prototype.getSessionItem=ve,f.default.prototype.axios.interceptors.request.use(function(t){var e=ve("token");return e&&(t.headers.Authorization="Bearer "+e),console.log("config.url:",t.url),t},function(t){return a.a.reject(error)}),f.default.prototype.axios.interceptors.response.use(function(t){return console.log("--------response-----:",t),t},function(t){if(t.response)switch(t.response.status){case 401:return sessionStorage.removeItem("user_info"),jt.replace({path:"/login"}),pe.$message.warning({message:"登录信息失效，请重新登录"}),pe.logout(),a.a.reject(t.response.data);case 500:pe.$message.warning({message:"服务器内部错误",type:"warning"})}else pe.$message.error("网络连接错误，请过会重试");return a.a.resolve(t.response)})},NoOD:function(t,e){},PUuf:function(t,e,i){"use strict";var n=i("dyOy");e.a={setCookie:function(t,e){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=t+"="+escape(e)+";expires="+i.toGMTString()},isUrl:function(t){return new RegExp("^((https|http)?://)").test(t)},getEqUrl:function(t){return this.isUrl(config.baseURL)?config.baseURL:t+config.baseURL},checkIP:function(t){if(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t))return RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256},getWhiteList:function(t){console.log("host:",t);var e=location.hostname;if(console.log("ip test:",t),this.checkIP(e)){var i=e.split(".");if(192==i[0]||127==i[0]||10==i[0])return!0;for(var n=0;n<config.whitelist.length;n++)if(config.whitelist[n]==i[0])return!0;return!1}return console.log("非正常 IP "),!1},getSocketPath:function(){var t=this.getPath();return t&&(t+="socket.io"),t},getPath:function(){config.baseURL;var t="";if(this.isUrl(config.baseURL)){var e=new n(config.baseURL);e.pathname&&(t=e.pathname)}else t=config.baseURL;return t},menusList:function(t,e){for(var i=0;i<e.length;i++){if(e[i].path==t)return{ppath:t,cpath:t,children:e[i].children};if(e[i].children)for(var n=0;n<e[i].children.length;n++)if(console.log("---------------------:",e[i].children,t),e[i].children[n].path==t)return{ppath:e[i].path,cpath:t,children:e[i].children}}}}},Tqzy:function(t,e){},VseV:function(t,e){},WVBq:function(t,e){},YkxT:function(t,e){},a0pE:function(t,e){},fc1b:function(t,e){},gmxA:function(t,e){},iI6r:function(t,e){},jh3X:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEBAPEg8WFhUWFRAYFRYWFhUVFxYYFRUWFhcVGBUYHSggGBolGxcXITElJSorLi4uFyAzODMtNygtLisBCgoKDg0OGhAQGy0lHiUtLS0tLy0tLi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLSstLS0tLS0tLf/AABEIAOEA4QMBEQACEQEDEQH/xAAcAAEAAgMBAQEAAAAAAAAAAAAAAQIFBgcEAwj/xABEEAACAQIBCAYFCgQGAwEAAAAAAQIDEQQFBgchMUFRcRITIlJhgUKRocHRIzJTYnKCkpOisRRjsvAkM0NzwuE0g7MX/8QAGgEBAAIDAQAAAAAAAAAAAAAAAAEFAgMEBv/EADQRAQACAQICBwYGAgMBAAAAAAABAgMEEQUhEjFBUWGR0RMycYGx4RQiQqHB8BVSIzPxNP/aAAwDAQACEQMRAD8A7YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeXHZSoUddWtCHhKSTfJbWbMeK+T3ImWrJmx4/ftEMDi8/MFD5vWVPswsvXNo7KcNzW69o+fo478Twx1bz8vXZjK2kbuYT8VS3sUX+5vrwrvv+zntxb/WnnLyy0iV92Hprm5v4Gz/FU/2lr/y2T/WER0iYjfh6frmveP8AFU/2k/y2T/WHpo6Rn6eE/DU9zj7zC3Cu6/7fdnXi0/qp+/2ZLC5/YOXz41KfOKkv0tv2Gi/DM0dW0/3xdFOKYZ96Jj++DO4DLGGrf5VeEnwTtL8L1+w48mDJj96sw7MeoxZPdtEveam5AAAAAAAAAAAAAAAEKQEgAAADW8tZ6YaheMH101ug+yn4z2eq53YOH5cnOeUePor8/EcWPlX80+HV5tKypnhjK10qnVx7tPs+ufzvai1xaHDj7N58fRVZdfmydu0eHqwDd229be1vW3zZ2eDi8UAEwlIQAAAEAZrJmdOMoWUazlHuVO2vW9a8mcuXR4cnXG0+HJ1YtZmxdU7x3TzbnkbPrD1bRrLqZcW703970fNW8SrzcNyU505x+61wcTx35ZPyz+za4zTSkmmnrTWtPlxK6Y25SsonfnBGQSkAAAAAAAAAANAVk/ACFIC4GPy1lqhhYdOrLW79GC1ylyXveo3YNPfNbasNGfUUw13t5dsuaZfzqxGKvG/V0vo4vavry9Lls8C+0+ix4efXPf6KDU63Jm5dVe71YE63GkABAEMJEwLBAAAAAAGVyHnBiMK/k5XhfXTldwfG3dfivO5z59LjzR+aOfe6dPqsmCfyzy7ux0nIOcdDFrsdmol2qcvnL6y7y8V52KHUaW+GefV3r/TavHnjlynuZiMjmdSwAAAAAAAAAAArYDXc6M6IYRdCKUqzWqO6KfpT+G18jt0mjtmneeVf71OHV6yuGNo52+nxcxxuLqVpyq1JuUntb/ZLcvBHoKUrSvRrG0PPXva9ulad5fEyYAAAAAgBYJQmQLEoAAAAAAtSqyhJTjJxkndNOzT8GRasWjaepMTNZ3jrdIzSztVe1CtaNX0ZbFU5cJ+G/dwVFrNDOP8APT3fp9l9otfGT8l/e+v3bXGRXLNcAAAAAAAAAA17O7OSOEh0IWdaa7K2qK78vct75M7dHpJzW3n3Y/uzh1usjBXavvT+3i5VWqSnKU5ScpSbbb1tt7WehrWKxtHU85NptO89apKAAAAAAAACLBKQgAAAAAAAT3gdKzJzn69LD1pfKpdmT/1Ev+a9u3iUWu0fs/z0936fZf6DW+0/47+99fu24rVmAAAAAAAAY/L2VoYWhKtLW9kI96T2R978Ezdp8Fs14rHzaNRnrhpNp+XjLjuNxc61SdWpK8pO7f7JcElqR6elK0rFa9UPL3va9ptbrl8TJgAAAAAAAAAAAAAAAAAAABanUlGSlFtSTTTWpprWmiJiJjaUxMxO8Ot5p5dWLo3dlVhZVEuO6aXB29d1uPN6vTTgvt2T1PS6PVRnpz96Ov1Zs5XYAAAAAAA5Jnjlv+KxD6L+Sp3jT4PvT837Ej0mi0/scfPrnr9HmdbqPbZOXVHV6sEdbjAAAAAAAAAAAAAAAAAAAAAAMjm/laWFrwrK7Wyce9B7Vz3rxSNGowRmxzWfl8W/T55w5IvHz+DslGrGcYzi7xkk4tbGmrpnmLRNZ2nrepraLREx1SuQyAAAABrWfuVuowzpxdp1rwXFR9OXqaX3ju4fg9pl3nqjn6K/iOf2eLox1zy+Xa5WehedSAAAAAAAAAhge7CZHxVVXp4epJbmoOz5Sepmq+oxU960N1NPlv7tZ8l8RkLFwV5YWqlx6Da83G9iK6nDbqtCbabNWN5pP9+DHG5oSAAAAAAAAAAdE0bZW6dOeFk9dPtQ8YN615Sf6kUnE8HRtGSO3r+K84Xn3rOKezq+DdCrWwAAAAOTZ8ZR67GVEn2afycfu/Pf4rryR6PQYvZ4Y755+jzWvy+0zT3Ry9f3a+djiSAAAAAAAB9sFhKlapClTj0pydkve+CS1t+BhkyVx1m1upnjx2yWitY5y6lm5mhQw6jOaVWrt6TV4xfCEXs57eWwoNTrcmWdo5V7vV6HTaDHi5zzt3+jZTidwBhMvZsYfFJuUehU3VIq0vvd5c/Kx06fV5MM8p3jucmo0ePNHONp73Kcr5Lq4arKjVWta01slF7JRfA9DhzVy06VXns2G2G/Qt/68ZtaQABAACQAADIZv5R/h8TSrX1KSU/sS1S9jv5I06jF7XFNf7u36fL7LLW/n8HaDyz1YAAAeXKuM6mhWrdyEpLxaWpebsbMVPaXrXvlqzZPZ47X7ocRk29bd29r4vez1fweS+KoSlMCQgAAAAFKtRRTlJ2SItaKxvLKtZtO0Oh6K8m/ISx0laVVyjTv6NOMrN85STb8IxKDX6icl+j2Q9BoNPGOnS7Zb1axwLBZMCQAGtZ+ZJVfCyqJfKUU5xe+y+fHzSvzijt0GeceWI7J5ejh4hgjJime2Ocfy5MeiebSAAhhKAJTAkIAIA7DmfjeuwVCTetR6EucH0b+aSfmea1mPoZrR8/N6fRZPaYKz8vJmDldYAA1fSNiehguh9JUpx8leb/pXrLDhtOlm37on0V3E79HDt3zHr/Dl5fvPIaCUWIE3JEhAAApUqKKcm7JETMRG8soiZnaGBx+LdR8Eti978ThyXm8u7HjikP0TmpRUMBg4LYsPQ/+cbv1lFkne8z4r/HG1IjwZOUDBmrYCykBYCs4ppp7Gmn5jqRMbuCONm1wuvUevid43ePmNp2AgAAVaCRECbkiQgA6DovxN6eIo92UJr766L/oXrKXitPzVt8v75rvhN/y2p8/P/xu5VLcAAaJpSrf+LT/AN2T8ugl+7LfhVfft8FNxa3uV+MtCLhTAEARYJWCACtSaim27JETMRG8piJmdoYTGYlzfBLYve/E48l5tLux44pDytGpsfoPR/j1WybhJJ640405fapdh359FPzKfPXo5Jhc4LdLHEthNTciwFFAD6AeXKmMVGjVrPZCEpc2lqXm9RnjpN7xWO1ry3ilJtPZDhaPWPIpAAAAEWCUJAWCADbdGda2KqQ71JvzjONv3ZW8Urviie6Vnwq22aY74+jpZRL8AAc60ny+Xw64U5P1z/6LvhXuW+Ki4t/2V+DTC0VQAAAAKzmkm29REztG8piJmdoYjF13N+G5e/mct7zaXZSkVh5mjU2qtEDc9GWdUcHWlQrStQqtdp7KdTYpPhFqyb3WT2JnJqcPTjpR1w69Lmik9GeqXbUysWqQAADnOkPOGNR/wdKV4xadWS2OS2QXGz1vxSW5l1w7SzX/AJbfL1UfEtVFv+Kvz9GkFqqQAAAAAAAABsej2VsfDxhVX6b+44eI/wDRPxh38N/+iPhLqp556MAAc50nr/EUH/Kfsm/iXfCvct8VFxb/ALK/BppaKoAAAKzkkrsTOyYjflDGYms5Pw3I5r2mzqpWKvO0a2xVohKkjFkyGPzfxdGhTxNXDyjTnsk1s4dJbYX3Xtc1Vy0tboxPNstivWvSmOTM5q5/YrBKNKS66itkJO0oLhCeuy8GmuFjVl01b845S3YtVanKecOgYLShk2avOVSk+E6cpe2n0lY47aTJHVzdtdXjlfF6TslwTcas6j7sKU0351FFe0iNLknsTOqxx2tZytn7icTFxpQ6ik/G9Wa4uS1QXgtfjbbZaXQVj89+ar1fELT+SnLxYjJuSMRXU3RpOagryta32VfbLwWssMufHi26c7bq/FgyZd+hG+zxNNNpqzV009TTW1NG1qAgAAAAAAAA2PR8v8fT8IVX+m3vOHiP/RPxh38N/wDoj4S6qeeejAAGhaUqWvCz/wB6P9DXvLjhVvfj4fypeLV50t8f4aIW6nAAFZSSV2JnZMRu8Feq5Pw3I0Wtu6K16L4NGtmq0QlSSIS6bo4zJVoY7Ewu3aVGm1qS2qrJb3vS3bdtrVmq1P6KfNZ6XTfrv8nSqtKMouEoqUWmmmk009qae1HBHJYbbtBy9osw1VueGqOhJ+g106fkr9KPraW5HZj1lo5W5uTJo6zzryafi9GGUovsxpVPs1LeyaR0Rq8c97mnSZI7n0yXozx7l0qlOEbbFKpFrm+hczpqsEc7bz8mF9JnmNq7ebdMlaO4JqWIrOf1IXjHk5fOa5WMcvFLTyxxt4z/AH1Ti4VWOeSd/COX3+jc8LhoU4KnTgoxWyMVZIrLWm072neVrWlaRtWNoavnpmqq8ZYijG1ZK7S1daluf1+D37Hut3aLWTinoX936fZX67RRkjp0976/dzAv3nwAAAAAAADbNGtK+LnLu0Z+uUoJe8ruJ22wxHj6rLhdd80z3R6OmFC9AAANU0k4bpYOM/o6kG+Uk4fu0WPDL7Ztu+PureKU3wxbun7OZF88+AQ3bWEvHWm3yNVp3bqxs+LRgzVaISo0YpbHmBkBYvFpTjelSSnU4S19iD5tPyizl1WX2dOXXLr0mL2l+fVDuRSrsAAAAAAAA5hpFyKqNZYiCtCq30uCqLW/xLXzUi94bn6dPZz1x9PsoOJafoX6cdU/X7tRLJWAAAAAAAN+0XYbs4mtxdOC+6nJ/wBUSn4rfnWvxlc8Jpyvb4R/P8t6KhcgADw5cwXXYavR3yhJR+0tcf1JG3Bk9nkrbulp1GP2mK1O+HFLnqnk0dIbp2fCpK5hM7tlY2fNowZKNEJUaIZKtEJdj0X5NVLAxqNdqtKU39lPowXKyv8AeZSa2/Sy7d3Jd6GnRxRPfzbecjsQ2BEZAWAAAAADD524Dr8HXha8lFzj9qHaVudreZ0aTL7PNW395ubWYvaYbV8vjDjKPTvLABMJSEAAAB1vMjB9VgaN1rneo/v64/p6J5vXZOnnt4cvJ6XQY+hgr48/NnTkdoAAkDj2eGTuoxlWKVoyfWQ5T1teUukvI9Lo8vtMMT2xy8nl9Zi9nmtHZPOPmwM2dEtEQ+ZiyQ0EqtGKVGiEqT2MjZO79CZHw6p4ehSXoUqUfwxSPNZLdK0z4vTY69GkR4PYYs0NAVk/ACIyA+gAAAAhoDg+KpdCpUp92c4/hk17j1tLdKsT3xDx969G0x3TL5GTFDCRMCQhIHryRgXXr0qC9OST8I7ZPyima82SMeOb9zbhxTlyRTv/ALLtkYpJJKySSS4JbDykzvzesiNo2hISAAAGp6Rcldbh1Xiu1Ru3403bpeppPkmWPDs3QydCeqfqrOJ4Onj6cddfo5g0XqifNxMWSjIShoJVaMUvnKO4hLaVpCygkkp09X8tfE4vwGHx83bGvzeHkh6RMo9+n+WviR+Bw+Pmy/H5vDyQ9IuUe/T/AC18SPwOLx80/js3h5KvSNlHv0/y18SPwOLx80/jsvh5KvSPlLv0vy18SPwWLx80/jsvh5Kf/pOUu/S/LXxI/B4vFP43L4eQ9JeUu/S/LXxH4PF4n4zL4eSr0mZT79L8tfEj8Hj8U/jMvgq9JuU+/S/LXxI/CY/FP4zJ4PthNIuVakrKdK299UtXt2mVNDS87c2N9fekbzs8Neq5znOW2UpSfOTbftZcVrFYisdimtabTMz2qEsUARYJEyBYlDfdGmStVTFyW28KfK/bl60l5Mp+KZurFHxn+FzwrB15Z+Efy3sqFyAAAACJxTTTV00009jT2oRO3OETG/KXHc58jvC4iVL0H2qb4xb2X4rY/XvPT6XPGbHFu3teX1WCcGSa9nZ8Psw7RvaFGiGSrRAo0QyVaMUqNEJUaIZbqtEJUaMUqtEJUaMWSrQSo0Ysn0w2Gc3ZbN74f9mVKTaWF7xWGao0lFKMVq/vWdtaxWNocVrTad5fQliAAAEBL2ZJyfPEVoUIbZPW+7FfOk+S9yNebLGKk3nsbMOKct4pXtdnwWFhSpwpQVowiopeC955a95vabT1y9VjpFKxWvVD7GLMAAAAADEZ0ZEji6DhqVSN5U5cJcH9V7H5PcdOl1E4L79na5dXpoz027Y6nIK9GUJShKLjKLakntTW1HpYmLRvHU8zMTWdp63yaAo0QlVohKjRDJVoxSo0QlRohkq0QlRoxSq0QlRohkvh8O5uy2b3wJrSbSxteKwy9KmoropajrrWIjaHJa02neVyWIAAAAAHVMys3/4al1lRfLVEul9SO1Q57348jz2u1Xtr7V92P38Xo9BpfY06Vven9vBshwu8AAAAAAAA1PPbNjr1/EUV8tFdqP0kV/yW7js4FjodZ7Oehf3fp9lZr9F7SPaU976/dzNrcXyhUaISo0QlVohKjRDJVoxSo0QlRohlCrRCVGjFK1Gg5O3rZNadKUWvFYZOnTUVZHTEREbQ5pmZneVyWIAAAAIA37MbNdro4uvHXtpQe7hUkuPBefAp9frN98VPnP8AHqueH6Lqy5PlH8+jeyoXIAAAAAAAAAAalnfmiq969BJVfSjsVT4T8d+/iWWj13s/yX936fZWa3Qe0/Pj976/dzWrTlGTjKLjJOzTVmmtzT2F5ExMbwopiYnaXzaAo0QlVohKjRDJVoxSo0QlRohkmlRcnb1sVrui1uiyEIJKyN8Rt1OeZmZ3lYlAAAAAAG/ZoZnWccRio69ThSe7hKa4/V9fAp9Zr996YvnPp6rnRcP6smWPhHr6N6KhcgAAAAAAAAAmAAAYTOLNqji1d9iql2aiWvlJekvbwZ1abV3wTtHOO5x6rR0zxv1W7/VzPLWQ6+Fl0asNTfZmtcJcnufg7MvsOox5o3rPy7VDn0+TDO14+fYxbRuaVGiEqtEJUaIZKNGKUwpNsRXcm2z1wikrI3RGzTM7rBAAAAAPXkzJlbET6ujTcnveyMfGUtiNeXNTFG952bcWG+W3RpG7pObOaVLDWqTaqVe9bsw+wuPi9fIotVrr5vy15V+vxX2l0FMP5rc7fT4NkOF3gAAAAAAAAAwK2sBKkBIAClalGcXCcVKLVnGSTTXBpk1tNZ3jrRasWjaY3hp2Wswac7zw0+rfcldwfJ7Y+0s8PE7V5ZI38e1VZ+F1nninbw7GkZVyHicPfraMku+u1D8S1LzsWmLUY8vuz6qvLp8uL349GMaNrVupJEMkRhdkbEzs9EUlqRshrlYIAAAD15OyXXru1GjKfil2Vzm9S9ZryZseP352bcWHJln8kb/3vblkbR+tUsVUv/Lpt2+9Pb6rcyrzcU7MUfOfRaYOFduWflHq3TC4WnSgqdOEYRW6Kt/b8WVV72vPStO8ramOtI6NY2h9Vq/v+9ZizWTAAAAAAAAAAAEOIFbAW6QEgAAADDZQzVwVa7lh4pv0oXpvn2dT80dOPWZqdVvPm5cmiw366+XJr+M0b03/AJWJlHwnFT9seiddeKW/VXy/suO/Cq/pt5/2GMraPMUvmVaUl4ucX6ui/wBzprxPF2xMOa3C83ZMT+zySzGxy9CD5VI+8zjiODvnyYf43Ud0eaY5k4/6OC/9kfcT/kcHfPkj/G6jujzeqjo/xb+dOlH70pP1KPvMLcTwx1RLOvC809cxH9+DJYXR1H/VxTfhCCj7ZN/saL8Vn9NfOW+nCY/Vfyj13Z3A5oYGlZ9T03xqPp/pfZ9hx5Ndnv8Aq2+HJ249Bgp+nf482cjFJJJWS2JakvI5JnfrdcREdSQkAq4gQkBZSAkAAAAAAAAAAWAooAXAAAAAAAAWAooAXAAAAAAAAWArGIFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//9k="},krkj:function(t,e){},mof1:function(t,e){},"nKb+":function(t,e,i){"use strict";(function(t){var n=i("fZjL"),s=i.n(n),o=i("BO1k"),a=i.n(o);e.a={mounted:function(){var e=this;t("input").keydown(function(t){13==t.keyCode&&e.login_click()})},data:function(){return{loginForm:{user_name:"",password:""},loading:!1,checked:!0,loginRules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login_click:function(){var e=this;this.$refs.loginForm.validate(function(i){if(i){e.loading=!0;var n={},o=!0,r=!1,l=void 0;try{for(var c,d=a()(s()(e.loginForm));!(o=(c=d.next()).done);o=!0){var u=c.value;n[u]=t.trim(e.loginForm[u])}}catch(t){r=!0,l=t}finally{try{!o&&d.return&&d.return()}finally{if(r)throw l}}e.axios.post("/admin/login",n).then(function(t){e.$root.$emit("http_login_response",t.data),e.loading=!1}).catch(function(t){e.loading=!1,console.error(t)})}})}}}}).call(e,i("7t+N"))},r2fw:function(t,e){},rHYO:function(t,e){},sAjk:function(t,e){},wrM5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),o=i("7+uW"),a="",r={props:["element","onlineUser"],mounted:function(){var t=this;console.log("---------------------:");var e=this.find_online_user(this.element.device_name);console.log("onlineUser session_id:",e,this.element.device_name),e&&e.session_id&&this.getStatus(e.session_id),a=setInterval(function(){console.log("计算动画"),t.opacity?t.opacity=0:t.opacity=1},1e3)},watch:{"element.isCamera":function(t,e){console.log("old_v:",e)},"record.status":function(t,e){}},data:function(){return{record:{status:!1},opacity:1}},destroyed:function(){console.log("destroyed:"),clearInterval(a)},sockets:{stream_recording:function(t){console.log("-------------stream_recording--------:"),console.log("stream_recording:",t);var e=this.findSessinId(this.element.device_name);e&&e==t.session_id&&(this.record=t)}},methods:{find_online_user:function(t,e){if(""!=t){for(var i in this.onlineUser)if(console.log("device_sn:",t,this.onlineUser[i],this.onlineUser[i].device_sn),this.onlineUser[i].device_sn==t)return this.onlineUser[i]}else for(var n in this.onlineUser)if(this.onlineUser[n].connection_id===e)return this.onlineUser[n];return!1},findSessinId:function(){return this.find_online_user(this.element.device_name).session_id},getStatus:function(t){var e=this;this.axios.get("/recording/status/"+t).then(function(i){console.log("get status:",i);var n=i.data;console.log("data.ret:",n),0==n.ret.code&&i?e.record={status:n.status,session_id:t}:console.log("获取状态失败......")})},stop:function(t){this.axios.put("/recording/stop/"+t).then(function(t){console.log("/recording/stop",t)})},start:function(t){this.axios.put("/recording/start/"+t).then(function(t){console.log("/recording/start",t)})},startRecord:function(){console.log("start record:",this.element,this.onlineUser);var t=this.find_online_user(this.element.device_name);console.log("onlineUser:",t,this.element.device_name),t&&(console.log("online session_user:",this.record),this.record.status?this.stop(t.session_id):this.start(t.session_id))}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"record"},[t.record.status?t._e():i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.startRecord}},[i("div",{staticClass:"playBnt",staticStyle:{background:"#fff"}})]),t._v(" "),t.record.status?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.startRecord}},[i("div",{staticClass:"playBnt",style:{opacity:t.opacity}})]):t._e()],1)},staticRenderFns:[]};var c={},d={components:{soundRecord:i("VU/8")(r,l,!1,function(t){i("0t6b")},"data-v-e83b606a",null).exports},data:function(){return{list:[],current_list:[],online_user:[],currentGroup:{},activeOnLine:!0,loading:!1,loadingItem:!1,defaultProps:{children:"children",label:"name"},filterText:"",player:null,isHostCamera:!1,isHostVoice:!1,user:null,session_id:null}},mounted:function(){this.loadTreeList(),this.user=this.$root.get_current_user()},methods:{setUserIndex:function(){for(var t=[],e=[],i=0;i<this.list.length;i++){var n=this.list[i];n.is_online?t.push(n):e.push(n)}this.activeOnLine?this.current_list=t:this.current_list=t.concat(e)},setOnLine:function(t){this.activeOnLine=t,this.setUserIndex()},loadTreeList:function(){var t=this;return this.axios.get("/org/device/list?org_id=1").then(function(e){if(0==e.data.ret.code)return t.list=t.traverseTree(e.data.list),t.$socket.emit("online_list"),void t.getDroneList()})},getDroneList:function(){var t=this;this.axios.get("/encoder_device/list/0/1000?org_id=1").then(function(e){if(console.log("list ==>",e),0==e.data.ret.code){var i=t.traverseTree(e.data.list);for(var n in i)i[n].loading=!1,t.list.push(i[n]);t.updateOnlineDevice(i)}})},updateOnlineDevice:function(t){var e=this;this.axios.get("/media_server/online_stream").then(function(i){if(0==i.data.code&&i.data.list.length>0){var n=i.data.list;for(var s in n)if("encode_device"==n[s].sponsor_type)for(var o in t)t[o].id==n[s].sponsor_id&&e.online(t[o].name)}})},traverseTree:function(t){for(var e=0;e<t.length;e+=1)t[e].serial_number?(t[e].is_stream=!1,t[e].isCamera=!1,t[e].loading=!1,t[e].isVoice=!1):(t[e].serial_number=t[e].name,t[e].type="drone"),t[e].children instanceof Array&&t[e].children.length>0&&this.traverseTree(t[e].children);return t},find_online_user:function(t,e){if(""!=t){for(var i in this.online_user)if(this.online_user[i].device_sn===t)return i}else for(var n in this.online_user)if(this.online_user[n].connection_id===e)return this.online_user[n].device_sn;return!1},openVideo:function(t,e){var i=this;if(console.log("openVideo ==>",t,e),e.is_online){var n=this.$parent,o=this.find_online_user(e.serial_number);o&&this.$root.getOnlineStream(e.id,"device").then(function(t){if(null!=t){console.log("online_stream ==>",t);var a=i.online_user[o];console.log("paly_url:",t);var r=s()({},a,{session_id:t[t.length-1].id,play_url:t[t.length-1].play_url,isCamera:e.isCamera,isVoice:e.isVoice});n.UpdateVideoItems(r)}else i.$message.warning("请打开设备回传")})}else this.$message.warning("该设备未在线")},openDroneVideo:function(t,e){if(e.is_online){var i=this.$parent;this.$root.getOnlineStream(e.id,"encode_device").then(function(t){if(null!=t){console.log("online_stream ==>",t);var n=s()({},e,{session_id:t[t.length-1].id,play_url:t[t.length-1].play_url});i.UpdateVideoItems(n)}})}else this.$message.warning("该设备未在线")},startPublish:function(t){console.log(t);var e=this.find_online_user(t.serial_number);this.$socket.emit("a2c",this.online_user[e].connection_id,"start_publish",{width:1920,height:1080,bitrate:15e5}),console.log("start_publish ==>",this.online_user[e].connection_id)},stopPublish:function(t){var e=this.find_online_user(t.serial_number);this.$socket.emit("a2c",this.online_user[e].connection_id,"stop_publish"),console.log("stop_publish ==>",this.online_user[e])},online:function(t){for(var e=0;e<this.list.length;e++)this.list[e].serial_number==t&&(this.list[e].is_online=!0);this.setUserIndex()},offline:function(t){for(var e=0;e<this.current_list.length;e++)if(this.current_list[e].serial_number==t){var i=this.current_list[e];i.is_online=!1,i.is_stream=!1}this.setUserIndex()},streamStatus:function(t,e){for(var i=0;i<this.current_list.length;i++)if(this.current_list[i].serial_number==t){var n=this.current_list[i];delete c[t];try{e?(n.isCamera=!0,n.isVoice=!0,n.is_stream=!0):(n.isCamera=!1,n.isVoice=!1,n.is_stream=!1)}catch(t){}}},updateKeyChildren:function(t,e){console.log("updateKeyChildren ==>",t,e)},filterNode:function(t,e){return console.log("查询",t,e),!t||(e.name?-1!==e.name.indexOf(t):null)},handleNodeClick:function(t,e){console.log("handleNodeClick",t,e)},stopLoading:function(t){var e=this;setTimeout(function(){t.loading=!1,c[t.serial_number]&&e.$message("设置异常")},5e3)},handleCamera:function(t,e){console.log("handleCamera:",e),c[e.serial_number]=e,e.loading=!0,t&&(this.loadingItem=!0,this.startPublish(e),this.stopLoading(e)),e.isCamera||(this.loadingItem=!0,this.stopPublish(e),this.stopLoading(e))},handleVoice:function(t,e){e.isCamera||(this.loadingItem=!0,this.stopPublish(e),this.stopLoading(e))},handleHostCamera:function(){if(this.isHostCamera){var t=this.$root.getPushUrl("{t:'c_av'}");t&&(console.log("共享摄像头:",t),this.loading=!0,this.start_play(t))}this.isHostCamera||this.isHostVoice||this.stop()},handleHostVoice:function(){this.isHostCamera||this.isHostVoice||this.stop()},start_play:function(t){var e=this;this.player=new ZLMRTCClient.Endpoint({element:null,debug:!0,zlmsdpUrl:t,simulcast:!1,useCamera:!0,audioEnable:!0,videoEnable:!0,recvOnly:!1,resolution:{w:1280,h:720}});var i=this.player;console.log(this.player),i.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR,function(t){console.log("ICE 协商出错")}),i.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS,function(t){console.log("播放成功",t.streams)}),i.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANSWER_EXCHANGE_FAILED,function(t){console.log("offer answer 交换失败",t),stop()}),i.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM,function(t){console.log("获取本地流成功"),e.$refs.video.srcObject=t,setTimeout(function(){e.loading=!1},2e3)}),i.on(ZLMRTCClient.Events.CAPTURE_STREAM_FAILED,function(t){e.$message("获取本地流失败!"),console.log("获取本地流失败")})},stop:function(){this.player&&(this.player.close(),this.player=null)},pushHostVideo:function(t,e){var i={session_id:e,source_type:"admin_camera"};e&&(console.log("本地推流1:",i),this.$socket.emit("a2c",t,"start_listen_feed",i))},stopHostVideo:function(t,e){var i={session_id:e};this.$socket.emit("a2c",t,"stop_listen_feed",i)}},sockets:{stream_recording:function(t){console.log("stream_recording devicelist...................",t)},device_login:function(t){console.log("device_login ==>",t),this.online(t.device_sn),this.isHostCamera&&this.pushHostVideo(t.connection_id,this.session_id);var e=this.find_online_user(t.device_sn);e?this.online_user.splice(e,1,t):this.online_user.push(t)},online_list:function(t){var e=this;for(var i in console.log("online_list ==>",t),t){var n=this.find_online_user(t[i].device_sn);n?this.online_user.splice(n,1,t[i]):this.online_user.push(t[i])}this.$root.getOnlineStream().then(function(i){if(console.log("online_list ---返回stream ==>",i),null!=i){var n=function(n){if("device"==i[n].sponsor_type){var s=function(s){i[n].sponsor_id==t[s].device_id&&setTimeout(function(){console.log("resp[i]:",i[n]),t[s].session_id=i[n].id,e.streamStatus(t[s].device_sn,!0,t[s])},0)};for(var o in t)s(o)}};for(var s in i)n(s)}e.setUserIndex()})},offline:function(t){console.log("offline ==>",t);var e=this.online_user;for(var i in e)if(e[i].connection_id==t){this.offline(e[i].device_sn);try{this.online_user.splice(i,1),this.stopHostVideo(this.online_user[i].connection_id,this.session_id)}catch(t){}}},stream_start:function(t){if(console.log("stream_start ==>",t,t.opaque),"web"==t.sponsor_type&&t.sponsor_id==this.user.id&&"{t:'c_av'}"==t.opaque)for(var e in this.session_id=t.session_id,this.online_user)this.pushHostVideo(this.online_user[e].connection_id,t.session_id);if("rtmp"==t.schema)for(var i in this.list)"drone"==this.list[i].type&&t.sponsor_id==this.list[i].id&&this.online(this.list[i].serial_number);if("device"==t.sponsor_type){var n=this.online_user;for(var s in n)n[s].device_id==t.sponsor_id&&(console.log("---------------------------------------:",n[s]),n[s].session_id=t.session_id,this.streamStatus(n[s].device_sn,!0))}},stream_stop:function(t){if(console.log("stream_stop:",t),"web"==t.sponsor_type&&t.sponsor_id==this.user.id&&"{t:'c_av'}"==t.opaque)for(var e in this.session_id=t.session_id,this.online_user)this.stopHostVideo(this.online_user[e].connection_id,t.session_id);if("rtmp"==t.schema)for(var i in this.list)"drone"==this.list[i].type&&t.sponsor_id==this.list[i].id&&this.offline(this.list[i].serial_number);if("device"==t.sponsor_type){var n=this.online_user;for(var s in n)n[s].device_id==t.sponsor_id&&this.streamStatus(n[s].device_sn,!1)}}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"staffsList"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.4)"}}),t._v(" "),i("h4",{staticClass:"localText"},[t._v("本机设备")]),t._v(" "),i("span",[t._v("摄像头")]),t._v(" "),i("el-checkbox",{on:{change:function(e){return t.handleHostCamera()}},model:{value:t.isHostCamera,callback:function(e){t.isHostCamera=e},expression:"isHostCamera"}}),t._v(" "),i("span",[t._v("麦克风")]),t._v(" "),i("el-checkbox",{on:{change:function(e){return t.handleHostVoice()}},model:{value:t.isHostVoice,callback:function(e){t.isHostVoice=e},expression:"isHostVoice"}}),t._v(" "),i("div",[i("video",{ref:"video",attrs:{autoplay:"",muted:"",width:"100%",height:"100%"},domProps:{muted:!0}})]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"treeController"},[i("el-button",{staticClass:"item",class:{selectActive:t.activeOnLine},attrs:{type:"text"},on:{click:function(e){return t.setOnLine(!0)}}},[t._v("在线设备")]),t._v(" "),i("el-button",{staticClass:"item",class:{selectActive:!t.activeOnLine},attrs:{type:"text"},on:{click:function(e){return t.setOnLine(!1)}}},[t._v("所有设备")])],1),t._v(" "),i("div",{staticClass:"treeCss"},[i("ul",t._l(t.current_list,function(e,n){return i("li",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"data.loading"}],key:n,attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.4)"}},[i("div",{staticClass:"custom-tree-node",staticStyle:{"margin-left":"10px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"loading-start"}),t._v(" "),t.activeOnLine&&!e.is_online||"drone"==e.type?t._e():i("div",[i("span",[i("span",{class:{online:e.is_online},staticStyle:{display:"inline-block",width:"130px"},on:{click:function(i){return t.openVideo(null,e)}}},[t._v(t._s(e.device_name?e.device_name:e.serial_number))]),t._v(" "),i("el-checkbox",{attrs:{disabled:!e.is_online},on:{change:function(i){return t.handleCamera(e.isCamera,e)}},model:{value:e.isCamera,callback:function(i){t.$set(e,"isCamera",i)},expression:"data.isCamera"}}),t._v(" "),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{disabled:!e.is_online},on:{change:function(i){return t.handleVoice(e.isVoice,e)}},model:{value:e.isVoice,callback:function(i){t.$set(e,"isVoice",i)},expression:"data.isVoice"}}),t._v(" "),e.isCamera?i("soundRecord",{attrs:{element:e,onlineUser:t.online_user}}):t._e()],1)]),t._v(" "),t.activeOnLine&&!e.is_online||"drone"!=e.type?t._e():i("div",[i("span",{class:{online:e.is_online},staticStyle:{display:"inline-block",width:"120px"},on:{click:function(i){return t.openDroneVideo(null,e)}}},[t._v("\n            "+t._s(e.encoder_name?e.encoder_name:e.name)+"\n          ")])])])])}),0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"des_box"},[e("span",{staticStyle:{"margin-right":"15px"}},[this._v("摄像头")])])}]};var h=i("VU/8")(d,u,!1,function(t){i("8Qyx")},null,null).exports,f={data:function(){return{checkList:[],isPush:!1,loading:!1,online_user:[]}},mounted:function(){},methods:{pushStream:function(){var t=this,e=this.$parent.centerVideo[0],i=this.checkList;if(this.loading=!0,i.length>0)if(null!=e){for(var n in this.$message.success("推送成功"),console.log(i),i){var s=this.find_online_user(i[n]);console.log("start_listen_feed ==>",this.online_user[s],e);var o="admin_camera";o="drone"!=e.type?"mobile":"push_stream";var a={session_id:e.session_id,source_type:o,media_type:e.isCamera&&e.isVoice?2:e.isCamera?0:e.isVoice?1:2};this.$socket.emit("a2c",this.online_user[s].connection_id,"start_listen_feed",a),console.log("start_listen_feed 1==>",this.online_user[s],a,e)}setTimeout(function(){t.loading=!1},1e3),this.isPush=!0}else this.loading=!1,this.$message.warning("请在主页面推送视频");else this.loading=!1,this.$message.warning("请选择设备")},stopStream:function(){var t=this.$parent.centerVideo[0],e=this.checkList;if(e.length>0)if(this.isPush){for(var i in e){var n=this.find_online_user(e[i]),s={session_id:t.session_id};this.$socket.emit("a2c",this.online_user[n].connection_id,"stop_listen_feed",s)}this.$message.success("推送停止"),this.isPush=!1}else this.$message.warning("未推送");else this.$message.warning("请选择设备")},find_online_user:function(t,e){if(""!=t){for(var i in this.online_user)if(this.online_user[i].device_sn===t)return i}else for(var n in this.online_user)if(this.online_user[n].connection_id===e)return this.online_user[n].device_sn;return!1},setSelectCheck:function(t){for(var e=t.device_name,i=0;i<this.checkList.length;i++)this.checkList[i]==e&&this.checkList.splice(i,1);this.checkList<=0&&(this.isPush=!1)}},sockets:{device_login:function(t){console.log("device_login ==>",t),console.log("select_list:",this.checkList);var e=this.find_online_user(t.device_sn);e?this.online_user.splice(e,1,t):this.online_user.push(t)},online_list:function(t){for(var e in console.log("online_list ==>",t),t){var i=this.find_online_user(t[e].device_sn);i?this.online_user.splice(i,1,t[e]):this.online_user.push(t[e])}},offline:function(t){console.log("offline ==>",t);var e=this.online_user;for(var i in e)e[i].connection_id==t&&(console.log("off line:",e[i]),this.setSelectCheck(e[i]),this.online_user.splice(i,1))}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"push_device_stream_box"},[i("div",[i("el-button",{attrs:{type:"primary",loading:t.loading,disabled:0==t.online_user.length&&t.isPush},on:{click:t.pushStream}},[t._v(t._s(t.isPush?"推送中":"推送"))]),t._v(" "),i("el-button",{attrs:{type:"primary",disabled:0==t.online_user.length},on:{click:t.stopStream}},[t._v("停止")])],1),t._v(" "),i("div",[i("h4",[t._v("推送选择")]),t._v(" "),i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.online_user,function(e,n){return i("el-checkbox",{key:n,attrs:{disabled:t.isPush,label:e.device_sn}},[t._v(t._s(e.device_name))])}),1)],1)])},staticRenderFns:[]};var v=i("VU/8")(f,p,!1,function(t){i("9H6k")},"data-v-9b6d7b60",null).exports,m=i("ifoU"),g=(new(i.n(m).a),{name:"LocalVideo",props:["item"],data:function(){return{status:"stop",isMute:!1,recording:!1,bitrate:128,isConnectVoice:!1,user:null,session_id:null,isOpenVoice:!1}},mounted:function(){this.user=this.$root.get_current_user()},methods:{openVoice:function(){var t=this.$root.getPushUrl("{t:'c_aud'}");t&&this.pushVoiceStream(t)},pushVoiceStream:function(t){var e=this;this.isOpenVoice=!0,this.$parent.loading=!0,this.player=new ZLMRTCClient.Endpoint({element:null,debug:!0,zlmsdpUrl:t,simulcast:!1,useCamera:!1,audioEnable:!0,videoEnable:!1,recvOnly:!1,resolution:{w:1280,h:720}});var i=this.player;i.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR,function(t){e.$parent.loading=!1,console.log("ICE 协商出错")}),i.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS,function(t){e.$parent.loading=!1,console.log("播放成功",t.streams)}),i.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANSWER_EXCHANGE_FAILED,function(t){setTimeout(function(){e.$parent.loading=!1},1e3),console.log("offer answer 交换失败",t),stop()}),i.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM,function(t){e.$parent.loading=!1,console.log("获取本地流成功")}),i.on(ZLMRTCClient.Events.CAPTURE_STREAM_FAILED,function(t){setTimeout(function(){e.$parent.loading=!1},1e3),console.log("获取本地流失败")})},closeVoice:function(){this.isOpenVoice=!1,this.$parent.loading=!0,this.player&&(this.player.close(),this.player=null),this.isConnectVoice=!1,this.disconnectAudio()},startPublishOrConnect:function(){this.$root.yrtc_info.is_publishing?this.connectAudio():this.startPublish(),this.$parent.loading=!0},disconnectAudio:function(){console.log("stop_listen_feed ==>",this.item,this.session_id),this.$parent.loading=!1,this.$socket.emit("a2c",this.item.connection_id,"stop_listen_feed",{session_id:this.session_id})},connectAudio:function(){console.log("start_listen_feed ==>",this.item,this.session_id),this.$socket.emit("a2c",this.item.connection_id,"start_listen_feed",{session_id:this.session_id})}},sockets:{stream_stop:function(t){"web"==t.sponsor_type&&t.sponsor_id==this.user.id&&"audio"==t.media_type&&(this.isConnectVoice=!1,console.log("关闭麦克风"))},stream_start:function(t){console.log("stream_start ==>",t),"web"==t.sponsor_type&&t.sponsor_id==this.user.id&&"audio"==t.media_type&&this.isOpenVoice&&(console.log("打开麦克风"),this.isConnectVoice=!0,this.$parent.loading=!1,this.session_id=t.session_id,this.connectAudio())},listen_publish_status:function(t){try{var e=JSON.parse(t);e.publisher_id==this.$root.yrtc_info.my_id&&e.listener_id==this.my_id&&("up"==e.status?(this.status="connected",this.recvAudioHandleId=e.handle_id,this.$root.yrtc_info.audio_listener_count++):this.status="publishing",this.$parent.loading=!1)}catch(t){this.$log.error("cannot parse listen_publish_status",t)}}}}),_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"voice"},[this.isConnectVoice?e("i",{staticClass:"el-icon-microphone",staticStyle:{color:"red"},on:{click:this.closeVoice}}):e("i",{staticClass:"el-icon-microphone",on:{click:this.openVoice}})])},staticRenderFns:[]};var y={props:["item","index"],components:{AudioToPeer:i("VU/8")(g,_,!1,function(t){i("iI6r")},null,null).exports},data:function(){return{info:this.item,player:null,recvOnly:!0,resArr:[],isIcon:!1,isToolsIcon:!1,zlmsdpUrl:"",isConnectVoice:!1,user:null,loading:!1}},mounted:function(){this.user=this.$root.get_current_user(),console.log(this.item),this.start_play()},methods:{start_play:function(){this.player=new ZLMRTCClient.Endpoint({element:this.$refs.video,debug:!0,zlmsdpUrl:this.item.play_url,simulcast:!1,useCamera:!0,audioEnable:!this.item.isVoice||this.item.isVoice,videoEnable:!this.item.isCamera||this.item.isCamera,recvOnly:this.recvOnly,resolution:{w:1280,h:720}});var t=this.player;t.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR,function(t){console.log("ICE 协商出错")}),t.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS,function(t){console.log("播放成功",t.streams)}),t.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANSWER_EXCHANGE_FAILED,function(t){console.log("offer answer 交换失败",t),stop()}),t.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM,function(t){console.log("获取本地流成功")}),t.on(ZLMRTCClient.Events.CAPTURE_STREAM_FAILED,function(t){console.log("获取本地流失败")})},stop:function(){this.player&&(this.player.close(),this.player=null)},closeVideo:function(t){console.log("closeVideo ==>",this.item.id,t);var e=this.$parent,i=e.videoItems,n=e.centerVideo,s=this.$refs.AudioToPeer;this.stop(),e.centerIndex==this.index&&o.default.set(n,0,null),"center"==t?o.default.set(n,0,null):(s&&s.isConnectVoice&&"center"!=t&&s.closeVoice(),console.log("close bottom video:",this.index),o.default.set(i,this.index,null))},connectScreenshare:function(){var t={listen:"screenShare-"+this.my_id,publisher:"screenShare-"+this.$root.yrtc_info.screen_share_publisher_id,publisher_id:this.$root.yrtc_info.screen_share_publisher_id,listener_id:this.my_id,hasVideo:!0};console.log("本地推流2：",t),this.$socket.emit("a2c",this.connection_id,"start_listen_feed",t)},disconnectScreenshare:function(){this.$socket.emit("a2c",this.connection_id,"stop_listen_feed",{listen:this.displayName,publisher_id:this.$root.yrtc_info.screen_share_publisher_id,listener_id:this.my_id,handle_id:this.screenShareHandleId})},showIcon:function(){this.isIcon=!0,this.isToolsIcon=!0},hiddenIcon:function(){this.isIcon=!1,this.isToolsIcon=!1}},sockets:{stream_start:function(t){console.log("stream_start ==>",t)},stream_stop:function(t){console.log(t),"web"!=t.sponsor_type&&t.sponsor_id==this.item.device_id&&(this.item.center?this.closeVideo("center"):this.closeVideo("bottom"))}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"video_stream_box",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{mousemove:t.showIcon,mouseout:t.hiddenIcon}},[t.item.center?i("i",{directives:[{name:"show",rawName:"v-show",value:t.isIcon,expression:"isIcon"}],staticClass:"el-icon-error",attrs:{title:"关闭"},on:{click:function(e){return t.closeVideo("center")}}}):i("i",{directives:[{name:"show",rawName:"v-show",value:t.isIcon,expression:"isIcon"}],staticClass:"el-icon-error",attrs:{title:"关闭"},on:{click:function(e){return t.closeVideo("bottom")}}}),t._v(" "),i("div",{staticClass:"device_info_box"},[i("span",[t._v(t._s(t.item.device_name||t.item.encoder_name))])]),t._v(" "),t.item.center||"drone"==t.item.type?t._e():i("div",{directives:[{name:"show",rawName:"v-show",value:t.isToolsIcon,expression:"isToolsIcon"}],staticClass:"tools"},[i("div",[i("AudioToPeer",{ref:"AudioToPeer",attrs:{item:t.item}})],1)]),t._v(" "),i("div",{ref:"vBox",staticClass:"video_box"},[i("video",{ref:"video",attrs:{autoplay:"",width:"100%",height:"100%"}})])])},staticRenderFns:[]};var b=i("VU/8")(y,w,!1,function(t){i("57F2")},"data-v-25134c6e",null).exports,C={red:-65536,black:-16777216,blue:-16776961,cyan:-16711681,dkgray:-12303292,gray:-7829368,green:-16711936,ltgray:-3355444,magenta:-65281,transparent:0,white:-1,yellow:-256},A={props:["item","user","videoDom","vBox","centerCanvas"],data:function(){return{canvas:null,ctx:null,brushBtn:null,reSetCanvasBtn:null,aColorBtn:null,saveBtn:null,undoBtn:null,textBtn:null,rangeBtn:null,circleBtn:null,videoWidth:1080,videoHeight:1920,arrowsBtn:null,rectangleBtn:null,clear:!1,txt:!1,line:!0,arrows:!1,rectangle:!1,activeColor:"red",lWidth:4,historyDeta:[],Img:null,brush_color:[{name:"白色",code:"white"},{name:"黑色",code:"black"},{name:"红色",code:"red"},{name:"蓝色",code:"blue"},{name:"黄色",code:"yellow"},{name:"绿色",code:"green"},{name:"灰色",code:"gray"}],innerCanvasY:0,innerCanvasX:0,scaleX:1,scaleY:1,previousDrawTs:0,current:{color:"red",lineWidth:5},current_time:0,current_timer:null}},mounted:function(){var t=this;this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.brushBtn=this.$refs.brush,this.reSetCanvasBtn=this.$refs.clear,this.aColorBtn=this.$refs.color_item,this.saveBtn=this.$refs.save,this.undoBtn=this.$refs.undo,this.rangeBtn=this.$refs.range,this.textBtn=this.$refs.text,this.arrowsBtn=this.$refs.arrows,this.rectangleBtn=this.$refs.rectangle,this.circleBtn=this.$refs.circle,this.getColor(),setTimeout(function(){t.aColorBtn[2].classList.add("active"),t.ctx.fillStyle=t.activeColor,t.ctx.strokeStyle=t.activeColor},100),this.drawImage()},watch:{"centerCanvas.videoWidth":function(t,e){var i=this;setTimeout(function(){i.drawImage()},100)}},methods:{drawImage:function(){var t=this.videoDom;this.canvas.width=this.centerCanvas.videoWidth,this.canvas.height=this.centerCanvas.videoHeight,t.style.width=this.canvas.clientWidth+"px",t.style.height=this.canvas.clientHeight+"px";var e=this.vBox;if(e.style.width="80%",e.style.height="80%","StaticMark"==this.item.id){console.log("this.centerCanvas.videoWidth:",this.centerCanvas.videoWidth),this.ctx.drawImage(t,0,0,this.canvas.clientWidth,this.canvas.clientHeight,0,0,this.canvas.width,this.canvas.height);var i={background_image:this.canvas.toDataURL("image/jpeg"),width:this.centerCanvas.videoWidth,height:this.centerCanvas.videoHeight};this.$socket.emit("a2c",this.user.connection_id,"start_white_board",i),console.log("image start_white_board ==>",this.user.connection_id,i)}var n=this.centerCanvas.videoWidth/this.centerCanvas.videoHeight;n<this.canvas.clientWidth/this.canvas.clientHeight?(this.innerCanvasX=Math.abs((this.canvas.clientWidth-this.canvas.clientHeight*n)/2),this.innerCanvasY=0,this.scaleX=this.scaleY=this.centerCanvas.videoWidth/(this.canvas.clientWidth-2*this.innerCanvasX)):(this.innerCanvasX=0,this.innerCanvasY=Math.abs((this.canvas.clientHeight-this.canvas.clientWidth/n)/2),this.scaleX=this.scaleY=this.centerCanvas.videoHeight/(this.canvas.clientHeight-2*this.innerCanvasY)),this.listenToUser(this.canvas)},closeCanvas:function(){switch(this.item.id){case"DynamicMark":this.clearCanvas(),this.$socket.emit("a2c",this.user.connection_id,"stop_dynamic_mark"),console.log("DynamicMark stop_dynamic_mark ==>",this.user.connection_id);break;case"StaticMark":this.clearCanvas(),this.$socket.emit("a2c",this.user.connection_id,"stop_white_board"),console.log("StaticMark stop_white_board ==>",this.user.connection_id);break;case"Canvas":this.clearCanvas(),this.$socket.emit("a2c",this.user.connection_id,"stop_white_board"),console.log("Canvas stop_white_board ==>",this.user.connection_id)}var t=this.$parent,e=(this.videoDom,this.vBox);e.style.width="100%",e.style.height="90%",t.isCanvas=!1,t.CanvasDes={}},listenToUser:function(t){var e=!1,i=this.ctx,n=this,s={x:void 0,y:void 0},o={x:void 0,y:void 0},a="",r=[],l=t.width,c=t.height;t.onmousedown=function(o){"DynamicMark"==n.item.id&&(clearInterval(n.current_timer),n.current_timer=null,n.current_time=5);var a=i.getImageData(0,0,t.width,t.height);n.saveData(a),e=!0,n.current.x=(o.offsetX-n.innerCanvasX)*n.scaleX,n.current.y=(o.offsetY-n.innerCanvasY)*n.scaleY;var r=n.current.x,l=n.current.y;if(s={x:r,y:l},i.save(),1==n.txt){var c=n.$refs.tValue;c.style.display="block",c.style.left=o.offsetX+"px",c.style.top=o.offsetY+"px",setTimeout(function(){c.focus()},100),c.onkeyup=function(t){13==t.keyCode&&(n.fillText(c.value,s.x,s.y),c.value="",c.style.display="none")},e=!1}},t.onmousemove=function(t){if(e){n.current.x=(t.offsetX-n.innerCanvasX)*n.scaleX,n.current.y=(t.offsetY-n.innerCanvasY)*n.scaleY;var d=n.current.x,u=n.current.y;if(o={x:d,y:u},1==n.line)n.drawLine(s.x,s.y,o.x,o.y,n.activeColor,!0),s=o;else if(1==n.rectangle){var h=n.historyDeta;i.putImageData(h[h.length-1],0,0),n.drawRect(s.x,s.y,(t.offsetX-n.innerCanvasX)*n.scaleX-s.x,(t.offsetY-n.innerCanvasY)*n.scaleY-s.y),a="rect",r=[s.x/l,s.y/c,((t.offsetX-n.innerCanvasX)*n.scaleX-s.x)/l,((t.offsetY-n.innerCanvasY)*n.scaleY-s.y)/c]}else if(1==n.circle){var f=n.historyDeta;i.putImageData(f[f.length-1],0,0);var p=n.calculateRadius(s,o);n.drawcircle(s.x,s.y,p,0,2*Math.PI,!1),a="circle",r=[s.x/l,s.y/c,p/l,0,2*Math.PI,!1]}else if(1==n.arrows){var v=n.historyDeta;i.putImageData(v[v.length-1],0,0);var m=n.drawArrow(s.x,s.y,o.x,o.y,15,15,3);a="arrows",r=[s.x/l,s.y/c,o.x/l,o.y/c,m[0],m[1],m[2],m[3],15,15,3]}}},t.onmouseup=function(){n.current_timer=setInterval(function(){1==n.current_time&&n.clearCanvas(),n.current_time>0?n.current_time--:(clearInterval(n.current_timer),n.current_timer=null)},1e3),e=!1,"rect"==a?n.$socket.emit("a2c",n.user.connection_id,"draw","rect",r):"circle"==a?n.$socket.emit("a2c",n.user.connection_id,"draw","circle",r):"arrows"==a&&n.$socket.emit("a2c",n.user.connection_id,"draw","arrow",r)},t.mouseleave=function(){e=!1}},saveData:function(t){var e=this.historyDeta;10===e.length&&e.shift(),e.push(t)},step_undo:function(){var t=this.historyDeta,e=this.ctx;if(t.length<1)return!1;e.putImageData(t[t.length-1],0,0),t.pop()},getColor:function(){for(var t=this.aColorBtn,e=this.activeColor,i=this.ctx,n=this,s=0;s<this.brush_color.length;s++)t[s].style.background=""+this.brush_color[s].code;for(var o=0;o<t.length;o++)t[o].onclick=function(){for(var s=0;s<t.length;s++)t[s].classList.remove("active");this.classList.add("active"),e=this.style.backgroundColor,i.fillStyle=e,i.strokeStyle=e,console.log("activeColor:",e),n.$socket.emit("a2c",n.user.connection_id,"set_painter",C[e],n.lWidth),console.log(C[e],n.lWidth)};i.fillStyle=e,i.strokeStyle=e,console.log("-------: 设置静态画笔的颜色---------:",e),n.$socket.emit("a2c",n.user.connection_id,"set_painter",C[e],n.lWidth)},use_brush:function(){this.txt=!1,this.line=!0,this.clear=!1,this.rectangle=!1,this.circle=!1,this.arrows=!1,this.brushBtn.classList.add("active"),this.textBtn.classList.remove("active"),this.rectangleBtn.classList.remove("active"),this.circleBtn.classList.remove("active"),this.arrowsBtn.classList.remove("active"),this.$refs.tValue.style.display="none"},use_text:function(){this.txt=!0,this.line=!1,this.clear=!1,this.rectangle=!1,this.circle=!1,this.arrows=!1,this.textBtn.classList.add("active"),this.brushBtn.classList.remove("active"),this.rectangleBtn.classList.remove("active"),this.circleBtn.classList.remove("active"),this.arrowsBtn.classList.remove("active")},use_rectangle:function(){this.txt=!1,this.line=!1,this.clear=!1,this.rectangle=!0,this.circle=!1,this.arrows=!1,this.rectangleBtn.classList.add("active"),this.textBtn.classList.remove("active"),this.circleBtn.classList.remove("active"),this.brushBtn.classList.remove("active"),this.arrowsBtn.classList.remove("active"),this.$refs.tValue.style.display="none"},use_circle:function(){this.txt=!1,this.line=!1,this.clear=!1,this.rectangle=!1,this.circle=!0,this.arrows=!1,this.circleBtn.classList.add("active"),this.textBtn.classList.remove("active"),this.rectangleBtn.classList.remove("active"),this.brushBtn.classList.remove("active"),this.arrowsBtn.classList.remove("active"),this.$refs.tValue.style.display="none"},use_arrows:function(){this.txt=!1,this.line=!1,this.clear=!1,this.rectangle=!1,this.circle=!1,this.arrows=!0,this.arrowsBtn.classList.add("active"),this.textBtn.classList.remove("active"),this.rectangleBtn.classList.remove("active"),this.circleBtn.classList.remove("active"),this.brushBtn.classList.remove("active"),this.$refs.tValue.style.display="none"},change_rangeValue:function(){var t=this.rangeBtn.value;this.lWidth=t,this.$socket.emit("a2c",this.user.connection_id,"set_painter",C[this.activeColor],this.lWidth)},clearCanvas:function(){var t=this.canvas,e=this.ctx,i=t.width,n=t.height;e.clearRect(0,0,i,n),this.$socket.emit("a2c",this.user.connection_id,"clear_white_board")},drawLine:function(t,e,i,n,s,o){var a=this.canvas,r=this.ctx,l=this.lWidth;if(r.lineWidth=l,r.lineCap="round",r.lineJoin="round",r.beginPath(),r.moveTo(t,e),r.lineTo(i,n),r.stroke(),r.closePath(),o){var c=a.width,d=a.height;this.$socket.emit("a2c",this.user.connection_id,"draw","line",[t/c,e/d,i/c,n/d])}},fillText:function(t,e,i){var n=this.canvas,s=this.ctx;this.lWidth<15?s.font="15px Arial":s.font=this.lWidth+"px Arial",s.fillText(t,e,i);var o=n.width,a=n.height;this.$socket.emit("a2c",this.user.connection_id,"draw","text",[t,e/o,i/a])},drawRect:function(t,e,i,n){this.canvas;var s=this.ctx;s.lineWidth=this.lWidth,s.beginPath(),s.strokeRect(t,e,i,n)},drawcircle:function(t,e,i,n,s,o){this.canvas;var a=this.ctx;a.lineWidth=this.lWidth,a.beginPath(),a.arc(t,e,i,n,s,o),a.stroke()},calculateRadius:function(t,e){var i=e.x-t.x,n=e.y-t.y;return(i<0||n<0)&&(i=Math.abs(i)),Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},drawArrow:function(t,e,i,n,s,o,a){var r=this.canvas,l=this.ctx;o=void 0!==(s=void 0!==s?s:30)?o:10,a=void 0!==a?a:1;var c=180*Math.atan2(e-n,t-i)/Math.PI,d=(c+s)*Math.PI/180,u=(c-s)*Math.PI/180,h=o*Math.cos(d),f=o*Math.sin(d),p=o*Math.cos(u),v=o*Math.sin(u);l.save(),l.beginPath();var m=t-h,g=e-f;l.moveTo(m,g),l.moveTo(t,e),l.lineTo(i,n),m=i+h,g=n+f,l.moveTo(m,g);var _=m,y=g;l.lineTo(i,n);var w=m=i+p,b=g=n+v;l.lineTo(m,g),l.lineWidth=a,l.closePath(),l.stroke(),l.restore();var C=r.width,A=r.height;return[_/C,y/A,w/C,b/A]}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"Canvas_c"}},[i("i",{staticClass:"el-icon-error",attrs:{title:"关闭"},on:{click:t.closeCanvas}}),t._v(" "),i("div",{staticClass:"canvas_container"},[i("canvas",{ref:"canvas",attrs:{id:"drawing-board"}}),t._v(" "),i("input",{ref:"tValue",attrs:{id:"tValue",placeholder:"按Enter键打印文字",type:"text"}})]),t._v(" "),i("div",{staticClass:"color-group_c"},[i("div",[i("ul",t._l(t.brush_color,function(t,e){return i("li",{key:e,ref:"color_item",refInFor:!0,staticClass:"color-item"})}),0)]),t._v(" "),i("div",{staticClass:"tools_c"},[i("button",{ref:"brush",staticClass:"active",attrs:{id:"brush",title:"画笔"},on:{click:t.use_brush}},[i("i",{staticClass:"iconfont icon-qianbi"})]),t._v(" "),i("button",{ref:"rectangle",attrs:{id:"rectangle",title:"矩形"},on:{click:t.use_rectangle}},[i("i",{staticClass:"iconfont icon-Icon-"})]),t._v(" "),i("button",{ref:"circle",attrs:{id:"circle",title:"圆形"},on:{click:t.use_circle}},[i("i",{staticClass:"iconfont icon-39"})]),t._v(" "),i("button",{ref:"arrows",attrs:{id:"arrows",title:"箭头"},on:{click:t.use_arrows}},[i("i",{staticClass:"iconfont icon-arrow-right"})]),t._v(" "),i("button",{ref:"text",attrs:{id:"text",title:"文字"},on:{click:t.use_text}},[i("i",{staticClass:"iconfont icon-ziti"})])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"DynamicMark"==t.item.id,expression:"item.id == 'DynamicMark'"}],staticClass:"prompt"},[t._v("注: 离开画布5秒后清除画布  "),i("strong",{directives:[{name:"show",rawName:"v-show",value:t.current_time>0,expression:"current_time > 0"}]},[t._v("倒计时: "+t._s(t.current_time))])])])},staticRenderFns:[]};var x=i("VU/8")(A,L,!1,function(t){i("z1EQ")},null,null).exports,M=null,k={props:["item","index","centerCanvas","centerVideo"],components:{},data:function(){return{info:this.item,player:null,recvOnly:!0,videoHeight:0,videoWidth:0,resArr:[],isIcon:!1,isToolsIcon:!1,zlmsdpUrl:"",isConnectVoice:!1,user:null}},mounted:function(){this.user=this.$root.get_current_user(),this.item&&(console.log("this.item:",this.centerVideo),clearInterval(M),this.draw(this.item.$refs.video),this.setCanvasWH(this.item.$refs.video))},methods:{draw:function(t){var e=document.getElementById("myCanvas"),i=e.getContext("2d");self=this,M=setInterval(function(){if(self.videoWidth!=t.videoWidth)if(self.videoWidth=t.videoWidth,self.videoHeight=t.videoHeight,self.centerCanvas.videoWidth=t.videoWidth,self.centerCanvas.videoHeight=t.videoHeight,self.videoHeight>self.videoWidth){e.height=self.$refs.vBox.clientHeight,e.style.height=self.$refs.vBox.clientHeight;var n=self.videoWidth/self.videoHeight*e.height;e.width=n,e.style.width=n+"px",console.log("瘦图:")}else{e.width=.8*self.$refs.vBox.clientWidth,e.style.width=.8*self.$refs.vBox.clientWidth+"px";var s=self.videoHeight/self.videoWidth*e.width;e.height=s,e.style.height=s+"px"}console.log("video.videoWidth:",self.videoWidth,self.videoHeight),i.drawImage(t,0,0,e.width,e.height)},16)},setCanvasWH:function(t){var e=document.getElementById("myCanvas");e.width=t.videoWidth/3,e.height=t.videoHeight/3},closeVideo:function(t){var e=this.$parent,i=(e.videoItems,e.centerVideo);clearInterval(M),o.default.set(i,0,null)},showIcon:function(){this.isIcon=!0,this.isToolsIcon=!0},hiddenIcon:function(){this.isIcon=!1,this.isToolsIcon=!1}},sockets:{stream_start:function(t){console.log("stream_start ==>",t)},stream_stop:function(t){console.log(t),"web"!=t.sponsor_type&&t.sponsor_id==this.item.device_id&&(this.item.center?this.closeVideo("center"):this.closeVideo("bottom"))}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video_stream_box",on:{mousemove:t.showIcon,mouseout:t.hiddenIcon}},[t.centerVideo.center?i("i",{directives:[{name:"show",rawName:"v-show",value:t.isIcon,expression:"isIcon"}],staticClass:"el-icon-error",attrs:{title:"关闭"},on:{click:function(e){return t.closeVideo("center")}}}):i("i",{directives:[{name:"show",rawName:"v-show",value:t.isIcon,expression:"isIcon"}],staticClass:"el-icon-error",attrs:{title:"关闭"},on:{click:function(e){return t.closeVideo("bottom")}}}),t._v(" "),i("div",{staticClass:"device_info_box"},[i("span",[t._v(t._s(t.centerVideo.device_name||t.centerVideo.encoder_name))])]),t._v(" "),t.centerVideo.center||"drone"==t.centerVideo.type?t._e():i("div",{directives:[{name:"show",rawName:"v-show",value:t.isToolsIcon,expression:"isToolsIcon"}],staticClass:"tools"},[i("div")]),t._v(" "),i("div",{ref:"vBox",staticClass:"video_box"},[i("canvas",{ref:"video",attrs:{id:"myCanvas",autoplay:""}})])])},staticRenderFns:[]};var S=i("VU/8")(k,T,!1,function(t){i("KhYx")},"data-v-7a558be9",null).exports,D=i("DuOc"),E={components:{DeviceList:h,PushDeviceStream:v,VideoStream:b,Canvas:x,canvasVideo:S},data:function(){return{videoItems:[null,null,null,null,null],centerVideo:[null],centerDom:"",isCanvas:!1,centerIndex:null,CanvasDes:{},isScreenSharing:!1,centerCanvas:{videoHeight:0,videoWidth:0},user:{},isOpenScreenSharing:!1}},mounted:function(){this.user=this.$root.get_current_user(),D.a.$emit("routerChange")},methods:{switchCenterVideo:function(t,e){var i=this;console.log("switchCenterVideo ==>",t,e),this.isCanvas=!1,o.default.set(i.centerVideo,0,null);var n=s()({},t,{center:!0});this.centerIndex=e,this.centerDom=this.$refs.videoStreamLoop[e],console.log("videoStreamLoop:",this.$refs.videoStreamLoop),o.default.nextTick(function(){o.default.set(i.centerVideo,0,n)})},UpdateVideoItems:function(t){for(var e in console.log("UpdateVideoItems ==>",t),this.videoItems){var i=this.videoItems[e];if(console.log(i),i&&i.connection_id&&i.connection_id==t.connection_id)return o.default.set(this.videoItems,e,t),e;if(i&&i.id&&i.id==t.id)return o.default.set(this.videoItems,e,t),e}for(var n in this.videoItems)if(null==this.videoItems[n])return void o.default.set(this.videoItems,n,t)},isCenterVideo:function(){return!!this.centerVideo[0]},openDynamicMark:function(){if(this.isCenterVideo()){if(this.isCanvas)return void this.$message.warning("正在使用"+this.CanvasDes.name);this.CanvasDes={id:"DynamicMark",name:"动态标记"},this.isCanvas=!0,this.$socket.emit("a2c",this.centerVideo[0].connection_id,"start_dynamic_mark"),console.log("start_dynamic_mark ==>",this.centerVideo[0].connection_id)}else this.$message.warning("请在主页面推送视频后重试")},openStaticMark:function(){var t=this;if(this.isCenterVideo()){if(this.isCanvas)return void this.$message.warning("正在使用"+this.CanvasDes.name);console.log("openStaticMark before ==>",this.can),this.CanvasDes={id:"StaticMark",name:"静态标记"},this.isCanvas=!0,setTimeout(function(){t.$socket.emit("a2c",t.centerVideo[0].connection_id,"set_painter",-65536,5)},500)}else this.$message.warning("请在主页面推送视频后重试")},openScreenSharing:function(){if(this.$refs.pushDeviceStream.checkList.length>0){var t=this.$root.getPushUrl("{t:'s_vid'}");console.log("共享屏幕 url:",t),t&&this.start_play(t)}else this.$message.warning("请选择设备")},start_play:function(t){console.log("share video:"),this.player=new ZLMRTCClient.Endpoint({element:null,debug:!0,zlmsdpUrl:t,simulcast:!1,useCamera:!1,audioEnable:!1,videoEnable:!0,recvOnly:!1,resolution:{w:1280,h:720}});var e=this.player;console.log(this.player),e.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR,function(t){console.log("ICE 协商出错")}),e.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS,function(t){console.log("播放成功",t.streams)}),e.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANSWER_EXCHANGE_FAILED,function(t){console.log("offer answer 交换失败",t),stop()}),e.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM,function(t){console.log("获取本地流成功")}),e.on(ZLMRTCClient.Events.CAPTURE_STREAM_FAILED,function(t){console.log("获取本地流失败")})},closeScreenSharing:function(){this.isOpenScreenSharing=!1,this.stopPushStream(),this.disconnectScreenshare()},connectScreenshare:function(){var t=this.$refs.pushDeviceStream,e=t.checkList,i=t.online_user;if(e.length>0)if(this.isOpenScreenSharing){for(var n in this.$message.success("推送成功"),console.log(e),e){var s=t.find_online_user(e[n]);if(!s)return;var o={session_id:this.session_id};this.$socket.emit("a2c",i[s].connection_id,"start_listen_feed",o),console.log("start_listen_feed ==> 111",i[s].connection_id,o)}t.isPush=!0}else this.$message.warning("屏幕共享失败");else this.$message.warning("请选择设备")},disconnectScreenshare:function(){var t=this.$refs.pushDeviceStream,e=t.checkList,i=t.online_user;if(e.length>0)if(t.isPush){for(var n in e){var s=t.find_online_user(e[n]),o={session_id:this.session_id};this.$socket.emit("a2c",i[s].connection_id,"stop_listen_feed",o),console.log("stop_listen_feed ==>",i[s].connection_id,o)}this.$message.success("推送停止"),t.isPush=!1}else this.$message.warning("未推送");else this.$message.warning("请选择设备")},openCanvas:function(){if(this.isCenterVideo()){if(this.isCanvas)return void this.$message.warning("正在使用"+this.CanvasDes.name);this.CanvasDes={id:"Canvas",name:"黑板功能"},this.isCanvas=!0;var t={background_color:-65536};this.$socket.emit("a2c",this.centerVideo[0].connection_id,"start_white_board",t),console.log("Canvas start_white_board ==>",this.centerVideo[0].connection_id,t)}else this.$message.warning("请在主页面推送视频后重试")},stopPushStream:function(){this.player&&(this.player.close(),this.player=null)},handleClick:function(t,e){console.log(t,e)}},sockets:{start_listen_rtmp:function(t){console.log("start_linsen_rtmp ==>",t),this.UpdateVideoItems(t)},stream_stop:function(t){console.log("stream_stop ==>",t),"web"==t.sponsor_type&&t.sponsor_id==this.user.id&&("video"==t.media_type||"mixed"==t.media_type&&this.isOpenScreenSharing&&t.session_id==this.session_id)&&(console.log("关闭屏幕"),this.isOpenScreenSharing&&(this.isOpenScreenSharing=!1,this.disconnectScreenshare())),console.log("stream_stop ==>",t),"rtmp"==t.schema&&console.log("rtmp close")},stream_start:function(t){console.log("stream_start ==>",t),"web"==t.sponsor_type&&t.sponsor_id==this.user.id&&("video"!=t.media_type||this.isOpenScreenSharing||(console.log("连接屏幕"),this.isOpenScreenSharing=!0,this.session_id=t.session_id,this.connectScreenshare()))}}},N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home_page_box"},[i("div",{staticClass:"left_box"},[i("div",{staticClass:"top_box"},[i("h4",[t._v("功能栏")]),t._v(" "),i("div",[i("el-button",{attrs:{type:"primary",disabled:null==t.centerVideo[0]||t.centerVideo[0].encoder_name},on:{click:t.openDynamicMark}},[t._v("动态标记")])],1),t._v(" "),i("div",[i("el-button",{attrs:{type:"primary",disabled:null==t.centerVideo[0]||t.centerVideo[0].encoder_name},on:{click:t.openStaticMark}},[t._v("静态标记")])],1),t._v(" "),t.isOpenScreenSharing?i("div",[i("el-button",{attrs:{type:"danger"},on:{click:t.closeScreenSharing}},[t._v("关闭共享")])],1):i("div",[i("el-button",{attrs:{type:"primary"},on:{click:t.openScreenSharing}},[t._v("屏幕共享")])],1),t._v(" "),i("div",[i("el-button",{attrs:{type:"primary",disabled:null==t.centerVideo[0]||t.centerVideo[0].encoder_name},on:{click:t.openCanvas}},[t._v("黑板功能")])],1)]),t._v(" "),i("div",{staticClass:"bottom_box"},[i("PushDeviceStream",{ref:"pushDeviceStream"})],1)]),t._v(" "),i("div",{staticClass:"center_box"},[i("div",{staticClass:"top_box"},[t.centerVideo[0]?i("canvasVideo",{ref:"centerVideoStream",attrs:{centerCanvas:t.centerCanvas,item:t.centerDom,centerVideo:t.centerVideo[0]}}):t._e(),t._v(" "),t.isCanvas&&t.centerVideo[0]?i("div",{staticClass:"canvas_float"},[i("Canvas",{attrs:{centerCanvas:t.centerCanvas,item:t.CanvasDes,user:t.centerVideo[0],videoDom:t.$refs.centerVideoStream.$refs.video,vBox:t.$refs.centerVideoStream.$refs.vBox}})],1):t._e()],1),t._v(" "),i("div",{staticClass:"bottom_box"},t._l(t.videoItems,function(e,n){return i("div",{key:n},[null==e?i("div",[t._v("通道"+t._s(n+1))]):i("div",{on:{dblclick:function(i){return t.switchCenterVideo(e,n)}}},[i("VideoStream",{ref:"videoStreamLoop",refInFor:!0,attrs:{item:e,index:n}})],1)])}),0)]),t._v(" "),i("div",{staticClass:"right_box"},[i("DeviceList")],1)])},staticRenderFns:[]};var $=i("VU/8")(E,N,!1,function(t){i("YkxT")},"data-v-594a1d2c",null);e.default=$.exports},z1EQ:function(t,e){},zz3G:function(t,e){}},["NHnr"]);