(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],m=0,d=[];m<s.length;m++)r=s[m],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},a={app:0},o=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"06e2":function(e,t,i){"use strict";i("f698")},"0dd6":function(e,t,i){},1:function(e,t){},2:function(e,t){},"20bd":function(e,t,i){},"26d2":function(e,t,i){},"429a":function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="429a"},"5c0b":function(e,t,i){"use strict";i("9c0c")},6524:function(e,t,i){"use strict";i("7644")},7644:function(e,t,i){},"9c0c":function(e,t,i){},"9fe2":function(e,t,i){"use strict";i("26d2")},abef:function(e,t,i){},b5b1:function(e,t,i){"use strict";i("0dd6")},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view"),i("div",{staticClass:"sideMenu",staticStyle:{display:"none"}},[i("side-menu")],1)],1)},o=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu",{attrs:{collapse:!0}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[e._v("场景浏览")]),i("el-menu-item",{attrs:{index:"1-1"},on:{click:e.zoomIn}},[e._v("放大")]),i("el-menu-item",{attrs:{index:"1-2"},on:{click:e.zoomOut}},[e._v("缩小")]),i("el-menu-item",{attrs:{index:"1-3"},on:{click:e.home}},[e._v("全球视野")])],2),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("模型加载")]),i("el-submenu",{attrs:{index:"2-1"}},[i("template",{slot:"title"},[e._v("glTF")]),i("el-menu-item",{attrs:{index:"2-1-1"},on:{click:function(t){return e.addglTF("CesiumMan")}}},[e._v("CesiumMan")]),i("el-menu-item",{attrs:{index:"2-1-2"},on:{click:function(t){return e.addglTF("Architecture")}}},[e._v("建筑")])],2),i("el-submenu",{attrs:{index:"2-2"}},[i("template",{slot:"title"},[e._v("3dTiles")]),i("el-menu-item",{attrs:{index:"2-2-1"},on:{click:function(t){return e.add3dtiles("Dragon")}}},[e._v("龙")]),i("el-menu-item",{attrs:{index:"2-2-3"},on:{click:function(t){return e.add3dtiles("Architecture")}}},[e._v("建筑")])],2)],2),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[e._v("primitives")]),i("el-menu-item",{attrs:{index:"3-1"},on:{click:function(t){return e.addPrimitive("box")}}},[e._v("盒子")]),i("el-submenu",{attrs:{index:"3-2"}},[i("template",{slot:"title"},[e._v("自定义")]),i("el-menu-item",{attrs:{index:"3-2-1"},on:{click:function(t){return e.addPrimitive("custom-color")}}},[e._v("纯色纹理")]),i("el-menu-item",{attrs:{index:"3-2-2"},on:{click:function(t){return e.addPrimitive("custom-img")}}},[e._v("图片纹理")])],2),i("el-submenu",{attrs:{index:"3-3"}},[i("template",{slot:"title"},[e._v("水面材质")]),i("el-menu-item",{attrs:{index:"3-3-1"},on:{click:function(t){return e.addPrimitive("custom-water")}}},[e._v("矩形")]),i("el-menu-item",{attrs:{index:"3-3-2"},on:{click:function(t){return e.addPrimitive("custom-water-box")}}},[e._v("立方体")])],2)],2)],1)},s=[],l=i("d4ec"),c=i("bee2"),u=i("ec35"),m=function(){function e(t){Object(l["a"])(this,e),this.zoomFactor=.4,this.viewer=t}return Object(c["a"])(e,[{key:"zoomOut",value:function(){var e=u["g"].fromCartesian(this.viewer.camera.position).height;this.viewer.camera.zoomOut(e*this.zoomFactor)}},{key:"zoomIn",value:function(){var e=u["g"].fromCartesian(this.viewer.camera.position).height;this.viewer.camera.zoomIn(e*this.zoomFactor)}},{key:"home",value:function(){this.viewer.camera.flyHome()}}]),e}(),d=m,v=function(){function e(t){Object(l["a"])(this,e),this.viewer=t,this.gltf=void 0}return Object(c["a"])(e,[{key:"add",value:function(e){var t=this;this.clear();var i=u["f"].fromDegrees(-95,40,0),n=u["I"].localFrameToFixedFrameGenerator("north","west"),a=new u["t"](0,0,0),o=u["I"].headingPitchRollToFixedFrame(i,a,u["l"].WGS84,n),r=this.viewer.scene.primitives.add(u["B"].fromGltf({url:e,modelMatrix:o}));this.gltf=r,r.readyPromise.then((function(){var e=u["A"].multiplyByPoint(o,r.boundingSphere.center,new u["f"]),i=new u["c"](e,r.boundingSphere.radius);t.viewer.camera.flyToBoundingSphere(i,{offset:new u["s"](0,0,0)})}))}},{key:"clear",value:function(){for(var e=this.viewer.scene.primitives.length,t=this.viewer.scene.primitives,i=0;i<e;i++){var n=t.get(i);n instanceof u["B"]&&t.remove(n)}}},{key:"remove",value:function(){this.gltf&&this.viewer.scene.primitives.remove(this.gltf)}}]),e}(),p=v,f=function(){function e(t){Object(l["a"])(this,e),this.viewer=t,this.tileset=void 0}return Object(c["a"])(e,[{key:"add",value:function(e){this.clear(),console.log("-----add------:",e);u["A"].fromArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,-700,1]);var t=new u["h"]({backFaceCulling:!1,url:e}),i=this.viewer.scene.primitives.add(t);this.tileset=i;this.viewer;i.readyPromise.then((function(){})),this.viewer.cesium3DTilesInspector||this.viewer.extend(u["P"])}},{key:"clear",value:function(){for(var e=this.viewer.scene.primitives.length,t=this.viewer.scene.primitives,i=0;i<e;i++){var n=t.get(i);n instanceof u["h"]&&t.remove(n)}}},{key:"remove",value:function(){this.tileset&&this.viewer.scene.primitives.remove(this.tileset)}}]),e}(),h=f,g=(i("d3b7"),i("cfc3"),i("4a9b"),i("84c3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),function(){function e(t){Object(l["a"])(this,e),this.viewer=t,this.clear()}return Object(c["a"])(e,[{key:"modelMat4",value:function(){var e=u["g"].fromDegrees(-95,40,100),t=u["g"].toCartesian(e),i=u["I"].eastNorthUpToFixedFrame(t);return i}},{key:"clear",value:function(){for(var e=this.viewer.scene.primitives.length,t=this.viewer.scene.primitives,i=0;i<e;i++){var n=t.get(i);n instanceof u["E"]&&t.remove(n)}clearInterval()}},{key:"addBox",value:function(){var e=u["g"].fromDegrees(-95,40,1e3),t=u["g"].toCartesian(e),i=this.modelMat4(),n=new u["d"]({minimum:new u["f"](-20,-20,0),maximum:new u["f"](20,20,40),vertexFormat:u["J"].POSITION_ONLY}),a=new u["q"]({geometry:u["d"].createGeometry(n),modelMatrix:i,id:"box",attributes:{color:u["j"].fromColor(u["i"].RED.withAlpha(.5))}}),o=new u["D"]({flat:!0}),r=new u["E"]({geometryInstances:[a],appearance:o,asynchronous:!1});this.viewer.scene.primitives.add(r),this.viewer.camera.flyTo({destination:t,orientation:{heading:0,pitch:u["z"].toRadians(-90),roll:0}})}},{key:"customRectangle",value:function(){var e=u["g"].fromDegrees(-95,40,1e3),t=u["g"].toCartesian(e),i=this.modelMat4(),n=new Float64Array([-20,-20,0,20,-20,0,20,20,0,-20,20,0]),a=new Float32Array([1,0,0,.5,0,1,0,.5,0,0,1,.5,0,1,1,.5]),o=new u["p"],r=new Uint16Array(6);r[0]=0,r[1]=1,r[2]=2,r[3]=0,r[4]=2,r[5]=3,o.position=new u["o"]({componentDatatype:u["k"].DOUBLE,componentsPerAttribute:3,values:n}),o.color=new u["o"]({componentDatatype:u["k"].FLOAT,componentsPerAttribute:4,values:a});var s=new u["n"]({attributes:o,primitiveType:u["F"].TRIANGLES,indices:r,boundingSphere:u["c"].fromVertices(n)}),l="\n        attribute vec3 position3DHigh;\n        attribute vec3 position3DLow;\n        attribute vec4 color;\n        varying vec4 v_color;\n        attribute float batchId;\n        void main(){\n            vec4 p = czm_computePosition();  //The position relative to eye\n            v_color =color;\n            p = czm_modelViewProjectionRelativeToEye * p;\n            gl_Position=p;\n        }\n        ",c="\n            varying vec4 v_color;\n            void main(){\n                gl_FragColor=v_color;\n            }\n        ",m=new u["a"]({renderState:{blending:u["b"].PRE_MULTIPLIED_ALPHA_BLEND,depthTest:{enabled:!0},depthMask:!0},fragmentShaderSource:c,vertexShaderSource:l}),d=new u["q"]({geometry:s,modelMatrix:i,id:"low"}),v=(new u["q"]({geometry:s,modelMatrix:u["A"].multiplyByTranslation(i,new u["f"](0,0,50),new u["A"]),id:"high"}),new u["E"]({geometryInstances:[d],appearance:m,asynchronous:!1,releaseGeometryInstances:!1}));this.viewer.scene.primitives.add(v),this.viewer.camera.flyTo({destination:t,orientation:{heading:0,pitch:u["z"].toRadians(-90),roll:0}});var p=this.viewer,f=0,h=setInterval((function(){++f,4===f&&clearInterval(h),p.scene.primitives.removeAll();var e=v.geometryInstances[0].geometry.attributes,t=e.color.values,a=new Float32Array(16);a[0]=t[4],a[1]=t[5],a[2]=t[6],a[3]=t[7],a[4]=t[8],a[5]=t[9],a[6]=t[10],a[7]=t[11],a[8]=t[12],a[9]=t[13],a[10]=t[14],a[11]=t[15],a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=t[3],o.color=new u["o"]({componentDatatype:u["k"].FLOAT,componentsPerAttribute:4,values:a});var s=new u["n"]({attributes:o,primitiveType:u["F"].TRIANGLES,indices:r,boundingSphere:u["c"].fromVertices(n)});p.scene.primitives.add(new u["E"]({geometryInstances:[new u["q"]({geometry:s,modelMatrix:i})],appearance:m,asynchronous:!1}))}),500)}},{key:"customMaterial",value:function(){this.viewer;var e=this.viewer.scene,t=u["g"].fromDegrees(-95,40,1e4),i=u["g"].toCartesian(t),n=this.modelMat4(),a=new Float64Array([-2e3,-2e3,0,2e3,-2e3,0,2e3,2e3,0,-2e3,2e3,0]),o=new Float32Array([0,0,1,0,1,1,0,1]),r=new u["p"],s=new Uint16Array(6);s[0]=0,s[1]=1,s[2]=2,s[3]=0,s[4]=2,s[5]=3,r.position=new u["o"]({componentDatatype:u["k"].DOUBLE,componentsPerAttribute:3,values:a}),r.st=new u["o"]({componentDatatype:u["k"].FLOAT,componentsPerAttribute:2,values:o});var l=new u["n"]({attributes:r,primitiveType:u["F"].TRIANGLES,indices:s,boundingSphere:u["c"].fromVertices(a)});u["r"].computeNormal(l);var c=new u["q"]({geometry:l,modelMatrix:n,id:"rect"}),m=new u["E"]({geometryInstances:[c],appearance:new u["y"]({flat:!0,material:new u["x"]({fabric:{uniforms:{image:"./images/Cesium_Logo_Color.jpg",speed:0},source:"\n                        czm_material czm_getMaterial(czm_materialInput materialInput)\n\n                        {\n\n                            vec3 red=vec3(1.0,0.0,0.0);\n                            czm_material material = czm_getDefaultMaterial(materialInput);\n\n                            if(materialInput.st.x<=speed){\n\n                                material.diffuse = czm_gammaCorrect(texture2D(image, fract(materialInput.st)).rgb *red);\n \n                            }\n\n                            else{\n\n                                material.diffuse = czm_gammaCorrect(texture2D(image, fract(materialInput.st)).rgb);\n \n                            }\n\n                            material.alpha = texture2D(image, fract(materialInput.st)).a;\n\n                            return material;\n\n                        }\n\n                        "}}),materialSupport:u["y"].MaterialSupport.TEXTURED}),compressVertices:!1,asynchronous:!1});e.primitives.add(m),this.viewer.camera.flyTo({destination:i,orientation:{heading:0,pitch:u["z"].toRadians(-90),roll:0}});var d=0,v=setInterval((function(){d<=1?d+=.05:(clearInterval(v),d=0),m.appearance.material=new u["x"]({fabric:{uniforms:{image:"./images/Cesium_Logo_Color.jpg",speed:d},source:"\n                        czm_material czm_getMaterial(czm_materialInput materialInput)\n\n                        {\n\n                            vec3 red=vec3(1.0,0.0,0.0);\n\n                            czm_material material = czm_getDefaultMaterial(materialInput);\n\n                            if(materialInput.st.x<=speed){\n //纹理X坐标小于speed添加红色\n                                material.diffuse = czm_gammaCorrect(texture2D(image, fract(materialInput.st)).rgb *red);\n \n                            }\n\n                            else{\n\n                                material.diffuse = czm_gammaCorrect(texture2D(image, fract(materialInput.st)).rgb);\n \n                            }\n\n                            material.alpha = texture2D(image, fract(materialInput.st)).a;\n\n                            return material;\n\n                        }\n\n                        "}})}),500)}},{key:"customWater",value:function(){this.viewer;var e=this.viewer.scene,t=u["g"].fromDegrees(-95,40,1e4),i=u["g"].toCartesian(t),n=this.modelMat4(),a=new Float64Array([-2e3,-2e3,0,2e3,-2e3,0,2e3,2e3,0,-2e3,2e3,0]),o=new Float32Array([0,0,1,0,1,1,0,1]),r=new u["p"],s=new Uint16Array(6);s[0]=0,s[1]=1,s[2]=2,s[3]=0,s[4]=2,s[5]=3,r.position=new u["o"]({componentDatatype:u["k"].DOUBLE,componentsPerAttribute:3,values:a}),r.st=new u["o"]({componentDatatype:u["k"].FLOAT,componentsPerAttribute:2,values:o});var l=new u["n"]({attributes:r,primitiveType:u["F"].TRIANGLES,indices:s,boundingSphere:u["c"].fromVertices(a)}),c=new u["q"]({geometry:l,modelMatrix:n,id:"rect"}),m=new u["E"]({geometryInstances:[c],asynchronous:!1,appearance:new u["y"]({material:new u["x"]({fabric:{type:"Water",uniforms:{normalMap:Object(u["N"])("Assets/Textures/waterNormals.jpg"),frequency:1e3,animationSpeed:.01,amplitude:1}}}),vertexShaderSource:"attribute vec3 position3DHigh;\n                attribute vec3 position3DLow;\n                attribute vec2 st;\n                attribute float batchId;\n                \n                varying vec3 v_positionMC;\n                varying vec3 v_positionEC;\n                varying vec2 v_st;\n                \n                void main()\n                {\n                    vec4 p = czm_computePosition();\n                \n                    v_positionMC = position3DHigh + position3DLow;           // position in model coordinates\n                    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates\n                    v_st = st;\n                \n                    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n                }\n                ",fragmentShaderSource:"varying vec3 v_positionMC;\n                varying vec3 v_positionEC;\n                varying vec2 v_st;\n                \n                void main()\n                {\n                    czm_materialInput materialInput;\n                \n                    vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n                #ifdef FACE_FORWARD\n                    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n                #endif\n                \n                    materialInput.s = v_st.s;\n                    materialInput.st = v_st;\n                    materialInput.str = vec3(v_st, 0.0);\n                \n                    // Convert tangent space material normal to eye space\n                    materialInput.normalEC = normalEC;\n                    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n                \n                    // Convert view vector to world space\n                    vec3 positionToEyeEC = -v_positionEC;\n                    materialInput.positionToEyeEC = positionToEyeEC;\n                \n                    czm_material material = czm_getMaterial(materialInput);\n                \n                #ifdef FLAT\n                    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n                #else\n                    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n                #endif\n                }\n                "})});e.primitives.add(m),this.viewer.camera.flyTo({destination:i,orientation:{heading:0,pitch:u["z"].toRadians(-90),roll:0}})}},{key:"customWaterWithBox",value:function(){var e=u["g"].fromDegrees(-95,40,1e3),t=u["g"].toCartesian(e),i=this.modelMat4(),n=new u["d"]({minimum:new u["f"](-500,-500,0),maximum:new u["f"](500,500,500),vertexFormat:u["J"].POSITION_AND_ST}),a=new u["q"]({geometry:n,modelMatrix:i,id:"waterbox"}),o=new u["y"]({flat:!1,materialSupport:u["y"].MaterialSupport.TEXTURED,material:new u["x"]({fabric:{type:"Water",uniforms:{normalMap:Object(u["N"])("Assets/Textures/waterNormals.jpg"),frequency:100,animationSpeed:.01,amplitude:1}}}),vertexShaderSource:"attribute vec3 position3DHigh;\n            attribute vec3 position3DLow;\n            attribute vec2 st;\n            attribute float batchId;\n            \n            varying vec3 v_positionMC;\n            varying vec3 v_positionEC;\n            varying vec2 v_st;\n            \n            void main()\n            {\n                vec4 p = czm_computePosition();\n            \n                v_positionMC = position3DHigh + position3DLow;           // position in model coordinates\n                v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates\n                v_st = st;\n            \n                gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            }\n            ",fragmentShaderSource:"varying vec3 v_positionMC;\n                varying vec3 v_positionEC;\n                varying vec2 v_st;\n                \n                void main()\n                {\n                    czm_materialInput materialInput;\n                \n                    vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n                #ifdef FACE_FORWARD\n                    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n                #endif\n                \n                    materialInput.s = v_st.s;\n                    materialInput.st = v_st;\n                    materialInput.str = vec3(v_st, 0.0);\n                \n                    // Convert tangent space material normal to eye space\n                    materialInput.normalEC = normalEC;\n                    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n                \n                    // Convert view vector to world space\n                    vec3 positionToEyeEC = -v_positionEC;\n                    materialInput.positionToEyeEC = positionToEyeEC;\n                \n                    czm_material material = czm_getMaterial(materialInput);\n                \n                #ifdef FLAT\n                    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n                #else\n                    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n                #endif\n                }\n                "}),r=new u["E"]({geometryInstances:[a],appearance:o,asynchronous:!1});this.viewer.scene.primitives.add(r),this.viewer.camera.flyTo({destination:t,orientation:{heading:0,pitch:u["z"].toRadians(-90),roll:0}})}}]),e}()),y=g,w=n["default"].extend({data:function(){return{viewer:null}},mounted:function(){this.viewer=this.$store.state.viewer},methods:{zoomIn:function(){var e=new d(this.viewer);e.zoomIn()},zoomOut:function(){var e=new d(this.viewer);e.zoomOut()},home:function(){var e=new d(this.viewer);e.home()},add3dtiles:function(e){var t=new h(this.viewer),i="";switch(e){case"Dragon":console.log("name:",e),i="./data/tilesets/province/510000_geojson_full.json";break;case"Architecture":i="./data/tilesets/TilesetWithTreeBillboards/tileset.json";break}t.add(i)},addglTF:function(e){var t=new p(this.viewer),i="";switch(e){case"CesiumMan":i="./data/model/CesiumMan/Cesium_Man.gltf";break;case"Architecture":i="./data/model/chateau_de_montfa_81_gltf/origin/scene-origin.gltf";break}t.add(i)},addPrimitive:function(e){var t=new y(this.viewer);switch(e){case"box":t.addBox();break;case"custom-color":t.customRectangle();break;case"custom-img":t.customMaterial();break;case"custom-water":t.customWater();break;case"custom-water-box":t.customWaterWithBox();break}}}}),b=w,_=(i("d943"),i("2877")),k=Object(_["a"])(b,r,s,!1,null,"7c014c70",null),x=k.exports,C=n["default"].extend({components:{SideMenu:x}}),O=C,E=(i("5c0b"),Object(_["a"])(O,a,o,!1,null,null,null)),T=E.exports,I=i("8c4f"),j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{attrs:{id:"viewer"}}),i("tools"),i("toolsEditer"),i("indexPanel")],1)},D=[],z=(i("6f8a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"viewer"},e._l(e.bntlist,(function(t,n){return i("el-button",{key:n,attrs:{type:"primary"},on:{click:function(i){return e.bntclick(t)}}},[e._v(e._s(t.name))])})),1)}),L=[],M=i("262e"),P=i("2caf"),S=i("9ab4"),A=i("1b40"),F=(i("b0c0"),i("25f0"),function(){function e(){Object(l["a"])(this,e)}return Object(c["a"])(e,[{key:"init",value:function(e){this.viewer=e}},{key:"getColor",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"addTips",value:function(){for(var e=[{img:"/static/SampleData/kml/facilities/LaunchPad.png",x:103,text:"贵阳项目",y:30,z:2e4}],t=0;t<e.length;t++)this.viewer.entities.add({position:u["f"].fromDegrees(e[t].x,e[t].y,e[t].z),data:{id:"guiyang"},label:{text:e[t].text,font:"500 30px Helvetica",scale:.5,style:u["w"].FILL,fillColor:u["i"].WHITE,pixelOffset:new u["e"](0,-60),showBackground:!0,backgroundColor:new u["i"](.5,.6,1,1)},billboard:{image:e[t].img||"/static/SampleData/kml/facilities/LaunchSite.png",scaleByDistance:new u["C"](150,1,15e6,.5),verticalOrigin:u["K"].BOTTOM,width:70,height:70}})}},{key:"addGeoJson",value:function(e){if(this.viewer){var t=this.viewer,i=(t.scene,u["m"].load(e,{clampToGround:!0}));i.then((function(e){for(var i=e.entities.values,n=0;n<i.length;n++){var a=i[n];a.polygon.outline=!0,a.polygon.color="red",a.polygon.name="hello world",a.label="hello world",a.polygon.color=u["i"].YELLOW.withAlpha(.1),a.polygon.outlineColor=u["i"].YELLOW,a.polygon.material=u["i"].GREEN.withAlpha(.5),a.polygon.outlineWidth=3e3,a.polygon.extrudedHeight=1e4,a.label.text="hahahahah",a.label.show=!0}console.log("fly to china"),t.dataSources.add(e)})),this.addTips(),t.flyTo(i)}}},{key:"addGeoJson_",value:function(e){console.log("--------add geo json--------------");var t=this.viewer.scene.primitives.add(new u["h"]({backFaceCulling:!1,url:e}));this.tileset=t;var i=this.viewer;t.readyPromise.then((function(){i.zoomTo(t)})),this.viewer.cesium3DTilesInspector||this.viewer.extend(u["P"]),i.flyTo(t),console.log("fly to:",i.flyTo)}}]),e}()),V=new F,R=new n["default"],N=function(e){Object(M["a"])(i,e);var t=Object(P["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.bntlist=[{type:"province",name:"全省"},{type:"economics",name:"经济区"},{type:"project",name:"项目列表"}],e}return Object(c["a"])(i,[{key:"bntclick",value:function(e){console.log("el:",e),"province"==e.type?(console.log("goto 四川省"),V.addGeoJson("/static/province/510000_geojson_full.json")):"project"==e.type&&R.$emit("projectList")}},{key:"mounted",value:function(){}}]),i}(A["b"]);N=Object(S["a"])([Object(A["a"])({components:{}})],N);var B=N,$=B,H=(i("e945"),Object(_["a"])($,z,L,!1,null,"01006df1",null)),W=H.exports,G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"viewer"},e._l(e.bntlist,(function(t,n){return i("el-button",{key:n,attrs:{type:"primary"},on:{click:function(i){return e.bntclick(t)}}},[e._v(e._s(t.name))])})),1)},U=[],J=function(e){Object(M["a"])(i,e);var t=Object(P["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.bntlist=[{type:"addPoint",name:"视频节点"}],e}return Object(c["a"])(i,[{key:"bntclick",value:function(e){console.log("el:",e),"province"==e.type?(console.log("goto 四川省"),V.addGeoJson("/static/province/510000_geojson_full.json")):"project"==e.type&&R.$emit("projectList")}},{key:"mounted",value:function(){}}]),i}(A["b"]);J=Object(S["a"])([Object(A["a"])({components:{}})],J);var Y=J,q=Y,K=(i("9fe2"),Object(_["a"])(q,G,U,!1,null,"1d912de2",null)),Z=K.exports,Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("prolist"),i("rightPanel"),i("addPanel")],1)},X=[],ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticStyle:{"z-index":"5000"},attrs:{title:"",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[i("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),i("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),i("el-table-column",{attrs:{prop:"address",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleClick(t.row)}}},[e._v("查看")])]}}])})],1)],1)])},te=[],ie=function(e){Object(M["a"])(i,e);var t=Object(P["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.flag=!1,e.dialogVisible=!1,e.list=[{date:"2016-05-02",name:"西安项目",url:"./data/tilesets/TilesetWithTreeBillboards/tileset.json",address:""},{date:"2016-05-04",name:"南京项目",url:"./data/tilesets/TilesetWithExpiration/tileset.json",address:""},{date:"2016-05-01",name:"四川项目",url:"./ZYsmall/tileset.json",address:""}],e}return Object(c["a"])(i,[{key:"submit",value:function(){}},{key:"handleClose",value:function(){}},{key:"handleClick",value:function(e){var t=this;this.dialogVisible=!1,this.viewer=this.$store.state.viewer;var i=new h(this.viewer);console.log("tilesetLoader:",i);try{i.add(e.url)}catch(a){}if("四川项目"==e.name){var n=u["A"].fromArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,-715,1]);setTimeout((function(){i.tileset._modelMatrix=n,t.viewer.flyTo(i.tileset,{duration:2,offset:{heading:u["z"].toRadians(50),pitch:u["z"].toRadians(-45),range:420}}),console.log("----------------------------------------")}),2e3)}}},{key:"mounted",value:function(){var e=this;this.viewer=this.$store.state.viewer,R.$on("projectList",(function(t){try{e.dialogVisible=!0}catch(i){}})),R.$on("LEFT_CLICK",(function(e){}))}}]),i}(A["b"]);ie=Object(S["a"])([Object(A["a"])({components:{}})],ie);var ne=ie,ae=ne,oe=(i("f725"),Object(_["a"])(ae,ee,te,!1,null,"019a969a",null)),re=oe.exports,se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisible,expression:"dialogVisible"}],staticClass:"winPanel",on:{click:function(t){e.dialogVisible=!1}}},[i("div",{staticClass:"rightPanel",style:{left:e.pos.x+"px",top:e.pos.y+"px"}},[i("ul",{staticClass:"ulStyle"},e._l(e.list,(function(t,n){return i("li",{staticClass:"liStyle",on:{click:function(i){return e.clickItem(t)}}},[e._v(e._s(t.name))])})),0)])])},le=[],ce=(i("b680"),function(e){Object(M["a"])(i,e);var t=Object(P["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.flag=!1,e.dialogVisible=!1,e.pos={x:0,y:0},e.list=[{type:"addVideo",name:"添加视频"},{type:"addTemp",name:"添加温度"}],e}return Object(c["a"])(i,[{key:"submit",value:function(){}},{key:"handleClose",value:function(){}},{key:"addVideo",value:function(){var e=this.getLatitude(this.pos);this.viewer.entities.add({position:u["f"].fromDegrees(e.x,e.y,10),label:{text:"中央空调",font:"500 30px Helvetica",scale:.5,style:u["w"].FILL,fillColor:u["i"].WHITE,pixelOffset:new u["e"](0,-60),showBackground:!0,backgroundColor:new u["i"](.5,.6,1,1)},billboard:{image:"/static/SampleData/kml/facilities/LaunchSite.png",scaleByDistance:new u["C"](150,1,15e6,.5),verticalOrigin:u["K"].BOTTOM}})}},{key:"clickItem",value:function(e){"addVideo"==e.type&&R.$emit("addPanel",{pos:this.pos})}},{key:"getLatitude",value:function(e){var t=this.viewer.camera.pickEllipsoid(e,this.ellipsoid);if(t){var i=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t),n=u["z"].toDegrees(i.latitude),a=u["z"].toDegrees(i.longitude),o=u["z"].toDegrees(this.viewer.camera.positionCartographic.height/1e3).toFixed(2);return{y:n,x:a,z:o}}}},{key:"handleClick",value:function(e){this.dialogVisible=!1,this.viewer=this.$store.state.viewer;var t=new h(this.viewer);console.log("tilesetLoader:",t);try{t.add(e.url)}catch(i){}}},{key:"mounted",value:function(){var e=this,t=this;this.viewer=this.$store.state.viewer,R.$on("rightPanel",(function(i){try{t.dialogVisible=!0,e.viewer=e.$store.state.viewer,e.pos=i.position}catch(n){}}))}}]),i}(A["b"]));ce=Object(S["a"])([Object(A["a"])({components:{}})],ce);var ue=ce,me=ue,de=(i("b5b1"),Object(_["a"])(me,se,le,!1,null,"68318438",null)),ve=de.exports,pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticStyle:{"z-index":"5000"},attrs:{title:"",visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("el-form",{ref:"form",attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"设备名称"}},[i("el-input",{model:{value:e.param.name,callback:function(t){e.$set(e.param,"name",t)},expression:"param.name"}})],1),i("el-form-item",{attrs:{label:"设备编码"}},[i("el-input",{model:{value:e.param.serial,callback:function(t){e.$set(e.param,"serial",t)},expression:"param.serial"}})],1),i("el-form-item",{attrs:{label:"设备类型"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.param.type,callback:function(t){e.$set(e.param,"type",t)},expression:"param.type"}},e._l(e.options,(function(e){return i("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})})),1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),i("el-button",[e._v("取消")])],1)],1)],1)])},fe=[],he=function(e){Object(M["a"])(i,e);var t=Object(P["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.flag=!1,e.dialogVisible=!1,e.pos={x:0,y:0},e.param={name:"",serial:"",type:"video"},e.options=[{name:"视频",type:"video"},{name:"温度",type:"temperature"}],e.list=[{type:"addVideo",name:"添加视频"},{type:"addTemp",name:"添加温度"}],e}return Object(c["a"])(i,[{key:"submit",value:function(){}},{key:"onSubmit",value:function(){this.addVideo(),this.dialogVisible=!1}},{key:"addVideo",value:function(){var e=this.getLatitude(this.pos),t="/static/image/"+this.param.type+".png";this.viewer.entities.add({position:u["f"].fromDegrees(e.x,e.y,25),data:this.param,label:{text:this.param.name,font:"500 30px Helvetica",scale:.5,style:u["w"].FILL,fillColor:u["i"].WHITE,pixelOffset:new u["e"](0,-60),showBackground:!0,backgroundColor:new u["i"](.5,.6,1,1)},billboard:{image:t,scaleByDistance:new u["C"](150,1,15e6,.5),verticalOrigin:u["K"].BOTTOM}})}},{key:"clickItem",value:function(e){"addVideo"==e.type&&this.addVideo()}},{key:"getLatitude",value:function(e){var t=this.viewer.camera.pickEllipsoid(e,this.ellipsoid);if(t){var i=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t),n=u["z"].toDegrees(i.latitude),a=u["z"].toDegrees(i.longitude),o=u["z"].toDegrees(this.viewer.camera.positionCartographic.height/1e3).toFixed(2);return{y:n,x:a,z:o}}}},{key:"handleClick",value:function(e){this.dialogVisible=!1,this.viewer=this.$store.state.viewer;var t=new h(this.viewer);console.log("tilesetLoader:",t);try{t.add(e.url)}catch(i){}}},{key:"mounted",value:function(){var e=this,t=this;this.viewer=this.$store.state.viewer,R.$on("addPanel",(function(i){try{t.dialogVisible=!0,e.viewer=e.$store.state.viewer,e.pos=i.pos}catch(n){}}))}}]),i}(A["b"]);he=Object(S["a"])([Object(A["a"])({components:{}})],he);var ge=he,ye=ge,we=(i("06e2"),Object(_["a"])(ye,pe,fe,!1,null,"587c9e48",null)),be=we.exports,_e=function(e){Object(M["a"])(i,e);var t=Object(P["a"])(i);function i(){return Object(l["a"])(this,i),t.apply(this,arguments)}return i}(A["b"]);_e=Object(S["a"])([Object(A["a"])({components:{prolist:re,addPanel:be,rightPanel:ve}})],_e);var ke=_e,xe=ke,Ce=Object(_["a"])(xe,Q,X,!1,null,"081fc08b",null),Oe=Ce.exports,Ee=function(){function e(t){Object(l["a"])(this,e),this.viewer=t,this.ellipsoid=this.viewer.scene.globe.ellipsoid,this.init()}return Object(c["a"])(e,[{key:"getLatitude",value:function(e){var t=this.viewer.camera.pickEllipsoid(e.endPosition,this.ellipsoid);if(t){var i=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t),n=u["z"].toDegrees(i.latitude),a=u["z"].toDegrees(i.longitude),o=u["z"].toDegrees(this.viewer.camera.positionCartographic.height/1e3).toFixed(2);this.lats={y:n,x:a,z:o}}}},{key:"addVideo",value:function(){console.log("this.lats:",this.lats),this.viewer.entities.add({position:u["f"].fromDegrees(this.lats.x,this.lats.y,10),label:{text:"中央空调",font:"500 30px Helvetica",scale:.5,style:u["w"].FILL,fillColor:u["i"].WHITE,pixelOffset:new u["e"](0,-60),showBackground:!0,backgroundColor:new u["i"](.5,.6,1,1)},billboard:{image:"/static/SampleData/kml/facilities/LaunchSite.png",scaleByDistance:new u["C"](150,1,15e6,.5),verticalOrigin:u["K"].BOTTOM}})}},{key:"test3d",value:function(e){var t=this.viewer.scene.pick(e.endPosition);Object(u["O"])(t)||console.log("pickedFeature:",t)}},{key:"getEntity",value:function(e){var t=this,i=t.viewer.scene.pick(e);Object(u["O"])(i)&&i.id;return i}},{key:"init",value:function(){var e=this;this.viewer.scene.camera.moveEnd.addEventListener((function(e){console.log("moveEnd camera")}));var t=new u["G"](this.viewer.scene.canvas);t.setInputAction((function(t){console.log("左键单击事件 start：",t);var i=e.getEntity(t.position),n=Object(u["O"])(i)?i.id:void 0;R.$emit("LEFT_CLICK",{entity:n}),console.log("pick:",i,n)}),u["H"].LEFT_CLICK),t.setInputAction((function(e){console.log("左键双击事件：",e.position)}),u["H"].LEFT_DOUBLE_CLICK),t.setInputAction((function(t){e.movement=t.endPosition,e.getLatitude(t)}),u["H"].MOUSE_MOVE),t.setInputAction((function(e){console.log("右键单击事件",e.position),R.$emit("rightPanel",{position:e.position})}),u["H"].RIGHT_CLICK),t.setInputAction((function(e){console.log("滚轮事件：",e)}),u["H"].WHEEL)}}]),e}(),Te=Ee,Ie=n["default"].extend({data:function(){return{viewer:null}},components:{tools:W,indexPanel:Oe,toolsEditer:Z},mounted:function(){this.init()},methods:{init:function(){u["u"].defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI1ODRiY2NiYi1jMmVlLTRkNTctYTNhNy03ZGNlMGQ2YmNjZTQiLCJpZCI6MTQwMDIsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NjQ1NTU1MDV9.6E9-n__jfDwX1e-C3H685NhJZ8HUx3BQ7FYEJ9Rz9Ec";var e=new u["L"]("viewer",{animation:!1,timeline:!1,homeButton:!1,fullscreenButton:!1,geocoder:!0,navigationHelpButton:!1,sceneModePicker:!1,infoBox:!1,vrButton:!1,baseLayerPicker:!0}),t=new u["M"]({url:"http://t0.tianditu.gov.cn/cia_w/wmts?tk=c3eec6ca025f3324e22a47545b25c6c8",layer:"cia",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18});e.scene.screenSpaceCameraController.enableCollisionDetection=!1,e.scene.globe.depthTestAgainstTerrain=!0,e.scene.globe.enableLighting=!1,e.imageryLayers.addImageryProvider(t),this.viewer=e,this.$store.commit("ACTIVE_VIEWER",e),this.systemTime(e),V.init(e),this.cemiusRun(e),new Te(e),setTimeout((function(){e.clock.shouldAnimate=!1,console.log("move to chinese"),V.addGeoJson("/static/province/510000_geojson_full.json")}),3e3),e.baseLayerPicker.viewModel.selectedImagery=e.baseLayerPicker.viewModel.imageryProviderViewModels[3]},test:function(e){var t=new h(e);console.log("tilesetLoader:",t),t.add("./ZYsmall/tileset.json")},cemiusRun:function(e){e.clock.multiplier=200,e.clock.shouldAnimate=!0;var t=e.clock.currentTime.secondsOfDay;function i(){var i=1,n=e.clock.currentTime.secondsOfDay,a=(n-t)/1e3;t=n,e.scene.camera.rotate(u["f"].UNIT_Z,-i*a)}e.clock.onTick.addEventListener(i)},systemTime:function(e){var t=new Date(Date.now());t.setUTCHours(12);var i=u["v"].fromDate(t);e.clock.currentTime=i}}}),je=Ie,De=(i("6524"),Object(_["a"])(je,j,D,!1,null,"e4ae0e7c",null)),ze=De.exports;n["default"].use(I["a"]);var Le=[{path:"/",name:"Viewer",component:ze}],Me=new I["a"]({routes:Le}),Pe=Me,Se=i("2f62");n["default"].use(Se["a"]);var Ae=new Se["a"].Store({state:{viewer:null},mutations:{ACTIVE_VIEWER:function(e,t){e.viewer=t}},actions:{},modules:{}}),Fe=i("5c96"),Ve=i.n(Fe);i("0fae"),i("20bd");n["default"].use(Ve.a),n["default"].config.productionTip=!1,new n["default"]({router:Pe,store:Ae,render:function(e){return e(T)}}).$mount("#app"),document.oncontextmenu=new Function("event.returnValue=false;"),document.onselectstart=new Function("event.returnValue=false;")},d943:function(e,t,i){"use strict";i("dd66")},dd66:function(e,t,i){},e945:function(e,t,i){"use strict";i("abef")},f628:function(e,t,i){},f698:function(e,t,i){},f725:function(e,t,i){"use strict";i("f628")}});